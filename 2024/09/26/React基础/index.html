
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.33.1" theme-name="Stellar" theme-version="1.33.1">
  
  
  <meta name="generator" content="Hexo 7.3.0">
  <meta http-equiv='x-dns-prefetch-control' content='on' />
  
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
  <meta name="theme-color" content="#f9fafb">
  <title>ReactåŸºç¡€ - Lianyutian</title>

  
    <meta name="description" content="1. ç®€ä»‹React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰çš„ JavaScript åº“ï¼Œç”¨æˆ·ç•Œé¢ç”±æŒ‰é’®ã€æ–‡æœ¬å’Œå›¾åƒç­‰å°å•å…ƒå†…å®¹æ„å»ºè€Œæˆã€‚React å¸®åŠ©ä½ æŠŠå®ƒä»¬ç»„åˆæˆå¯é‡ç”¨ã€å¯åµŒå¥—çš„ ç»„ä»¶ã€‚ä» web ç«¯ç½‘ç«™åˆ°ç§»åŠ¨ç«¯åº”ç”¨ï¼Œå±å¹•ä¸Šçš„æ‰€æœ‰å†…å®¹éƒ½å¯ä»¥è¢«åˆ†è§£æˆç»„ä»¶ã€‚ React çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š  ç»„ä»¶åŒ–ï¼šå°† UI æ‹†åˆ†ä¸ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä½¿å¾—å¼€å‘å’Œç»´æŠ¤æ›´åŠ é«˜æ•ˆã€‚ è™šæ‹Ÿ DOMï¼šé€šè¿‡è™šæ‹Ÿ DOM æå‡æ€§èƒ½ï¼Œåªåœ¨å®é™…">
<meta property="og:type" content="article">
<meta property="og:title" content="ReactåŸºç¡€">
<meta property="og:url" content="http://example.com/2024/09/26/React%E5%9F%BA%E7%A1%80/">
<meta property="og:site_name" content="Lianyutian">
<meta property="og:description" content="1. ç®€ä»‹React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰çš„ JavaScript åº“ï¼Œç”¨æˆ·ç•Œé¢ç”±æŒ‰é’®ã€æ–‡æœ¬å’Œå›¾åƒç­‰å°å•å…ƒå†…å®¹æ„å»ºè€Œæˆã€‚React å¸®åŠ©ä½ æŠŠå®ƒä»¬ç»„åˆæˆå¯é‡ç”¨ã€å¯åµŒå¥—çš„ ç»„ä»¶ã€‚ä» web ç«¯ç½‘ç«™åˆ°ç§»åŠ¨ç«¯åº”ç”¨ï¼Œå±å¹•ä¸Šçš„æ‰€æœ‰å†…å®¹éƒ½å¯ä»¥è¢«åˆ†è§£æˆç»„ä»¶ã€‚ React çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š  ç»„ä»¶åŒ–ï¼šå°† UI æ‹†åˆ†ä¸ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä½¿å¾—å¼€å‘å’Œç»´æŠ¤æ›´åŠ é«˜æ•ˆã€‚ è™šæ‹Ÿ DOMï¼šé€šè¿‡è™šæ‹Ÿ DOM æå‡æ€§èƒ½ï¼Œåªåœ¨å®é™…">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/assets/20240507174529.png">
<meta property="article:published_time" content="2024-09-26T09:09:40.000Z">
<meta property="article:modified_time" content="2025-12-23T08:50:16.676Z">
<meta property="article:author" content="lianyutian">
<meta property="article:tag" content="React">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/assets/20240507174529.png">
  
  
  
  <meta name="keywords" content="React">

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="Lianyutian" type="application/atom+xml">
  

  <link rel="stylesheet" href="/css/main.css?v=1.33.1">


  
    <link rel="shortcut icon" href="/assets/20240507174529.png">
  

  

  <script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"lianyutian","sameAs":[],"image":"/assets/20240507174529.png"},"dateCreated":"2024-09-26T09:09:40+00:00","dateModified":"2025-12-23T08:50:16+00:00","datePublished":"2024-09-26T09:09:40+00:00","description":"","headline":"ReactåŸºç¡€","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2024/09/26/React%E5%9F%BA%E7%A1%80/"},"publisher":{"@type":"Organization","name":"lianyutian","sameAs":[],"image":"/assets/20240507174529.png","logo":{"@type":"ImageObject","url":"/assets/20240507174529.png"}},"url":"http://example.com/2024/09/26/React%E5%9F%BA%E7%A1%80/","keywords":"React","image":[]}</script>
  
</head>
<body>

<div class="l_body content" id="start" layout="post" type="tech" ><aside class="l_left"><div class="sidebg"></div><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="/assets/20240507174529.png" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main">Lianyutian</div><div class="sub cap">å­¦æ— æ­¢å¢ƒ</div></a></div></header>

<div class="nav-area">

<nav class="menu dis-select"><a class="nav-item active" title="æ–‡ç« " href="/" style="color:#1e6150"><span>æ–‡ç« </span></a><a class="nav-item" title="wiki" href="/wiki/" style="color:#1e6150"><span>wiki</span></a></nav>
</div>
<div class="widgets">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"></path><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"></path></svg></a><input type="text" class="search-input" id="search-input" placeholder="ç«™å†…æœç´¢"></form><div id="search-result"></div><div class="search-no-result">æ²¡æœ‰æ‰¾åˆ°å†…å®¹ï¼</div></div>



<widget class="widget-wrapper recent post-list"><div class="widget-header dis-select"><span class="name">æœ€è¿‘æ›´æ–°</span></div><div class="widget-body fs14"><a class="item title" href="/2025/03/27/%E7%A4%BE%E5%8C%BA%E5%95%86%E5%9F%8E/"><span class="title">'ç¤¾åŒºå•†åŸ'</span></a><a class="item title" href="/2024/09/06/rpc%E5%9F%BA%E7%A1%80/"><span class="title">rpcåŸºç¡€</span></a><a class="item title" href="/2025/03/25/xxl-job/"><span class="title">xxl-jobåŸºç¡€</span></a><a class="item title" href="/2025/03/27/%E4%BA%91%E7%8E%AF%E5%A2%83/"><span class="title">äº‘ç¯å¢ƒ</span></a><a class="item title" href="/2025/03/28/%E5%8C%BA%E5%9D%97%E9%93%BE/"><span class="title">åŒºå—é“¾</span></a><a class="item title" href="/2024/12/13/circle-shop/"><span class="title">circle-shop</span></a><a class="item title" href="/2024/11/26/cloud-mall-vue/"><span class="title">cloud-mall-vue</span></a><a class="item title" href="/2024/09/06/protobuf%E5%9F%BA%E7%A1%80/"><span class="title">protobufåŸºç¡€</span></a><a class="item title" href="/2024/09/26/React%E5%9F%BA%E7%A1%80/"><span class="title">ReactåŸºç¡€</span></a><a class="item title" href="/2024/05/29/ReentrantLock%E8%AF%A6%E8%A7%A3/"><span class="title">ReentrantLockè¯¦è§£</span></a></div></widget>
</div>

</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">ä¸»é¡µ</a>
<span class="sep"></span><a class="cap breadcrumb" href="/">æ–‡ç« </a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a></div>
<div class="flex-row" id="post-meta"><span class="text created">å‘å¸ƒäºï¼š<time datetime="2024-09-26T09:09:40.000Z">2024-09-26</time></span><span class="sep updated"></span><span class="text updated">æ›´æ–°äºï¼š<time datetime="2025-12-23T08:50:16.676Z">2025-12-23</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>ReactåŸºç¡€</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><h1 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h1><p>React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰çš„ JavaScript åº“ï¼Œç”¨æˆ·ç•Œé¢ç”±æŒ‰é’®ã€æ–‡æœ¬å’Œå›¾åƒç­‰å°å•å…ƒå†…å®¹æ„å»ºè€Œæˆã€‚React å¸®åŠ©ä½ æŠŠå®ƒä»¬ç»„åˆæˆå¯é‡ç”¨ã€å¯åµŒå¥—çš„ <em>ç»„ä»¶</em>ã€‚ä» web ç«¯ç½‘ç«™åˆ°ç§»åŠ¨ç«¯åº”ç”¨ï¼Œå±å¹•ä¸Šçš„æ‰€æœ‰å†…å®¹éƒ½å¯ä»¥è¢«åˆ†è§£æˆç»„ä»¶ã€‚</p>
<p>React çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ç»„ä»¶åŒ–</strong>ï¼šå°† UI æ‹†åˆ†ä¸ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä½¿å¾—å¼€å‘å’Œç»´æŠ¤æ›´åŠ é«˜æ•ˆã€‚</li>
<li><strong>è™šæ‹Ÿ DOM</strong>ï¼šé€šè¿‡è™šæ‹Ÿ DOM æå‡æ€§èƒ½ï¼Œåªåœ¨å®é™…éœ€è¦æ›´æ–°çš„éƒ¨åˆ†è¿›è¡Œé‡æ¸²æŸ“ï¼Œå‡å°‘äº†ä¸çœŸå® DOM çš„ç›´æ¥æ“ä½œã€‚</li>
<li><strong>å•å‘æ•°æ®æµ</strong>ï¼šæ•°æ®åœ¨åº”ç”¨ä¸­çš„æµåŠ¨æ˜¯å•å‘çš„ï¼Œç®€åŒ–äº†æ•°æ®ç®¡ç†ï¼Œä½¿å¾—è°ƒè¯•æ›´ä¸ºæ–¹ä¾¿ã€‚</li>
<li><strong>å£°æ˜å¼ç¼–ç¨‹</strong>ï¼šå¼€å‘è€…åªéœ€æè¿°æƒ³è¦çš„ UI çŠ¶æ€ï¼ŒReact ä¼šå¤„ç†æ›´æ–°çš„ç»†èŠ‚ã€‚</li>
</ol>
<h1 id="2-æè¿°-UI"><a href="#2-æè¿°-UI" class="headerlink" title="2. æè¿° UI"></a>2. æè¿° UI</h1><h2 id="2-1-ç»„ä»¶"><a href="#2-1-ç»„ä»¶" class="headerlink" title="2.1 ç»„ä»¶"></a>2.1 ç»„ä»¶</h2><h3 id="2-1-1-UIæ„æˆ"><a href="#2-1-1-UIæ„æˆ" class="headerlink" title="2.1.1 UIæ„æˆ"></a>2.1.1 UIæ„æˆ</h3><p>åœ¨ Web å½“ä¸­ï¼ŒHTML å…è®¸æˆ‘ä»¬ä½¿ç”¨å…¶å†…ç½®çš„æ ‡ç­¾é›†ï¼ˆå¦‚ <code>&lt;h1&gt;</code> å’Œ <code>&lt;li&gt;</code>ï¼‰åˆ›å»ºä¸°å¯Œçš„ç»“æ„åŒ–æ–‡æ¡£ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘çš„ç¬¬ä¸€ä¸ªç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç»„ä»¶ï¼šUI æ„æˆè¦ç´ <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>å®šä¹‰ç»„ä»¶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>ä½¿ç”¨ç»„ä»¶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240926091658.png"></p>
<p><code>&lt;article&gt;</code> è¡¨ç¤ºè¿™ç¯‡æ–‡ç« ï¼Œ<code>&lt;h1&gt;</code> è¡¨ç¤ºæ–‡ç« çš„æ ‡é¢˜ï¼Œ<code>&lt;ol&gt;</code> ä»¥æœ‰åºåˆ—è¡¨çš„å½¢å¼è¡¨ç¤ºæ–‡ç« çš„ï¼ˆç¼©å†™çš„ï¼‰ç›®å½•ã€‚æ¯ä¸€ä¸ªä¾§è¾¹æ ã€å¤´åƒã€æ¨¡æ€æ¡†ã€ä¸‹æ‹‰æ¡†çš„èƒŒåæ˜¯éƒ½æ˜¯åƒè¿™æ ·çš„ï¼ˆç»“åˆäº†ç”¨äºæ ·å¼çš„ CSS å’Œç”¨äºäº¤äº’çš„ JavaScript çš„ï¼‰æ ‡ç­¾â€”â€”ä½ åœ¨ Web ä¸Šçœ‹åˆ°çš„æ¯ä¸€ä¸ª UI æ¨¡å—ã€‚</p>
<p>React å…è®¸ä½ å°†æ ‡ç­¾ã€CSS å’Œ JavaScript ç»„åˆæˆè‡ªå®šä¹‰â€œç»„ä»¶â€ï¼Œå³ <strong>åº”ç”¨ç¨‹åºä¸­å¯å¤ç”¨çš„ UI å…ƒç´ </strong>ã€‚ä¸Šæ–‡ä¸­è¡¨ç¤ºç›®å½•çš„ä»£ç å¯ä»¥æ”¹å†™æˆä¸€ä¸ªèƒ½å¤Ÿåœ¨æ¯ä¸ªé¡µé¢ä¸­æ¸²æŸ“çš„ <code>&lt;TableOfContents /&gt;</code> ç»„ä»¶ã€‚å®é™…ä¸Šï¼Œä½¿ç”¨çš„ä¾ç„¶æ˜¯ <code>&lt;article&gt;</code>ã€<code>&lt;h1&gt;</code> ç­‰ç›¸åŒçš„ HTML æ ‡ç­¾ã€‚</p>
<p>å°±åƒä½¿ç”¨ HTML æ ‡ç­¾ä¸€æ ·ï¼Œä½ å¯ä»¥ç»„åˆã€æ’åºå’ŒåµŒå¥—ç»„ä»¶æ¥ç»˜åˆ¶æ•´ä¸ªé¡µé¢ã€‚</p>
<p>éšç€é¡¹ç›®çš„å‘å±•ï¼Œä½ ä¼šå‘ç°å¾ˆå¤šå¸ƒå±€å¯ä»¥é€šè¿‡å¤ç”¨å·²ç»å®Œæˆçš„ç»„ä»¶æ¥å®ç°ï¼Œä»è€ŒåŠ å¿«å¼€å‘è¿›ç¨‹ã€‚ä½ å¯ä»¥ä½¿ç”¨ React å¼€æºç¤¾åŒºåˆ†äº«çš„å¤§é‡ç»„ä»¶ï¼ˆä¾‹å¦‚ <a target="_blank" rel="noopener" href="https://chakra-ui.com/">Chakra UI</a> å’Œ <a target="_blank" rel="noopener" href="https://material-ui.com/">Material UI</a>ï¼‰æ¥å¿«é€Ÿå¯åŠ¨é¡¹ç›®ã€‚ </p>
<h3 id="2-1-2-å®šä¹‰ç»„ä»¶"><a href="#2-1-2-å®šä¹‰ç»„ä»¶" class="headerlink" title="2.1.2 å®šä¹‰ç»„ä»¶"></a>2.1.2 å®šä¹‰ç»„ä»¶</h3><p>ä¸€ç›´ä»¥æ¥ï¼Œåˆ›å»ºç½‘é¡µæ—¶ï¼ŒWeb å¼€å‘äººå‘˜ä¼šç”¨æ ‡ç­¾æè¿°å†…å®¹ï¼Œç„¶åé€šè¿‡ JavaScript æ¥å¢åŠ äº¤äº’ã€‚</p>
<p>è¿™ç§åœ¨ Web ä¸Šæ·»åŠ äº¤äº’çš„æ–¹å¼èƒ½äº§ç”Ÿå‡ºè‰²çš„æ•ˆæœã€‚ç°åœ¨è®¸å¤šç½‘ç«™å’Œå…¨éƒ¨åº”ç”¨éƒ½éœ€è¦äº¤äº’ã€‚</p>
<p>React æœ€ä¸ºé‡è§†äº¤äº’æ€§ä¸”ä½¿ç”¨äº†ç›¸åŒçš„å¤„ç†æ–¹å¼ï¼š<strong>React ç»„ä»¶æ˜¯ä¸€æ®µå¯ä»¥ä½¿ç”¨æ ‡ç­¾è¿›è¡Œæ‰©å±•çš„ JavaScript å‡½æ•°</strong>ã€‚</p>
<p>å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/MK3eW3Am.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;Katherine Johnson&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä»¥ä¸‹æ˜¯æ„å»ºç»„ä»¶çš„æ­¥éª¤ï¼š</strong></p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå¯¼å‡ºç»„ä»¶</strong></p>
<p><code>export default</code> å‰ç¼€æ˜¯ä¸€ç§ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/web/javascript/reference/statements/export">JavaScript æ ‡å‡†è¯­æ³•</a>ï¼ˆé React çš„ç‰¹æ€§ï¼‰ã€‚å®ƒå…è®¸ä½ å¯¼å‡ºä¸€ä¸ªæ–‡ä»¶ä¸­çš„ä¸»è¦å‡½æ•°ä»¥ä¾¿ä½ ä»¥åå¯ä»¥ä»å…¶ä»–æ–‡ä»¶å¼•å…¥å®ƒã€‚æ¬²äº†è§£æ›´å¤šå…³äºå¯¼å…¥çš„å†…å®¹ï¼Œè¯·å‚é˜… <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/importing-and-exporting-components">ç»„ä»¶çš„å¯¼å…¥ä¸å¯¼å‡º</a> ç« èŠ‚ï¼</p>
<p><strong>ç¬¬äºŒæ­¥ï¼šå®šä¹‰å‡½æ•°</strong></p>
<p>ä½¿ç”¨ <code>function Profile() &#123; &#125;</code> å®šä¹‰åä¸º <code>Profile</code> çš„ JavaScript å‡½æ•°ã€‚</p>
<blockquote>
<p>React ç»„ä»¶æ˜¯å¸¸è§„çš„ JavaScript å‡½æ•°ï¼Œä½† <strong>ç»„ä»¶çš„åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´</strong>ï¼Œå¦åˆ™å®ƒä»¬å°†æ— æ³•è¿è¡Œï¼</p>
</blockquote>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ æ ‡ç­¾</strong></p>
<p>è¿™ä¸ªç»„ä»¶è¿”å›ä¸€ä¸ªå¸¦æœ‰ <code>src</code> å’Œ <code>alt</code> å±æ€§çš„ <code>&lt;img /&gt;</code> æ ‡ç­¾ã€‚<code>&lt;img /&gt;</code> å†™å¾—åƒ HTMLï¼Œä½†å®é™…ä¸Šæ˜¯ JavaScriptï¼è¿™ç§è¯­æ³•è¢«ç§°ä¸º <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/writing-markup-with-jsx">JSX</a>ï¼Œå®ƒå…è®¸ä½ åœ¨ JavaScript ä¸­åµŒå…¥æ ‡ç­¾ã€‚</p>
<p>è¿”å›è¯­å¥å¯ä»¥å…¨å†™åœ¨ä¸€è¡Œä¸Šï¼Œå¦‚ä¸‹é¢ç»„ä»¶ä¸­æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/MK3eW3As.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Katherine Johnson&quot;</span> /&gt;</span></span>;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œå¦‚æœä½ çš„æ ‡ç­¾å’Œ <code>return</code> å…³é”®å­—ä¸åœ¨åŒä¸€è¡Œï¼Œåˆ™å¿…é¡»æŠŠå®ƒåŒ…è£¹åœ¨ä¸€å¯¹æ‹¬å·ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/MK3eW3As.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Katherine Johnson&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ²¡æœ‰æ‹¬å·åŒ…è£¹çš„è¯ï¼Œä»»ä½•åœ¨ <code>return</code> ä¸‹ä¸€è¡Œçš„ä»£ç éƒ½ <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/2846283/what-are-the-rules-for-javascripts-automatic-semicolon-insertion-asi">å°†è¢«å¿½ç•¥</a>ï¼</p>
</blockquote>
<h3 id="2-1-3-ä½¿ç”¨ç»„ä»¶"><a href="#2-1-3-ä½¿ç”¨ç»„ä»¶" class="headerlink" title="2.1.3 ä½¿ç”¨ç»„ä»¶"></a>2.1.3 ä½¿ç”¨ç»„ä»¶</h3><p>ç°åœ¨ä½ å·²ç»å®šä¹‰äº† <code>Profile</code> ç»„ä»¶ï¼Œä½ å¯ä»¥åœ¨å…¶ä»–ç»„ä»¶ä¸­ä½¿ç”¨å®ƒã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å¯¼å‡ºä¸€ä¸ªå†…éƒ¨ä½¿ç”¨äº†å¤šä¸ª <code>Profile</code> ç»„ä»¶çš„ <code>Gallery</code> ç»„ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/MK3eW3As.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;Katherine Johnson&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>äº†ä¸èµ·çš„ç§‘å­¦å®¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- This setup is not suitable for production. --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Only use it in development! --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/@babel/standalone/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;https://ga.jspm.io/npm:es-module-shims@1.7.0/dist/es-module-shims.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;importmap&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="string">&quot;imports&quot;</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="string">&quot;react&quot;</span>: <span class="string">&quot;https://esm.sh/react?dev&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="string">&quot;react-dom/client&quot;</span>: <span class="string">&quot;https://esm.sh/react-dom/client?dev&quot;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span> <span class="attr">data-type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">StrictMode</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; createRoot &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="language-javascript">      <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/MK3eW3As.jpg&quot;</span></span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="language-javascript">      <span class="attr">alt</span>=<span class="string">&quot;Katherine Johnson&quot;</span></span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="language-javascript">    /&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">  );</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> <span class="title class_">App</span> = <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">return</span> (</span></span><br><span class="line"><span class="language-javascript">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>äº†ä¸èµ·çš„ç§‘å­¦å®¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">  );</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> root = <span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">root.<span class="title function_">render</span>(</span></span><br><span class="line"><span class="language-javascript">  <span class="language-xml"><span class="tag">&lt;<span class="name">StrictMode</span>&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">    <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span></span><br><span class="line"><span class="language-xml"><span class="language-javascript">  <span class="tag">&lt;/<span class="name">StrictMode</span>&gt;</span></span></span></span><br><span class="line"><span class="language-javascript">);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">* &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-family</span>: sans-serif;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h2</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h3</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h4</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h5</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">h6</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">code</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">1.2em</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-inline-start</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">img</span> &#123; <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">10px</span> <span class="number">0</span>; <span class="attribute">height</span>: <span class="number">90px</span>; &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æµè§ˆå™¨æ‰€çœ‹åˆ°çš„</strong></p>
<p>æ³¨æ„ä¸‹é¢ä¸¤è€…çš„åŒºåˆ«ï¼š</p>
<ul>
<li><code>&lt;section&gt;</code> æ˜¯å°å†™çš„ï¼Œæ‰€ä»¥ React çŸ¥é“æˆ‘ä»¬æŒ‡çš„æ˜¯ HTML æ ‡ç­¾ã€‚</li>
<li><code>&lt;Profile /&gt;</code> ä»¥å¤§å†™ <code>P</code> å¼€å¤´ï¼Œæ‰€ä»¥ React çŸ¥é“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨åä¸º <code>Profile</code> çš„ç»„ä»¶ã€‚</li>
</ul>
<p>ç„¶è€Œ <code>Profile</code> åŒ…å«æ›´å¤šçš„ HTMLï¼š<code>&lt;img /&gt;</code>ã€‚è¿™æ˜¯æµè§ˆå™¨æœ€åæ‰€çœ‹åˆ°çš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>äº†ä¸èµ·çš„ç§‘å­¦å®¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/MK3eW3As.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Katherine Johnson&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/MK3eW3As.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Katherine Johnson&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/MK3eW3As.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Katherine Johnson&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-1-4-åµŒå¥—å’Œç»„ç»‡ç»„ä»¶"><a href="#2-1-4-åµŒå¥—å’Œç»„ç»‡ç»„ä»¶" class="headerlink" title="2.1.4 åµŒå¥—å’Œç»„ç»‡ç»„ä»¶"></a>2.1.4 åµŒå¥—å’Œç»„ç»‡ç»„ä»¶</h3><p>ç»„ä»¶æ˜¯å¸¸è§„çš„ JavaScript å‡½æ•°ï¼Œæ‰€ä»¥ä½ å¯ä»¥å°†å¤šä¸ªç»„ä»¶ä¿å­˜åœ¨åŒä¸€ä»½æ–‡ä»¶ä¸­ã€‚å½“ç»„ä»¶ç›¸å¯¹è¾ƒå°æˆ–å½¼æ­¤ç´§å¯†ç›¸å…³æ—¶ï¼Œè¿™æ˜¯ä¸€ç§çœäº‹çš„å¤„ç†æ–¹å¼ã€‚å¦‚æœè¿™ä¸ªæ–‡ä»¶å˜å¾—è‡ƒè‚¿ï¼Œä½ ä¹Ÿå¯ä»¥éšæ—¶å°† <code>Profile</code> ç§»åŠ¨åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚ä½ å¯ä»¥ç«‹å³åœ¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/importing-and-exporting-components">å…³äºå¼•å…¥çš„é¡µé¢</a> ä¸­å­¦ä¹ å¦‚ä½•åšåˆ°è¿™äº›ã€‚</p>
<p>å› ä¸º <code>Profile</code> ç»„ä»¶åœ¨ <code>Gallery</code> ç»„ä»¶ä¸­æ¸²æŸ“â€”â€”ç”šè‡³å¥½å‡ æ¬¡ï¼â€”â€”æˆ‘ä»¬å¯ä»¥è®¤ä¸º <code>Gallery</code> æ˜¯ä¸€ä¸ª <strong>çˆ¶ç»„ä»¶</strong>ï¼Œå°†æ¯ä¸ª <code>Profile</code> æ¸²æŸ“ä¸ºä¸€ä¸ªâ€œå­©å­â€ã€‚è¿™æ˜¯ React çš„ç¥å¥‡ä¹‹å¤„ï¼šä½ å¯ä»¥åªå®šä¹‰ç»„ä»¶ä¸€æ¬¡ï¼Œç„¶åæŒ‰éœ€å¤šå¤„å’Œå¤šæ¬¡ä½¿ç”¨ã€‚</p>
<blockquote>
<p>ç»„ä»¶å¯ä»¥æ¸²æŸ“å…¶ä»–ç»„ä»¶ï¼Œä½†æ˜¯ <strong>è¯·ä¸è¦åµŒå¥—ä»–ä»¬çš„å®šä¹‰</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ğŸ”´ æ°¸è¿œä¸è¦åœ¨ç»„ä»¶ä¸­å®šä¹‰ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢è¿™æ®µä»£ç  <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/preserving-and-resetting-state#different-components-at-the-same-position-reset-state">éå¸¸æ…¢ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´ bug äº§ç”Ÿ</a>ã€‚å› æ­¤ï¼Œä½ åº”è¯¥åœ¨é¡¶å±‚å®šä¹‰æ¯ä¸ªç»„ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// âœ… åœ¨é¡¶å±‚å£°æ˜ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“å­ç»„ä»¶éœ€è¦ä½¿ç”¨çˆ¶ç»„ä»¶çš„æ•°æ®æ—¶ï¼Œä½ éœ€è¦ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/passing-props-to-a-component">é€šè¿‡ props çš„å½¢å¼è¿›è¡Œä¼ é€’</a>ï¼Œè€Œä¸æ˜¯åµŒå¥—å®šä¹‰ã€‚</p>
</blockquote>
<h3 id="2-1-5-ç»„ä»¶çš„å¯¼å…¥ä¸å¯¼å‡º"><a href="#2-1-5-ç»„ä»¶çš„å¯¼å…¥ä¸å¯¼å‡º" class="headerlink" title="2.1.5 ç»„ä»¶çš„å¯¼å…¥ä¸å¯¼å‡º"></a>2.1.5 ç»„ä»¶çš„å¯¼å…¥ä¸å¯¼å‡º</h3><p>ç»„ä»¶çš„ç¥å¥‡ä¹‹å¤„åœ¨äºå®ƒä»¬çš„å¯é‡ç”¨æ€§ï¼šä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªç”±å…¶ä»–ç»„ä»¶æ„æˆçš„ç»„ä»¶ã€‚ä½†å½“ä½ åµŒå¥—äº†è¶Šæ¥è¶Šå¤šçš„ç»„ä»¶æ—¶ï¼Œåˆ™éœ€è¦å°†å®ƒä»¬æ‹†åˆ†æˆä¸åŒçš„æ–‡ä»¶ã€‚è¿™æ ·å¯ä»¥ä½¿å¾—æŸ¥æ‰¾æ–‡ä»¶æ›´åŠ å®¹æ˜“ï¼Œå¹¶ä¸”èƒ½åœ¨æ›´å¤šåœ°æ–¹å¤ç”¨è¿™äº›ç»„ä»¶ã€‚</p>
<h4 id="2-1-5-1-æ ¹ç»„ä»¶"><a href="#2-1-5-1-æ ¹ç»„ä»¶" class="headerlink" title="2.1.5.1 æ ¹ç»„ä»¶"></a>2.1.5.1 æ ¹ç»„ä»¶</h4><p>åœ¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/your-first-component">ä½ çš„ç¬¬ä¸€ä¸ªç»„ä»¶</a> ä¸­ï¼Œä½ åˆ›å»ºäº†ä¸€ä¸ª <code>Profile</code> ç»„ä»¶ï¼Œå¹¶ä¸”æ¸²æŸ“åœ¨ <code>Gallery</code> ç»„ä»¶é‡Œã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/MK3eW3As.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;Katherine Johnson&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>äº†ä¸èµ·çš„ç§‘å­¦å®¶ä»¬<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ‰€æœ‰ç»„ä»¶ç›®å‰éƒ½å®šä¹‰åœ¨ <strong>æ ¹ç»„ä»¶</strong> <code>App.js</code> æ–‡ä»¶ä¸­ã€‚å…·ä½“è¿˜éœ€æ ¹æ®é¡¹ç›®é…ç½®å†³å®šï¼Œæœ‰äº›æ ¹ç»„ä»¶å¯èƒ½ä¼šå£°æ˜åœ¨å…¶ä»–æ–‡ä»¶ä¸­ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ¡†æ¶åŸºäºæ–‡ä»¶è¿›è¡Œè·¯ç”±ï¼Œå¦‚ Next.jsï¼Œé‚£ä½ æ¯ä¸ªé¡µé¢çš„æ ¹ç»„ä»¶éƒ½ä¼šä¸ä¸€æ ·ã€‚</p>
<h4 id="2-1-5-2-å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶"><a href="#2-1-5-2-å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶" class="headerlink" title="2.1.5.2 å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶"></a>2.1.5.2 å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶</h4><p>å¦‚æœå°†æ¥éœ€è¦åœ¨é¦–é¡µæ·»åŠ å…³äºç§‘å­¦ä¹¦ç±çš„åˆ—è¡¨ï¼Œäº¦æˆ–è€…éœ€è¦å°†æ‰€æœ‰çš„èµ„æ–™ä¿¡æ¯ç§»åŠ¨åˆ°å…¶ä»–æ–‡ä»¶ã€‚è¿™æ—¶å°† <code>Gallery</code> ç»„ä»¶å’Œ <code>Profile</code> ç»„ä»¶ç§»å‡ºæ ¹ç»„ä»¶æ–‡ä»¶ä¼šæ›´åŠ åˆç†ã€‚è¿™ä¼šä½¿ç»„ä»¶æ›´åŠ æ¨¡å—åŒ–ï¼Œå¹¶ä¸”å¯åœ¨å…¶ä»–æ–‡ä»¶ä¸­å¤ç”¨ã€‚ä½ å¯ä»¥æ ¹æ®ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤å¯¹ç»„ä»¶è¿›è¡Œæ‹†åˆ†ï¼š</p>
<ol>
<li><strong>åˆ›å»º</strong> ä¸€ä¸ªæ–°çš„ JS æ–‡ä»¶æ¥å­˜æ”¾è¯¥ç»„ä»¶ã€‚</li>
<li><strong>å¯¼å‡º</strong> è¯¥æ–‡ä»¶ä¸­çš„å‡½æ•°ç»„ä»¶ï¼ˆå¯ä»¥ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/export#using_the_default_export">é»˜è®¤å¯¼å‡º</a> æˆ– <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/export#using_named_exports">å…·åå¯¼å‡º</a>ï¼‰</li>
<li>åœ¨éœ€è¦ä½¿ç”¨è¯¥ç»„ä»¶çš„æ–‡ä»¶ä¸­ <strong>å¯¼å…¥</strong>ï¼ˆå¯ä»¥æ ¹æ®ç›¸åº”çš„å¯¼å‡ºæ–¹å¼ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import#importing_defaults">é»˜è®¤å¯¼å…¥</a> æˆ– <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import#import_a_single_export_from_a_module">å…·åå¯¼å…¥</a>ï¼‰ã€‚</li>
</ol>
<p>è¿™é‡Œå°† <code>Profile</code> ç»„ä»¶å’Œ <code>Gallery</code> ç»„ä»¶ï¼Œä» <code>App.js</code> æ–‡ä»¶ä¸­ç§»åŠ¨åˆ°äº† <code>Gallery.js</code> æ–‡ä»¶ä¸­ã€‚ä¿®æ”¹åï¼Œå³å¯åœ¨ <code>App.js</code> ä¸­å¯¼å…¥ <code>Gallery.js</code> ä¸­çš„ <code>Gallery</code> ç»„ä»¶:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/QIrZWGIs.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;Alan L. Hart&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>äº†ä¸èµ·çš„ç§‘å­¦å®¶ä»¬<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Gallery</span> <span class="keyword">from</span> <span class="string">&#x27;./Gallery.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Gallery</span> /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥ç¤ºä¾‹ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚ä½•å°†ç»„ä»¶æ‹†åˆ†æˆä¸¤ä¸ªæ–‡ä»¶ï¼š</p>
<ol>
<li>Gallery.js<ul>
<li>å®šä¹‰äº† <code>Profile</code> ç»„ä»¶ï¼Œè¯¥ç»„ä»¶ä»…åœ¨è¯¥æ–‡ä»¶å†…ä½¿ç”¨ï¼Œæ²¡æœ‰è¢«å¯¼å‡ºã€‚</li>
<li>ä½¿ç”¨ <strong>é»˜è®¤å¯¼å‡º</strong> çš„æ–¹å¼ï¼Œå°† <code>Gallery</code> ç»„ä»¶å¯¼å‡º</li>
</ul>
</li>
<li>App.js<ul>
<li>ä½¿ç”¨ <strong>é»˜è®¤å¯¼å…¥</strong> çš„æ–¹å¼ï¼Œä» <code>Gallery.js</code> ä¸­å¯¼å…¥ <code>Gallery</code> ç»„ä»¶ã€‚</li>
<li>ä½¿ç”¨ <strong>é»˜è®¤å¯¼å‡º</strong> çš„æ–¹å¼ï¼Œå°†æ ¹ç»„ä»¶ <code>App</code> å¯¼å‡ºã€‚</li>
</ul>
</li>
</ol>
<blockquote>
<p>å¼•å…¥è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸€äº›æ–‡ä»¶å¹¶æœªæ·»åŠ  <code>.js</code> æ–‡ä»¶åç¼€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Gallery</span> <span class="keyword">from</span> <span class="string">&#x27;./Gallery&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>æ— è®ºæ˜¯ <code>&#39;./Gallery.js&#39;</code> è¿˜æ˜¯ <code>&#39;./Gallery&#39;</code>ï¼Œåœ¨ React é‡Œéƒ½èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œåªæ˜¯å‰è€…æ›´ç¬¦åˆ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/JavaScript/Guide/Modules">åŸç”Ÿ ES æ¨¡å—</a>ã€‚</p>
</blockquote>
<p><strong>é»˜è®¤å¯¼å‡ºä¸å…·åå¯¼å‡º</strong></p>
<p>è¿™æ˜¯ JavaScript é‡Œä¸¤ä¸ªä¸»è¦ç”¨æ¥å¯¼å‡ºå€¼çš„æ–¹å¼ï¼šé»˜è®¤å¯¼å‡ºå’Œå…·åå¯¼å‡ºã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹ä¸­åªç”¨åˆ°äº†é»˜è®¤å¯¼å‡ºã€‚ä½†ä½ å¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé€‰æ‹©ä½¿ç”¨å…¶ä¸­ä¸€ç§ï¼Œæˆ–è€…ä¸¤ç§éƒ½ä½¿ç”¨ã€‚<strong>ä¸€ä¸ªæ–‡ä»¶é‡Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ª <em>é»˜è®¤</em> å¯¼å‡ºï¼Œä½†æ˜¯å¯ä»¥æœ‰ä»»æ„å¤šä¸ª <em>å…·å</em> å¯¼å‡ºã€‚</strong></p>
<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240926110419.png"></p>
<p>ç»„ä»¶çš„å¯¼å‡ºæ–¹å¼å†³å®šäº†å…¶å¯¼å…¥æ–¹å¼ã€‚å½“ä½ ç”¨é»˜è®¤å¯¼å…¥çš„æ–¹å¼ï¼Œå¯¼å…¥å…·åå¯¼å‡ºçš„ç»„ä»¶æ—¶ï¼Œå°±ä¼šæŠ¥é”™ã€‚å¦‚ä¸‹è¡¨æ ¼å¯ä»¥å¸®ä½ æ›´å¥½åœ°ç†è§£å®ƒä»¬ï¼š</p>
<table>
<thead>
<tr>
<th>è¯­æ³•</th>
<th>å¯¼å‡ºè¯­å¥</th>
<th>å¯¼å…¥è¯­å¥</th>
</tr>
</thead>
<tbody><tr>
<td>é»˜è®¤</td>
<td><code>export default function Button() &#123;&#125;</code></td>
<td><code>import Button from &#39;./Button.js&#39;;</code></td>
</tr>
<tr>
<td>å…·å</td>
<td><code>export function Button() &#123;&#125;</code></td>
<td><code>import &#123; Button &#125; from &#39;./Button.js&#39;;</code></td>
</tr>
</tbody></table>
<p>å½“ä½¿ç”¨é»˜è®¤å¯¼å…¥æ—¶ï¼Œä½ å¯ä»¥åœ¨ <code>import</code> è¯­å¥åé¢è¿›è¡Œä»»æ„å‘½åã€‚æ¯”å¦‚ <code>import Banana from &#39;./Button.js&#39;</code>ï¼Œå¦‚æ­¤ä½ èƒ½è·å¾—ä¸é»˜è®¤å¯¼å‡ºä¸€è‡´çš„å†…å®¹ã€‚ç›¸åï¼Œå¯¹äºå…·åå¯¼å…¥ï¼Œå¯¼å…¥å’Œå¯¼å‡ºçš„åå­—å¿…é¡»ä¸€è‡´ã€‚è¿™ä¹Ÿæ˜¯ç§°å…¶ä¸º <strong>å…·å</strong> å¯¼å…¥çš„åŸå› ï¼</p>
<p><strong>é€šå¸¸ï¼Œæ–‡ä»¶ä¸­ä»…åŒ…å«ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œäººä»¬ä¼šé€‰æ‹©é»˜è®¤å¯¼å‡ºï¼Œè€Œå½“æ–‡ä»¶ä¸­åŒ…å«å¤šä¸ªç»„ä»¶æˆ–æŸä¸ªå€¼éœ€è¦å¯¼å‡ºæ—¶ï¼Œåˆ™ä¼šé€‰æ‹©å…·åå¯¼å‡ºã€‚</strong> æ— è®ºé€‰æ‹©å“ªç§æ–¹å¼ï¼Œè¯·è®°å¾—ç»™ä½ çš„ç»„ä»¶å’Œç›¸åº”çš„æ–‡ä»¶å‘½åä¸€ä¸ªæœ‰æ„ä¹‰çš„åå­—ã€‚æˆ‘ä»¬ä¸å»ºè®®åˆ›å»ºæœªå‘½åçš„ç»„ä»¶ï¼Œæ¯”å¦‚ <code>export default () =&gt; &#123;&#125;</code>ï¼Œå› ä¸ºè¿™æ ·ä¼šä½¿å¾—è°ƒè¯•å˜å¾—å¼‚å¸¸å›°éš¾ã€‚</p>
<h4 id="2-1-5-3-ä»åŒä¸€æ–‡ä»¶å¯¼å‡ºå’Œå¯¼å…¥å¤šä¸ªç»„ä»¶"><a href="#2-1-5-3-ä»åŒä¸€æ–‡ä»¶å¯¼å‡ºå’Œå¯¼å…¥å¤šä¸ªç»„ä»¶" class="headerlink" title="2.1.5.3 ä»åŒä¸€æ–‡ä»¶å¯¼å‡ºå’Œå¯¼å…¥å¤šä¸ªç»„ä»¶"></a>2.1.5.3 ä»åŒä¸€æ–‡ä»¶å¯¼å‡ºå’Œå¯¼å…¥å¤šä¸ªç»„ä»¶</h4><p>å¦‚æœä½ åªæƒ³å±•ç¤ºä¸€ä¸ª <code>Profile</code> ç»„ï¼Œè€Œä¸å±•ç¤ºæ•´ä¸ªå›¾é›†ã€‚ä½ ä¹Ÿå¯ä»¥å¯¼å‡º <code>Profile</code> ç»„ä»¶ã€‚ä½† <code>Gallery.js</code> ä¸­å·²åŒ…å« <strong>é»˜è®¤</strong> å¯¼å‡ºï¼Œæ­¤æ—¶ï¼Œä½ ä¸èƒ½å®šä¹‰ <strong>ä¸¤ä¸ª</strong> é»˜è®¤å¯¼å‡ºã€‚ä½†ä½ å¯ä»¥å°†å…¶åœ¨æ–°æ–‡ä»¶ä¸­è¿›è¡Œé»˜è®¤å¯¼å‡ºï¼Œæˆ–è€…å°† <code>Profile</code> è¿›è¡Œ <strong>å…·å</strong> å¯¼å‡ºã€‚<strong>åŒä¸€æ–‡ä»¶ä¸­ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡ºï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªå…·åå¯¼å‡ºï¼</strong></p>
<blockquote>
<p>ä¸ºäº†å‡å°‘åœ¨é»˜è®¤å¯¼å‡ºå’Œå…·åå¯¼å‡ºä¹‹é—´çš„æ··æ·†ï¼Œä¸€äº›å›¢é˜Ÿä¼šé€‰æ‹©åªä½¿ç”¨ä¸€ç§é£æ ¼ï¼ˆé»˜è®¤æˆ–è€…å…·åï¼‰ï¼Œæˆ–è€…ç¦æ­¢åœ¨å•ä¸ªæ–‡ä»¶å†…æ··åˆä½¿ç”¨ã€‚è¿™å› äººè€Œå¼‚ï¼Œé€‰æ‹©æœ€é€‚åˆä½ çš„å³å¯ï¼</p>
</blockquote>
<p>é¦–å…ˆï¼Œç”¨å…·åå¯¼å‡ºçš„æ–¹å¼ï¼Œå°† <code>Profile</code> ç»„ä»¶ä» <code>Gallery.js</code> <strong>å¯¼å‡º</strong>ï¼ˆä¸ä½¿ç”¨ <code>default</code> å…³é”®å­—ï¼‰ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥ç€ï¼Œç”¨å…·åå¯¼å…¥çš„æ–¹å¼ï¼Œä» <code>Gallery.js</code> æ–‡ä»¶ä¸­ <strong>å¯¼å…¥</strong> <code>Profile</code> ç»„ä»¶ï¼ˆç”¨å¤§æ‹¬å·ï¼‰:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Profile</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./Gallery.js&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œåœ¨ <code>App</code> ç»„ä»¶é‡Œ <strong>æ¸²æŸ“</strong> <code>&lt;Profile /&gt;</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œ<code>Gallery.js</code> åŒ…å«ä¸¤ä¸ªå¯¼å‡ºï¼šä¸€ä¸ªæ˜¯é»˜è®¤å¯¼å‡ºçš„ <code>Gallery</code>ï¼Œå¦ä¸€ä¸ªæ˜¯å…·åå¯¼å‡ºçš„ <code>Profile</code>ã€‚<code>App.js</code> ä¸­å‡å¯¼å…¥äº†è¿™ä¸¤ä¸ªç»„ä»¶ã€‚å°è¯•å°† <code>&lt;Profile /&gt;</code> æ”¹æˆ <code>&lt;Gallery /&gt;</code>ï¼Œå›åˆ°ç¤ºä¾‹ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/QIrZWGIs.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;Alan L. Hart&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>äº†ä¸èµ·çš„ç§‘å­¦å®¶ä»¬<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Gallery</span> <span class="keyword">from</span> <span class="string">&#x27;./Gallery.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Profile</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./Gallery.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Profile</span> /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä¸­æ··åˆä½¿ç”¨äº†é»˜è®¤å¯¼å‡ºå’Œå…·åå¯¼å‡ºï¼š</p>
<ul>
<li>Gallery.js<ul>
<li>ä½¿ç”¨ <strong>å…·åå¯¼å‡º</strong> çš„æ–¹å¼ï¼Œå°† <code>Profile</code> ç»„ä»¶å¯¼å‡ºï¼Œå¹¶å–åä¸º <code>Profile</code>ã€‚</li>
<li>ä½¿ç”¨ <strong>é»˜è®¤å¯¼å‡º</strong> çš„æ–¹å¼ï¼Œå°† <code>Gallery</code> ç»„ä»¶å¯¼å‡ºã€‚</li>
</ul>
</li>
<li>App.js<ul>
<li>ä½¿ç”¨ <strong>å…·åå¯¼å…¥</strong> çš„æ–¹å¼ï¼Œä» <code>Gallery.js</code> ä¸­å¯¼å…¥ <code>Profile</code> ç»„ä»¶ï¼Œå¹¶å–åä¸º <code>Profile</code>ã€‚</li>
<li>ä½¿ç”¨ <strong>é»˜è®¤å¯¼å…¥</strong> çš„æ–¹å¼ï¼Œä» <code>Gallery.js</code> ä¸­å¯¼å…¥ <code>Gallery</code> ç»„ä»¶ã€‚</li>
<li>ä½¿ç”¨ <strong>é»˜è®¤å¯¼å‡º</strong> çš„æ–¹å¼ï¼Œå°†æ ¹ç»„ä»¶ <code>App</code> å¯¼å‡ºã€‚</li>
</ul>
</li>
</ul>
<h2 id="2-2-JSXæ ‡ç­¾è¯­è¨€"><a href="#2-2-JSXæ ‡ç­¾è¯­è¨€" class="headerlink" title="2.2 JSXæ ‡ç­¾è¯­è¨€"></a>2.2 JSXæ ‡ç­¾è¯­è¨€</h2><p><strong>JSX</strong> æ˜¯ JavaScript è¯­æ³•æ‰©å±•ï¼Œå¯ä»¥è®©ä½ åœ¨ JavaScript æ–‡ä»¶ä¸­ä¹¦å†™ç±»ä¼¼ HTML çš„æ ‡ç­¾ã€‚è™½ç„¶è¿˜æœ‰å…¶å®ƒæ–¹å¼å¯ä»¥ç¼–å†™ç»„ä»¶ï¼Œä½†å¤§éƒ¨åˆ† React å¼€å‘è€…æ›´å–œæ¬¢ JSX çš„ç®€æ´æ€§ï¼Œå¹¶ä¸”åœ¨å¤§éƒ¨åˆ†ä»£ç åº“ä¸­ä½¿ç”¨å®ƒã€‚</p>
<h3 id="2-2-1-å°†æ ‡ç­¾å¼•å…¥-JavaScript"><a href="#2-2-1-å°†æ ‡ç­¾å¼•å…¥-JavaScript" class="headerlink" title="2.2.1 å°†æ ‡ç­¾å¼•å…¥ JavaScript"></a>2.2.1 å°†æ ‡ç­¾å¼•å…¥ JavaScript</h3><p>ç½‘é¡µæ˜¯æ„å»ºåœ¨ HTMLã€CSS å’Œ JavaScript ä¹‹ä¸Šçš„ã€‚å¤šå¹´ä»¥æ¥ï¼Œweb å¼€å‘è€…éƒ½æ˜¯å°†ç½‘é¡µå†…å®¹å­˜æ”¾åœ¨ HTML ä¸­ï¼Œæ ·å¼æ”¾åœ¨ CSS ä¸­ï¼Œè€Œé€»è¾‘åˆ™æ”¾åœ¨ JavaScript ä¸­ â€”â€” é€šå¸¸æ˜¯åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ï¼é¡µé¢çš„å†…å®¹é€šè¿‡æ ‡ç­¾è¯­è¨€æè¿°å¹¶å­˜æ”¾åœ¨ HTML æ–‡ä»¶ä¸­ï¼Œè€Œé€»è¾‘åˆ™å•ç‹¬å­˜æ”¾åœ¨ JavaScript æ–‡ä»¶ä¸­ã€‚</p>
<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240926111754.png"></p>
<p>ä½†éšç€ Web çš„äº¤äº’æ€§è¶Šæ¥è¶Šå¼ºï¼Œé€»è¾‘è¶Šæ¥è¶Šå†³å®šé¡µé¢ä¸­çš„å†…å®¹ã€‚JavaScript æ§åˆ¶ç€ HTML çš„å†…å®¹ï¼è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ <strong>åœ¨ React ä¸­ï¼Œæ¸²æŸ“é€»è¾‘å’Œæ ‡ç­¾å…±åŒå­˜åœ¨äºåŒä¸€ä¸ªåœ°æ–¹â€”â€”ç»„ä»¶ã€‚</strong></p>
<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240926133555.png"></p>
<p>å°†ä¸€ä¸ªæŒ‰é’®çš„æ¸²æŸ“é€»è¾‘å’Œæ ‡ç­¾æ”¾åœ¨ä¸€èµ·å¯ä»¥ç¡®ä¿å®ƒä»¬åœ¨æ¯æ¬¡ç¼–è¾‘æ—¶éƒ½èƒ½ä¿æŒäº’ç›¸åŒæ­¥ã€‚åä¹‹ï¼Œå½¼æ­¤æ— å…³çš„ç»†èŠ‚æ˜¯äº’ç›¸éš”ç¦»çš„ï¼Œä¾‹å¦‚æŒ‰é’®çš„æ ‡ç­¾å’Œä¾§è¾¹æ çš„æ ‡ç­¾ã€‚è¿™æ ·æˆ‘ä»¬åœ¨ä¿®æ”¹å…¶ä¸­ä»»æ„ä¸€ä¸ªç»„ä»¶æ—¶ä¼šæ›´å®‰å…¨ã€‚</p>
<p>æ¯ä¸ª React ç»„ä»¶éƒ½æ˜¯ä¸€ä¸ª JavaScript å‡½æ•°ï¼Œå®ƒä¼šè¿”å›ä¸€äº›æ ‡ç­¾ï¼ŒReact ä¼šå°†è¿™äº›æ ‡ç­¾æ¸²æŸ“åˆ°æµè§ˆå™¨ä¸Šã€‚React ç»„ä»¶ä½¿ç”¨ä¸€ç§è¢«ç§°ä¸º JSX çš„è¯­æ³•æ‰©å±•æ¥æè¿°è¿™äº›æ ‡ç­¾ã€‚JSX çœ‹èµ·æ¥å’Œ HTML å¾ˆåƒï¼Œä½†å®ƒçš„è¯­æ³•æ›´åŠ ä¸¥æ ¼å¹¶ä¸”å¯ä»¥åŠ¨æ€å±•ç¤ºä¿¡æ¯ã€‚äº†è§£è¿™äº›åŒºåˆ«æœ€å¥½çš„æ–¹å¼å°±æ˜¯å°†ä¸€äº› HTML æ ‡ç­¾è½¬åŒ–ä¸º JSX æ ‡ç­¾ã€‚</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html#whats-a-jsx-transform">JSX and React æ˜¯ç›¸äº’ç‹¬ç«‹çš„</a> ä¸œè¥¿ã€‚ä½†å®ƒä»¬ç»å¸¸ä¸€èµ·ä½¿ç”¨ï¼Œä½†ä½  <strong>å¯ä»¥</strong> å•ç‹¬ä½¿ç”¨å®ƒä»¬ä¸­çš„ä»»æ„ä¸€ä¸ªï¼ŒJSX æ˜¯ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œè€Œ React åˆ™æ˜¯ä¸€ä¸ª JavaScript çš„åº“ã€‚</p>
</blockquote>
<h3 id="2-2-2-JSX-è§„åˆ™"><a href="#2-2-2-JSX-è§„åˆ™" class="headerlink" title="2.2.2 JSX è§„åˆ™"></a>2.2.2 JSX è§„åˆ™</h3><h4 id="2-2-2-1-åªèƒ½è¿”å›ä¸€ä¸ªæ ¹å…ƒç´ "><a href="#2-2-2-1-åªèƒ½è¿”å›ä¸€ä¸ªæ ¹å…ƒç´ " class="headerlink" title="2.2.2.1 åªèƒ½è¿”å›ä¸€ä¸ªæ ¹å…ƒç´ "></a>2.2.2.1 åªèƒ½è¿”å›ä¸€ä¸ªæ ¹å…ƒç´ </h4><p>å¦‚æœæƒ³è¦åœ¨ä¸€ä¸ªç»„ä»¶ä¸­åŒ…å«å¤šä¸ªå…ƒç´ ï¼Œ<strong>éœ€è¦ç”¨ä¸€ä¸ªçˆ¶æ ‡ç­¾æŠŠå®ƒä»¬åŒ…è£¹èµ·æ¥</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª <code>&lt;div&gt;</code> æ ‡ç­¾ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ·è’‚Â·æ‹‰ç›çš„å¾…åŠäº‹é¡¹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/yXOvdOSs.jpg&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">alt</span>=<span class="string">&quot;Hedy Lamarr&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;photo&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ä¸æƒ³åœ¨æ ‡ç­¾ä¸­å¢åŠ ä¸€ä¸ªé¢å¤–çš„ <code>&lt;div&gt;</code>ï¼Œå¯ä»¥ç”¨ <code>&lt;&gt;</code> å’Œ <code>&lt;/&gt;</code> å…ƒç´ æ¥ä»£æ›¿ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ·è’‚Â·æ‹‰ç›çš„å¾…åŠäº‹é¡¹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/yXOvdOSs.jpg&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">alt</span>=<span class="string">&quot;Hedy Lamarr&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;photo&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªç©ºæ ‡ç­¾è¢«ç§°ä½œ *<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/Fragment">Fragment</a>*ã€‚React Fragment å…è®¸ä½ å°†å­å…ƒç´ åˆ†ç»„ï¼Œè€Œä¸ä¼šåœ¨ HTML ç»“æ„ä¸­æ·»åŠ é¢å¤–èŠ‚ç‚¹ã€‚</p>
<blockquote>
<h4 id="ä¸ºä»€ä¹ˆå¤šä¸ª-JSX-æ ‡ç­¾éœ€è¦è¢«ä¸€ä¸ªçˆ¶å…ƒç´ åŒ…è£¹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå¤šä¸ª-JSX-æ ‡ç­¾éœ€è¦è¢«ä¸€ä¸ªçˆ¶å…ƒç´ åŒ…è£¹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå¤šä¸ª JSX æ ‡ç­¾éœ€è¦è¢«ä¸€ä¸ªçˆ¶å…ƒç´ åŒ…è£¹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå¤šä¸ª JSX æ ‡ç­¾éœ€è¦è¢«ä¸€ä¸ªçˆ¶å…ƒç´ åŒ…è£¹ï¼Ÿ</h4><p>JSX è™½ç„¶çœ‹èµ·æ¥å¾ˆåƒ HTMLï¼Œä½†åœ¨åº•å±‚å…¶å®è¢«è½¬åŒ–ä¸ºäº† JavaScript å¯¹è±¡ï¼Œä½ ä¸èƒ½åœ¨ä¸€ä¸ªå‡½æ•°ä¸­è¿”å›å¤šä¸ªå¯¹è±¡ï¼Œé™¤éç”¨ä¸€ä¸ªæ•°ç»„æŠŠä»–ä»¬åŒ…è£…èµ·æ¥ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¤šä¸ª JSX æ ‡ç­¾å¿…é¡»è¦ç”¨ä¸€ä¸ªçˆ¶å…ƒç´ æˆ–è€… Fragment æ¥åŒ…è£¹ã€‚</p>
</blockquote>
<h4 id="2-2-2-2-æ ‡ç­¾å¿…é¡»é—­åˆ"><a href="#2-2-2-2-æ ‡ç­¾å¿…é¡»é—­åˆ" class="headerlink" title="2.2.2.2 æ ‡ç­¾å¿…é¡»é—­åˆ"></a>2.2.2.2 æ ‡ç­¾å¿…é¡»é—­åˆ</h4><p>JSX è¦æ±‚æ ‡ç­¾å¿…é¡»æ­£ç¡®é—­åˆã€‚åƒ <code>&lt;img&gt;</code> è¿™æ ·çš„è‡ªé—­åˆæ ‡ç­¾å¿…é¡»ä¹¦å†™æˆ <code>&lt;img /&gt;</code>ï¼Œè€Œåƒ <code>&lt;li&gt;oranges</code> è¿™æ ·åªæœ‰å¼€å§‹æ ‡ç­¾çš„å…ƒç´ å¿…é¡»å¸¦æœ‰é—­åˆæ ‡ç­¾ï¼Œéœ€è¦æ”¹ä¸º <code>&lt;li&gt;oranges&lt;/li&gt;</code>ã€‚</p>
<p>æµ·è’‚Â·æ‹‰ç›çš„ç…§ç‰‡å’Œå¾…åŠäº‹é¡¹çš„æ ‡ç­¾ç»ä¿®æ”¹åå˜ä¸ºï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/yXOvdOSs.jpg&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">alt</span>=<span class="string">&quot;Hedy Lamarr&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;photo&quot;</span></span></span><br><span class="line"><span class="tag">   /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>å‘æ˜ä¸€ç§æ–°å¼äº¤é€šä¿¡å·ç¯<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ’ç»ƒä¸€ä¸ªç”µå½±åœºæ™¯<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ”¹è¿›é¢‘è°±æŠ€æœ¯<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span><span class="tag">&lt;&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/yXOvdOSs.jpg&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">alt</span>=<span class="string">&quot;Hedy Lamarr&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;photo&quot;</span></span></span><br><span class="line"><span class="tag">   /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>å‘æ˜ä¸€ç§æ–°å¼äº¤é€šä¿¡å·ç¯<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ’ç»ƒä¸€ä¸ªç”µå½±åœºæ™¯<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ”¹è¿›é¢‘è°±æŠ€æœ¯<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/&gt;</span></span><br><span class="line"><span class="tag">&lt;/&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-3-ä½¿ç”¨é©¼å³°å¼å‘½åæ³•"><a href="#2-2-2-3-ä½¿ç”¨é©¼å³°å¼å‘½åæ³•" class="headerlink" title="2.2.2.3 ä½¿ç”¨é©¼å³°å¼å‘½åæ³•"></a>2.2.2.3 ä½¿ç”¨é©¼å³°å¼å‘½åæ³•</h4><p>JSX æœ€ç»ˆä¼šè¢«è½¬åŒ–ä¸º JavaScriptï¼Œè€Œ JSX ä¸­çš„å±æ€§ä¹Ÿä¼šå˜æˆ JavaScript å¯¹è±¡ä¸­çš„é”®å€¼å¯¹ã€‚åœ¨ä½ è‡ªå·±çš„ç»„ä»¶ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦ç”¨å˜é‡çš„æ–¹å¼è¯»å–è¿™äº›å±æ€§çš„æ—¶å€™ã€‚ä½† JavaScript å¯¹å˜é‡çš„å‘½åæœ‰é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œå˜é‡åç§°ä¸èƒ½åŒ…å« <code>-</code> ç¬¦å·æˆ–è€…åƒ <code>class</code> è¿™æ ·çš„ä¿ç•™å­—ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ React ä¸­ï¼Œå¤§éƒ¨åˆ† HTML å’Œ SVG å±æ€§éƒ½ç”¨é©¼å³°å¼å‘½åæ³•è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œéœ€è¦ç”¨ <code>strokeWidth</code> ä»£æ›¿ <code>stroke-width</code>ã€‚ç”±äº <code>class</code> æ˜¯ä¸€ä¸ªä¿ç•™å­—ï¼Œæ‰€ä»¥åœ¨ React ä¸­éœ€è¦ç”¨ <code>className</code> æ¥ä»£æ›¿ã€‚è¿™ä¹Ÿæ˜¯ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/className">DOM å±æ€§ä¸­çš„å‘½å</a>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/yXOvdOSs.jpg&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">alt</span>=<span class="string">&quot;Hedy Lamarr&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">className</span>=<span class="string">&quot;photo&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react-dom/components/common">åœ¨ React DOM å…ƒç´ ä¸­æ‰¾åˆ°æ‰€æœ‰å¯¹åº”çš„å±æ€§</a>ã€‚å¦‚æœä½ åœ¨ç¼–å†™å±æ€§æ—¶å‘ç”Ÿäº†é”™è¯¯ï¼Œä¸ç”¨æ‹…å¿ƒ â€”â€” React ä¼šåœ¨ <a target="_blank" rel="noopener" href="https://firefox-source-docs.mozilla.org/devtools-user/browser_console/index.html">æµè§ˆå™¨æ§åˆ¶å°</a> ä¸­æ‰“å°ä¸€æ¡å¯èƒ½çš„æ›´æ­£ä¿¡æ¯ã€‚</p>
<blockquote>
<p>ç”±äºå†å²åŸå› ï¼Œ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/Accessibility/ARIA"><code>aria-*</code></a> å’Œ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Learn/HTML/Howto/Use_data_attributes"><code>data-*</code></a> å±æ€§æ˜¯ä»¥å¸¦ <code>-</code> ç¬¦å·çš„ HTML æ ¼å¼ä¹¦å†™çš„ã€‚</p>
</blockquote>
<h3 id="2-2-3-å°†-HTML-è½¬åŒ–ä¸º-JSX"><a href="#2-2-3-å°†-HTML-è½¬åŒ–ä¸º-JSX" class="headerlink" title="2.2.3 å°† HTML è½¬åŒ–ä¸º JSX"></a>2.2.3 å°† HTML è½¬åŒ–ä¸º JSX</h3><p>å‡è®¾ä½ ç°åœ¨æœ‰ä¸€äº›ï¼ˆå®Œå…¨æœ‰æ•ˆçš„ï¼‰HTML æ ‡ç­¾ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ·è’‚Â·æ‹‰ç›çš„å¾…åŠäº‹é¡¹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/yXOvdOSs.jpg&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">alt</span>=<span class="string">&quot;Hedy Lamarr&quot;</span> </span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;photo&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>å‘æ˜ä¸€ç§æ–°å¼äº¤é€šä¿¡å·ç¯</span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ’ç»ƒä¸€ä¸ªç”µå½±åœºæ™¯</span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ”¹è¿›é¢‘è°±æŠ€æœ¯</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è€Œç°åœ¨æƒ³è¦æŠŠè¿™äº›æ ‡ç­¾è¿ç§»åˆ°ç»„ä»¶ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">// ???</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç›´æ¥å¤åˆ¶åˆ°ç»„ä»¶ä¸­ï¼Œå¹¶ä¸èƒ½æ­£å¸¸å·¥ä½œï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="comment">// è¿™ä¸èµ·ä½œç”¨ï¼</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ·è’‚Â·æ‹‰ç›çš„å¾…åŠäº‹é¡¹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &lt;img </span><br><span class="line">      src=&quot;https://i.imgur.com/yXOvdOSs.jpg&quot; </span><br><span class="line">      alt=&quot;Hedy Lamarr&quot; </span><br><span class="line">      class=&quot;photo&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;å‘æ˜ä¸€ç§æ–°å¼äº¤é€šä¿¡å·ç¯</span><br><span class="line">      &lt;li&gt;æ’ç»ƒä¸€ä¸ªç”µå½±åœºæ™¯</span><br><span class="line">      &lt;li&gt;æ”¹è¿›é¢‘è°±æŠ€æœ¯</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å› ä¸º JSX è¯­æ³•æ›´åŠ ä¸¥æ ¼å¹¶ä¸”ç›¸æ¯” HTML æœ‰æ›´å¤šçš„è§„åˆ™ï¼ä¸Šé¢çš„é”™è¯¯æç¤ºå¯ä»¥å¸®åŠ©ä½ ä¿®å¤æ ‡ç­¾ä¸­çš„é”™è¯¯ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å‚è€ƒä¸‹é¢çš„æŒ‡å¼•ã€‚</p>
<blockquote>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒReact åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„é”™è¯¯æç¤ºå°±èƒ½å¸®ä½ æ‰¾åˆ°é—®é¢˜æ‰€åœ¨ï¼Œå¦‚æœåœ¨ç¼–å†™è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜å°±å‚è€ƒä¸€ä¸‹æç¤ºå§ã€‚</p>
</blockquote>
<p>å°†ç°æœ‰çš„ HTML ä¸­çš„æ‰€æœ‰å±æ€§è½¬åŒ– JSX çš„æ ¼å¼æ˜¯å¾ˆç¹ççš„ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://transform.tools/html-to-jsx">è½¬åŒ–å™¨</a> å°† HTML å’Œ SVG æ ‡ç­¾è½¬åŒ–ä¸º JSXã€‚è¿™ç§è½¬åŒ–å™¨åœ¨å®è·µä¸­éå¸¸æœ‰ç”¨ã€‚ä½†æˆ‘ä»¬ä¾ç„¶æœ‰å¿…è¦å»äº†è§£è¿™ç§è½¬åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç¼–å†™è‡ªå·±çš„ JSX äº†ã€‚</p>
<p>è¿™æ˜¯æœ€ç»ˆçš„ç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æµ·è’‚Â·æ‹‰ç›çš„å¾…åŠäº‹é¡¹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/yXOvdOSs.jpg&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&quot;Hedy Lamarr&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&quot;photo&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å‘æ˜ä¸€ç§æ–°å¼äº¤é€šä¿¡å·ç¯<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ’ç»ƒä¸€ä¸ªç”µå½±åœºæ™¯<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ”¹è¿›é¢‘è°±æŠ€æœ¯<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-4-åœ¨-JSX-ä¸­é€šè¿‡å¤§æ‹¬å·ä½¿ç”¨-JavaScript"><a href="#2-2-4-åœ¨-JSX-ä¸­é€šè¿‡å¤§æ‹¬å·ä½¿ç”¨-JavaScript" class="headerlink" title="2.2.4 åœ¨ JSX ä¸­é€šè¿‡å¤§æ‹¬å·ä½¿ç”¨ JavaScript"></a>2.2.4 åœ¨ JSX ä¸­é€šè¿‡å¤§æ‹¬å·ä½¿ç”¨ JavaScript</h3><p>JSX å…è®¸ä½ åœ¨ JavaScript ä¸­ç¼–å†™ç±»ä¼¼ HTML çš„æ ‡ç­¾ï¼Œä»è€Œä½¿æ¸²æŸ“çš„é€»è¾‘å’Œå†…å®¹å¯ä»¥å†™åœ¨ä¸€èµ·ã€‚</p>
<p>æœ‰æ—¶å€™ï¼Œä½ å¯èƒ½æƒ³è¦åœ¨æ ‡ç­¾ä¸­æ·»åŠ ä¸€äº› JavaScript é€»è¾‘æˆ–è€…å¼•ç”¨åŠ¨æ€çš„å±æ€§ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥åœ¨ JSX çš„å¤§æ‹¬å·å†…æ¥ç¼–å†™ JavaScriptã€‚</p>
<h4 id="2-2-4-1-ä½¿ç”¨å¼•å·ä¼ é€’å­—ç¬¦ä¸²"><a href="#2-2-4-1-ä½¿ç”¨å¼•å·ä¼ é€’å­—ç¬¦ä¸²" class="headerlink" title="2.2.4.1 ä½¿ç”¨å¼•å·ä¼ é€’å­—ç¬¦ä¸²"></a>2.2.4.1 ä½¿ç”¨å¼•å·ä¼ é€’å­—ç¬¦ä¸²</h4><p>å½“ä½ æƒ³æŠŠä¸€ä¸ªå­—ç¬¦ä¸²å±æ€§ä¼ é€’ç»™ JSX æ—¶ï¼ŒæŠŠå®ƒæ”¾åˆ°å•å¼•å·æˆ–åŒå¼•å·ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Avatar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;avatar&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/7vQD0fPs.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;Gregorio Y. Zara&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„ <code>&quot;https://i.imgur.com/7vQD0fPs.jpg&quot;</code> å’Œ <code>&quot;Gregorio Y. Zara&quot;</code> å°±æ˜¯è¢«ä½œä¸ºå­—ç¬¦ä¸²ä¼ é€’çš„ã€‚</p>
<p>ä½†æ˜¯å¦‚æœä½ æƒ³è¦åŠ¨æ€åœ°æŒ‡å®š <code>src</code> æˆ– <code>alt</code> çš„å€¼å‘¢ï¼Ÿä½ å¯ä»¥ <strong>ç”¨ <code>&#123;</code> å’Œ <code>&#125;</code> æ›¿ä»£ <code>&quot;</code> å’Œ <code>&quot;</code> ä»¥ä½¿ç”¨ JavaScript å˜é‡</strong> ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Avatar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> avatar = <span class="string">&#x27;https://i.imgur.com/7vQD0fPs.jpg&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> description = <span class="string">&#x27;Gregorio Y. Zara&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;avatar&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&#123;avatar&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&#123;description&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ <code>className=&quot;avatar&quot;</code> å’Œ <code>src=&#123;avatar&#125;</code> ä¹‹é—´çš„åŒºåˆ«ï¼Œ<code>className=&quot;avatar&quot;</code> æŒ‡å®šäº†ä¸€ä¸ªå°±å« <code>&quot;avatar&quot;</code> çš„ä½¿å›¾ç‰‡åœ¨æ ·å¼ä¸Šå˜åœ†çš„ CSS ç±»åï¼Œè€Œ <code>src=&#123;avatar&#125;</code> è¿™ç§å†™æ³•ä¼šå»è¯»å– JavaScript ä¸­ <code>avatar</code> è¿™ä¸ªå˜é‡çš„å€¼ã€‚è¿™æ˜¯å› ä¸ºå¤§æ‹¬å·å¯ä»¥ä½¿ä½ ç›´æ¥åœ¨æ ‡ç­¾ä¸­ä½¿ç”¨ JavaScriptï¼</p>
<h4 id="2-2-4-2-ä½¿ç”¨å¤§æ‹¬å·ï¼šä¸€æ‰‡è¿›å…¥-JavaScript-ä¸–ç•Œçš„çª—æˆ·"><a href="#2-2-4-2-ä½¿ç”¨å¤§æ‹¬å·ï¼šä¸€æ‰‡è¿›å…¥-JavaScript-ä¸–ç•Œçš„çª—æˆ·" class="headerlink" title="2.2.4.2 ä½¿ç”¨å¤§æ‹¬å·ï¼šä¸€æ‰‡è¿›å…¥ JavaScript ä¸–ç•Œçš„çª—æˆ·"></a>2.2.4.2 ä½¿ç”¨å¤§æ‹¬å·ï¼šä¸€æ‰‡è¿›å…¥ JavaScript ä¸–ç•Œçš„çª—æˆ·</h4><p>JSX æ˜¯ä¸€ç§ç¼–å†™ JavaScript çš„ç‰¹æ®Šæ–¹å¼ã€‚è¿™ä¸ºåœ¨å¤§æ‹¬å· <code>&#123; &#125;</code> ä¸­ä½¿ç”¨ JavaScript å¸¦æ¥äº†å¯èƒ½ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä¸­å£°æ˜äº†ç§‘å­¦å®¶çš„åå­—ï¼Œ<code>name</code>ï¼Œç„¶ååœ¨ <code>&lt;h1&gt;</code> åçš„å¤§æ‹¬å·å†…åµŒå…¥å®ƒï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> name = <span class="string">&#x27;Gregorio Y. Zara&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;name&#125;&#x27;s To Do List<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯•ç€å°† <code>name</code> çš„å€¼ä» <code>&#39;Gregorio Y. Zara&#39;</code> æ›´æ”¹æˆ <code>&#39;Hedy Lamarr&#39;</code>ã€‚çœ‹çœ‹è¿™ä¸ª To Do List çš„æ ‡é¢˜å°†å¦‚ä½•å˜åŒ–ï¼Ÿ</p>
<p>å¤§æ‹¬å·å†…çš„ä»»ä½• JavaScript è¡¨è¾¾å¼éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼ŒåŒ…æ‹¬åƒ <code>formatDate()</code> è¿™æ ·çš„å‡½æ•°è°ƒç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> today = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatDate</span>(<span class="params">date</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Intl</span>.<span class="title class_">DateTimeFormat</span>(</span><br><span class="line">    <span class="string">&#x27;zh-CN&#x27;</span>,</span><br><span class="line">    &#123; <span class="attr">weekday</span>: <span class="string">&#x27;long&#x27;</span> &#125;</span><br><span class="line">  ).<span class="title function_">format</span>(date);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>To Do List for &#123;formatDate(today)&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ JSX ä¸­ï¼Œåªèƒ½åœ¨ä»¥ä¸‹ä¸¤ç§åœºæ™¯ä¸­ä½¿ç”¨å¤§æ‹¬å·ï¼š</p>
<ol>
<li>ç”¨ä½œ JSX æ ‡ç­¾å†…çš„<strong>æ–‡æœ¬</strong>ï¼š<code>&lt;h1&gt;&#123;name&#125;&#39;s To Do List&lt;/h1&gt;</code> æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯ <code>&lt;&#123;tag&#125;&gt;Gregorio Y. Zara&#39;s To Do List&lt;/&#123;tag&#125;&gt;</code> æ— æ•ˆã€‚</li>
<li>ç”¨ä½œç´§è·Ÿåœ¨ <code>=</code> ç¬¦å·åçš„ <strong>å±æ€§</strong>ï¼š<code>src=&#123;avatar&#125;</code> ä¼šè¯»å– <code>avatar</code> å˜é‡ï¼Œä½†æ˜¯ <code>src=&quot;&#123;avatar&#125;&quot;</code> åªä¼šä¼ ä¸€ä¸ªå­—ç¬¦ä¸² <code>&#123;avatar&#125;</code>ã€‚</li>
</ol>
<h4 id="2-2-4-3-ä½¿ç”¨-â€œåŒå¤§æ‹¬å·â€ï¼šJSX-ä¸­çš„-CSS-å’Œ-å¯¹è±¡"><a href="#2-2-4-3-ä½¿ç”¨-â€œåŒå¤§æ‹¬å·â€ï¼šJSX-ä¸­çš„-CSS-å’Œ-å¯¹è±¡" class="headerlink" title="2.2.4.3 ä½¿ç”¨ â€œåŒå¤§æ‹¬å·â€ï¼šJSX ä¸­çš„ CSS å’Œ å¯¹è±¡"></a>2.2.4.3 ä½¿ç”¨ â€œåŒå¤§æ‹¬å·â€ï¼šJSX ä¸­çš„ CSS å’Œ å¯¹è±¡</h4><p>é™¤äº†å­—ç¬¦ä¸²ã€æ•°å­—å’Œå…¶å®ƒ JavaScript è¡¨è¾¾å¼ï¼Œä½ ç”šè‡³å¯ä»¥åœ¨ JSX ä¸­ä¼ é€’å¯¹è±¡ã€‚å¯¹è±¡ä¹Ÿç”¨å¤§æ‹¬å·è¡¨ç¤ºï¼Œä¾‹å¦‚ <code>&#123; name: &quot;Hedy Lamarr&quot;, inventions: 5 &#125;</code>ã€‚å› æ­¤ï¼Œä¸ºäº†èƒ½åœ¨ JSX ä¸­ä¼ é€’ï¼Œä½ å¿…é¡»ç”¨å¦ä¸€å¯¹é¢å¤–çš„å¤§æ‹¬å·åŒ…è£¹å¯¹è±¡ï¼š<code>person=&#123;&#123; name: "Hedy Lamarr", inventions: 5 &#125;&#125;</code>ã€‚</p>
<p>ä½ å¯èƒ½åœ¨ JSX çš„å†…è” CSS æ ·å¼ä¸­å°±å·²ç»è§è¿‡è¿™ç§å†™æ³•äº†ã€‚React ä¸è¦æ±‚ä½ ä½¿ç”¨å†…è”æ ·å¼ï¼ˆä½¿ç”¨ CSS ç±»å°±èƒ½æ»¡è¶³å¤§éƒ¨åˆ†æƒ…å†µï¼‰ã€‚ä½†æ˜¯å½“ä½ éœ€è¦å†…è”æ ·å¼çš„æ—¶å€™ï¼Œä½ å¯ä»¥ç»™ <code>style</code> å±æ€§ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">style</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#123;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">       <span class="attr">backgroundColor:</span> &#x27;<span class="attr">black</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">     <span class="attr">color:</span> &#x27;<span class="attr">pink</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Improve the videophone<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Prepare aeronautics lectures<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Work on the alcohol-fuelled engine<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥å½“ä½ ä¸‹æ¬¡åœ¨ JSX ä¸­çœ‹åˆ° <code>&#123;&#123;` å’Œ `&#125;&#125;</code>æ—¶ï¼Œå°±çŸ¥é“å®ƒåªä¸è¿‡æ˜¯åŒ…åœ¨å¤§æ‹¬å·é‡Œçš„ä¸€ä¸ªå¯¹è±¡ç½¢äº†ï¼</p>
<blockquote>
<p>å†…è” <code>style</code> å±æ€§ ä½¿ç”¨é©¼å³°å‘½åæ³•ç¼–å†™ã€‚ä¾‹å¦‚ï¼ŒHTML <code>&lt;ul style=&quot;background-color: black&quot;&gt;</code> åœ¨ä½ çš„ç»„ä»¶é‡Œåº”è¯¥å†™æˆ <code>&lt;ul style=&#123;&#123; backgroundColor: 'black' &#125;&#125;&gt;</code>ã€‚</p>
</blockquote>
<h4 id="2-2-4-4-JavaScript-å¯¹è±¡å’Œå¤§æ‹¬å·çš„æ›´å¤šå¯èƒ½"><a href="#2-2-4-4-JavaScript-å¯¹è±¡å’Œå¤§æ‹¬å·çš„æ›´å¤šå¯èƒ½" class="headerlink" title="2.2.4.4 JavaScript å¯¹è±¡å’Œå¤§æ‹¬å·çš„æ›´å¤šå¯èƒ½"></a>2.2.4.4 JavaScript å¯¹è±¡å’Œå¤§æ‹¬å·çš„æ›´å¤šå¯èƒ½</h4><p>ä½ å¯ä»¥å°†å¤šä¸ªè¡¨è¾¾å¼åˆå¹¶åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œåœ¨ JSX çš„å¤§æ‹¬å·å†…åˆ†åˆ«ä½¿ç”¨å®ƒä»¬ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Gregorio Y. Zara&#x27;</span>,</span><br><span class="line">  <span class="attr">theme</span>: &#123;</span><br><span class="line">    <span class="attr">backgroundColor</span>: <span class="string">&#x27;black&#x27;</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&#x27;pink&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;person.theme&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;person.name&#125;&#x27;s Todos<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&quot;avatar&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/7vQD0fPs.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&quot;Gregorio Y. Zara&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Improve the videophone<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Prepare aeronautics lectures<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Work on the alcohol-fuelled engine<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ å‡ ä¹äº†è§£äº†æœ‰å…³ JSX çš„ä¸€åˆ‡ï¼š</p>
<ul>
<li>JSX å¼•å·å†…çš„å€¼ä¼šä½œä¸ºå­—ç¬¦ä¸²ä¼ é€’ç»™å±æ€§ã€‚</li>
<li>å¤§æ‹¬å·è®©ä½ å¯ä»¥å°† JavaScript çš„é€»è¾‘å’Œå˜é‡å¸¦å…¥åˆ°æ ‡ç­¾ä¸­ã€‚</li>
<li>å®ƒä»¬ä¼šåœ¨ JSX æ ‡ç­¾ä¸­çš„å†…å®¹åŒºåŸŸæˆ–ç´§éšå±æ€§çš„ <code>=</code> åèµ·ä½œç”¨ã€‚</li>
<li><code>&#123;&#123;` å’Œ `&#125;&#125;</code> å¹¶ä¸æ˜¯ä»€ä¹ˆç‰¹æ®Šçš„è¯­æ³•ï¼šå®ƒåªæ˜¯åŒ…åœ¨ JSX å¤§æ‹¬å·å†…çš„ JavaScript å¯¹è±¡ã€‚</li>
</ul>
<h2 id="2-3-çˆ¶å­ç»„ä»¶å±æ€§ä¼ é€’"><a href="#2-3-çˆ¶å­ç»„ä»¶å±æ€§ä¼ é€’" class="headerlink" title="2.3 çˆ¶å­ç»„ä»¶å±æ€§ä¼ é€’"></a>2.3 çˆ¶å­ç»„ä»¶å±æ€§ä¼ é€’</h2><p>React ç»„ä»¶ä½¿ç”¨ <em>props</em> æ¥äº’ç›¸é€šä¿¡ã€‚æ¯ä¸ªçˆ¶ç»„ä»¶éƒ½å¯ä»¥æä¾› props ç»™å®ƒçš„å­ç»„ä»¶ï¼Œä»è€Œå°†ä¸€äº›ä¿¡æ¯ä¼ é€’ç»™å®ƒã€‚Props å¯èƒ½ä¼šè®©ä½ æƒ³èµ· HTML å±æ€§ï¼Œä½†ä½ å¯ä»¥é€šè¿‡å®ƒä»¬ä¼ é€’ä»»ä½• JavaScript å€¼ï¼ŒåŒ…æ‹¬å¯¹è±¡ã€æ•°ç»„å’Œå‡½æ•°ã€‚</p>
<h3 id="2-3-1-ç®€ä»‹"><a href="#2-3-1-ç®€ä»‹" class="headerlink" title="2.3.1 ç®€ä»‹"></a>2.3.1 ç®€ä»‹</h3><p>Props æ˜¯ä½ ä¼ é€’ç»™ JSX æ ‡ç­¾çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ<code>className</code>ã€<code>src</code>ã€<code>alt</code>ã€<code>width</code> å’Œ <code>height</code> ä¾¿æ˜¯ä¸€äº›å¯ä»¥ä¼ é€’ç»™ <code>&lt;img&gt;</code> çš„ propsï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Avatar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;avatar&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/1bX5QH6.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;Lin Lanying&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&#123;100&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">height</span>=<span class="string">&#123;100&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Avatar</span> /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥ä¼ é€’ç»™ <code>&lt;img&gt;</code> æ ‡ç­¾çš„ props æ˜¯é¢„å®šä¹‰çš„ï¼ˆReactDOM ç¬¦åˆ <a target="_blank" rel="noopener" href="https://www.w3.org/TR/html52/semantics-embedded-content.html#the-img-element">HTML æ ‡å‡†</a>ï¼‰ã€‚ä½†æ˜¯ä½ å¯ä»¥å°†ä»»ä½• props ä¼ é€’ç»™ <strong>ä½ è‡ªå·±çš„</strong> ç»„ä»¶ï¼Œä¾‹å¦‚ <code>&lt;Avatar&gt;</code> ï¼Œä»¥ä¾¿è‡ªå®šä¹‰å®ƒä»¬ã€‚</p>
<h3 id="2-3-2-å‘ç»„ä»¶ä¼ é€’-props"><a href="#2-3-2-å‘ç»„ä»¶ä¼ é€’-props" class="headerlink" title="2.3.2 å‘ç»„ä»¶ä¼ é€’ props"></a>2.3.2 å‘ç»„ä»¶ä¼ é€’ props</h3><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ <code>Profile</code> ç»„ä»¶æ²¡æœ‰å‘å®ƒçš„å­ç»„ä»¶ <code>Avatar</code> ä¼ é€’ä»»ä½• props ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Avatar</span> /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥åˆ†ä¸¤æ­¥ç»™ <code>Avatar</code> ä¸€äº› propsã€‚</p>
<p><strong>æ­¥éª¤ä¸€ï¼šå°† props ä¼ é€’ç»™å­ç»„ä»¶</strong></p>
<p>é¦–å…ˆï¼Œå°†ä¸€äº› props ä¼ é€’ç»™ <code>Avatar</code>ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä¼ é€’ä¸¤ä¸ª propsï¼š<code>person</code>ï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰å’Œ <code>size</code>ï¼ˆä¸€ä¸ªæ•°å­—ï¼‰ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Avatar</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">person</span>=<span class="string">&#123;&#123;</span> <span class="attr">name:</span> &#x27;<span class="attr">Lin</span> <span class="attr">Lanying</span>&#x27;, <span class="attr">imageId:</span> &#x27;<span class="attr">1bX5QH6</span>&#x27; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">size</span>=<span class="string">&#123;100&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨ <code>Avatar</code> ç»„ä»¶ä¸­è¯»å–è¿™äº› props äº†ã€‚</p>
<p><strong>æ­¥éª¤äºŒï¼šåœ¨å­ç»„ä»¶ä¸­è¯»å– props</strong></p>
<p>ä½ å¯ä»¥é€šè¿‡åœ¨ <code>function Avatar</code> ä¹‹åç›´æ¥åˆ—å‡ºå®ƒä»¬çš„åå­— <code>person, size</code> æ¥è¯»å–è¿™äº› propsã€‚è¿™äº› props åœ¨ <code>(&#123;</code> å’Œ <code>&#125;)</code> ä¹‹é—´ï¼Œå¹¶ç”±é€—å·åˆ†éš”ã€‚è¿™æ ·ï¼Œä½ å¯ä»¥åœ¨ <code>Avatar</code> çš„ä»£ç ä¸­ä½¿ç”¨å®ƒä»¬ï¼Œå°±åƒä½¿ç”¨å˜é‡ä¸€æ ·ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Avatar</span>(<span class="params">&#123; person, size &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// åœ¨è¿™é‡Œ person å’Œ size æ˜¯å¯è®¿é—®çš„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‘ä½¿ç”¨ <code>person</code> å’Œ <code>size</code> props æ¸²æŸ“çš„ <code>Avatar</code> æ·»åŠ ä¸€äº›é€»è¾‘ï¼Œä½ å°±å®Œæˆäº†ã€‚</p>
<p>ç°åœ¨ä½ å¯ä»¥é…ç½® <code>Avatar</code> ï¼Œé€šè¿‡ä¸åŒçš„ propsï¼Œä½¿å®ƒèƒ½ä»¥å¤šç§ä¸åŒçš„æ–¹å¼è¿›è¡Œæ¸²æŸ“ã€‚å°è¯•å˜æ¢å€¼å§ï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getImageUrl</span>(<span class="params">person, size = <span class="string">&#x27;s&#x27;</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="string">&#x27;https://i.imgur.com/&#x27;</span> +</span><br><span class="line">    person.<span class="property">imageId</span> +</span><br><span class="line">    size +</span><br><span class="line">    <span class="string">&#x27;.jpg&#x27;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getImageUrl &#125; <span class="keyword">from</span> <span class="string">&#x27;./utils.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Avatar</span>(<span class="params">&#123; person, size &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;avatar&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&#123;getImageUrl(person)&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&#123;person.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&#123;size&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">height</span>=<span class="string">&#123;size&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Avatar</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">size</span>=<span class="string">&#123;100&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">person</span>=<span class="string">&#123;&#123;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name:</span> &#x27;<span class="attr">Katsuko</span> <span class="attr">Saruhashi</span>&#x27;, </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">imageId:</span> &#x27;<span class="attr">YfeOqp2</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Avatar</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">size</span>=<span class="string">&#123;80&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">person</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name:</span> &#x27;<span class="attr">Aklilu</span> <span class="attr">Lemma</span>&#x27;, </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">imageId:</span> &#x27;<span class="attr">OKS67lh</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Props ä½¿ä½ ç‹¬ç«‹æ€è€ƒçˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ”¹å˜ <code>Profile</code> ä¸­çš„ <code>person</code> æˆ– <code>size</code> propsï¼Œè€Œæ— éœ€è€ƒè™‘ <code>Avatar</code> å¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚ åŒæ ·ï¼Œä½ å¯ä»¥æ”¹å˜ <code>Avatar</code> ä½¿ç”¨è¿™äº› props çš„æ–¹å¼ï¼Œä¸å¿…è€ƒè™‘ <code>Profile</code>ã€‚</p>
<p>ä½ å¯ä»¥å°† props æƒ³è±¡æˆå¯ä»¥è°ƒæ•´çš„â€œæ—‹é’®â€ã€‚å®ƒä»¬çš„ä½œç”¨ä¸å‡½æ•°çš„å‚æ•°ç›¸åŒ â€”â€” äº‹å®ä¸Šï¼Œprops <strong>æ­£æ˜¯</strong> ç»„ä»¶çš„å”¯ä¸€å‚æ•°ï¼ React ç»„ä»¶å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä¸€ä¸ª <code>props</code> å¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Avatar</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> person = props.<span class="property">person</span>;</span><br><span class="line">  <span class="keyword">let</span> size = props.<span class="property">size</span>;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸ä½ ä¸éœ€è¦æ•´ä¸ª <code>props</code> å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥å°†å®ƒ<a target="_blank" rel="noopener" href="https://lianyutian.github.io/2023/12/08/2023-12-08-JavaScrpit%E8%BF%9B%E9%98%B6/#2-5-%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC">è§£æ„</a>ä¸ºå•ç‹¬çš„ propsã€‚</p>
<blockquote>
<p>åœ¨å£°æ˜ props æ—¶ï¼Œ <strong>ä¸è¦å¿˜è®° <code>(</code> å’Œ <code>)</code> ä¹‹é—´çš„ä¸€å¯¹èŠ±æ‹¬å· <code>&#123;</code> å’Œ <code>&#125;</code></strong>  ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Avatar</span>(<span class="params">&#123; person, size &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§è¯­æ³•è¢«ç§°ä¸º â€œè§£æ„â€ï¼Œç­‰ä»·äºäºä»å‡½æ•°å‚æ•°ä¸­è¯»å–å±æ€§ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Avatar</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> person = props.<span class="property">person</span>;</span><br><span class="line">  <span class="keyword">let</span> size = props.<span class="property">size</span>;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-3-3-ç»™-prop-æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼"><a href="#2-3-3-ç»™-prop-æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼" class="headerlink" title="2.3.3 ç»™ prop æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼"></a>2.3.3 ç»™ prop æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼</h3><p>å¦‚æœä½ æƒ³åœ¨æ²¡æœ‰æŒ‡å®šå€¼çš„æƒ…å†µä¸‹ç»™ prop ä¸€ä¸ªé»˜è®¤å€¼ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨å‚æ•°åé¢å†™ <code>=</code> å’Œé»˜è®¤å€¼æ¥è¿›è¡Œè§£æ„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Avatar</span>(<span class="params">&#123; person, size = <span class="number">100</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œ å¦‚æœ <code>&lt;Avatar person=&#123;...&#125; /&gt;</code> æ¸²æŸ“æ—¶æ²¡æœ‰ <code>size</code> propï¼Œ  <code>size</code> å°†è¢«èµ‹å€¼ä¸º <code>100</code>ã€‚</p>
<p>é»˜è®¤å€¼ä»…åœ¨ç¼ºå°‘ <code>size</code> prop æˆ– <code>size=&#123;undefined&#125;</code> æ—¶ç”Ÿæ•ˆã€‚ ä½†æ˜¯å¦‚æœä½ ä¼ é€’äº† <code>size=&#123;null&#125;</code> æˆ– <code>size=&#123;0&#125;</code>ï¼Œé»˜è®¤å€¼å°† <strong>ä¸</strong> è¢«ä½¿ç”¨ã€‚</p>
<h3 id="2-3-4-ä½¿ç”¨-JSX-å±•å¼€è¯­æ³•ä¼ é€’-props"><a href="#2-3-4-ä½¿ç”¨-JSX-å±•å¼€è¯­æ³•ä¼ é€’-props" class="headerlink" title="2.3.4 ä½¿ç”¨ JSX å±•å¼€è¯­æ³•ä¼ é€’ props"></a>2.3.4 ä½¿ç”¨ JSX å±•å¼€è¯­æ³•ä¼ é€’ props</h3><p>æœ‰æ—¶å€™ï¼Œä¼ é€’ props ä¼šå˜å¾—éå¸¸é‡å¤ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params">&#123; person, size, isSepia, thickBorder &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Avatar</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">person</span>=<span class="string">&#123;person&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">size</span>=<span class="string">&#123;size&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">isSepia</span>=<span class="string">&#123;isSepia&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">thickBorder</span>=<span class="string">&#123;thickBorder&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¤ä»£ç æ²¡æœ‰é”™ï¼ˆå®ƒå¯ä»¥æ›´æ¸…æ™°ï¼‰ã€‚ä½†æœ‰æ—¶ä½ å¯èƒ½ä¼šé‡è§†ç®€æ´ã€‚ä¸€äº›ç»„ä»¶å°†å®ƒä»¬æ‰€æœ‰çš„ props è½¬å‘ç»™å­ç»„ä»¶ï¼Œæ­£å¦‚ <code>Profile</code> è½¬ç»™ <code>Avatar</code> é‚£æ ·ã€‚å› ä¸ºè¿™äº›ç»„ä»¶ä¸ç›´æ¥ä½¿ç”¨ä»–ä»¬æœ¬èº«çš„ä»»ä½• propsï¼Œæ‰€ä»¥ä½¿ç”¨æ›´ç®€æ´çš„â€œ<a target="_blank" rel="noopener" href="https://lianyutian.github.io/2023/12/08/2023-12-08-JavaScrpit%E8%BF%9B%E9%98%B6/#2-3-%E5%B1%95%E5%BC%80%E8%BF%90%E7%AE%97%E7%AC%A6">å±•å¼€</a>â€è¯­æ³•æ˜¯æœ‰æ„ä¹‰çš„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Avatar</span> &#123;<span class="attr">...props</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¼šå°† <code>Profile</code> çš„æ‰€æœ‰ props è½¬å‘åˆ° <code>Avatar</code>ï¼Œè€Œä¸åˆ—å‡ºæ¯ä¸ªåå­—ã€‚</p>
<p><strong>è¯·å…‹åˆ¶åœ°ä½¿ç”¨å±•å¼€è¯­æ³•ã€‚</strong> å¦‚æœä½ åœ¨æ‰€æœ‰å…¶ä»–ç»„ä»¶ä¸­éƒ½ä½¿ç”¨å®ƒï¼Œé‚£å°±æœ‰é—®é¢˜äº†ã€‚ é€šå¸¸ï¼Œå®ƒè¡¨ç¤ºä½ åº”è¯¥æ‹†åˆ†ç»„ä»¶ï¼Œå¹¶å°†å­ç»„ä»¶ä½œä¸º JSX ä¼ é€’ã€‚</p>
<h3 id="2-3-5-å°†-JSX-ä½œä¸ºå­ç»„ä»¶ä¼ é€’"><a href="#2-3-5-å°†-JSX-ä½œä¸ºå­ç»„ä»¶ä¼ é€’" class="headerlink" title="2.3.5 å°† JSX ä½œä¸ºå­ç»„ä»¶ä¼ é€’"></a>2.3.5 å°† JSX ä½œä¸ºå­ç»„ä»¶ä¼ é€’</h3><p>åµŒå¥—æµè§ˆå™¨å†…ç½®æ ‡ç­¾æ˜¯å¾ˆå¸¸è§çš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æœ‰æ—¶ä½ ä¼šå¸Œæœ›ä»¥ç›¸åŒçš„æ–¹å¼åµŒå¥—è‡ªå·±çš„ç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Card</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Avatar</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Card</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å½“å°†å†…å®¹åµŒå¥—åœ¨ JSX æ ‡ç­¾ä¸­æ—¶ï¼Œçˆ¶ç»„ä»¶å°†åœ¨åä¸º <code>children</code> çš„ prop ä¸­æ¥æ”¶åˆ°è¯¥å†…å®¹ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ <code>Card</code> ç»„ä»¶å°†æ¥æ”¶ä¸€ä¸ªè¢«è®¾ä¸º <code>&lt;Avatar /&gt;</code> çš„ <code>children</code> prop å¹¶å°†å…¶åŒ…è£¹åœ¨ div ä¸­æ¸²æŸ“ï¼š</p>
<p><code>App.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Avatar</span> <span class="keyword">from</span> <span class="string">&#x27;./Avatar.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Card</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Profile</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Card</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Avatar</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">size</span>=<span class="string">&#123;100&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">person</span>=<span class="string">&#123;&#123;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name:</span> &#x27;<span class="attr">Katsuko</span> <span class="attr">Saruhashi</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">imageId:</span> &#x27;<span class="attr">YfeOqp2</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Card</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Avatar.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getImageUrl &#125; <span class="keyword">from</span> <span class="string">&#x27;./utils.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Avatar</span>(<span class="params">&#123; person, size &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&quot;avatar&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&#123;getImageUrl(person)&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&#123;person.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">width</span>=<span class="string">&#123;size&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">height</span>=<span class="string">&#123;size&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>utils.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getImageUrl</span>(<span class="params">person, size = <span class="string">&#x27;s&#x27;</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="string">&#x27;https://i.imgur.com/&#x27;</span> +</span><br><span class="line">    person.<span class="property">imageId</span> +</span><br><span class="line">    size +</span><br><span class="line">    <span class="string">&#x27;.jpg&#x27;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°è¯•ç”¨ä¸€äº›æ–‡æœ¬æ›¿æ¢ <code>&lt;Card&gt;</code> ä¸­çš„ <code>&lt;Avatar&gt;</code>ï¼Œçœ‹çœ‹ <code>Card</code> ç»„ä»¶å¦‚ä½•åŒ…è£¹ä»»æ„åµŒå¥—å†…å®¹ã€‚å®ƒä¸å¿…â€œçŸ¥é“â€å…¶ä¸­æ¸²æŸ“çš„å†…å®¹ã€‚ä½ ä¼šåœ¨å¾ˆå¤šåœ°æ–¹çœ‹åˆ°è¿™ç§çµæ´»çš„æ¨¡å¼ã€‚</p>
<p>å¯ä»¥å°†å¸¦æœ‰ <code>children</code> prop çš„ç»„ä»¶çœ‹ä½œæœ‰ä¸€ä¸ªâ€œæ´â€ï¼Œå¯ä»¥ç”±å…¶çˆ¶ç»„ä»¶ä½¿ç”¨ä»»æ„ JSX æ¥â€œå¡«å……â€ã€‚ä½ ä¼šç»å¸¸ä½¿ç”¨ <code>children</code> prop æ¥è¿›è¡Œè§†è§‰åŒ…è£…ï¼šé¢æ¿ã€ç½‘æ ¼ç­‰ç­‰ã€‚</p>
<h3 id="2-3-6-Props-å¦‚ä½•éšæ—¶é—´å˜åŒ–"><a href="#2-3-6-Props-å¦‚ä½•éšæ—¶é—´å˜åŒ–" class="headerlink" title="2.3.6 Props å¦‚ä½•éšæ—¶é—´å˜åŒ–"></a>2.3.6 Props å¦‚ä½•éšæ—¶é—´å˜åŒ–</h3><p>ä¸‹é¢çš„ <code>Clock</code> ç»„ä»¶ä»å…¶çˆ¶ç»„ä»¶æ¥æ”¶ä¸¤ä¸ª propsï¼š<code>color</code> å’Œ <code>time</code>ã€‚ï¼ˆçˆ¶ç»„ä»¶çš„ä»£ç è¢«çœç•¥ï¼Œå› ä¸ºå®ƒä½¿ç”¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-a-components-memory">state</a>ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸ä¼šæ·±å…¥ç ”ç©¶ã€‚ï¼‰</p>
<p>å°è¯•åœ¨ä¸‹é¢çš„é€‰æ‹©æ¡†ä¸­æ›´æ”¹é¢œè‰²ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Clock</span>(<span class="params">&#123; color, time &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">color</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;time&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240927092811.png"></p>
<p>è¿™ä¸ªä¾‹å­è¯´æ˜ï¼Œ<strong>ä¸€ä¸ªç»„ä»¶å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»æ”¶åˆ°ä¸åŒçš„ propsã€‚</strong> Props å¹¶ä¸æ€»æ˜¯é™æ€çš„ï¼åœ¨è¿™é‡Œï¼Œ<code>time</code> prop æ¯ç§’éƒ½åœ¨å˜åŒ–ã€‚å½“ä½ é€‰æ‹©å¦ä¸€ç§é¢œè‰²æ—¶ï¼Œ<code>color</code> prop ä¹Ÿæ”¹å˜äº†ã€‚Props åæ˜ äº†ç»„ä»¶åœ¨ä»»ä½•æ—¶é—´ç‚¹çš„æ•°æ®ï¼Œå¹¶ä¸ä»…ä»…æ˜¯åœ¨å¼€å§‹æ—¶ã€‚</p>
<p>ç„¶è€Œï¼Œprops æ˜¯ <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Immutable_object">ä¸å¯å˜çš„</a>ï¼ˆä¸€ä¸ªè®¡ç®—æœºç§‘å­¦æœ¯è¯­ï¼Œæ„æ€æ˜¯â€œä¸å¯æ”¹å˜â€ï¼‰ã€‚å½“ä¸€ä¸ªç»„ä»¶éœ€è¦æ”¹å˜å®ƒçš„ propsï¼ˆä¾‹å¦‚ï¼Œå“åº”ç”¨æˆ·äº¤äº’æˆ–æ–°æ•°æ®ï¼‰æ—¶ï¼Œå®ƒä¸å¾—ä¸â€œè¯·æ±‚â€å®ƒçš„çˆ¶ç»„ä»¶ä¼ é€’ <strong>ä¸åŒçš„ props</strong> â€”â€” ä¸€ä¸ªæ–°å¯¹è±¡ï¼å®ƒçš„æ—§ props å°†è¢«ä¸¢å¼ƒï¼Œæœ€ç»ˆ JavaScript å¼•æ“å°†å›æ”¶å®ƒä»¬å ç”¨çš„å†…å­˜ã€‚</p>
<p><strong>ä¸è¦å°è¯•â€œæ›´æ”¹ propsâ€ã€‚</strong> å½“ä½ éœ€è¦å“åº”ç”¨æˆ·è¾“å…¥ï¼ˆä¾‹å¦‚æ›´æ”¹æ‰€é€‰é¢œè‰²ï¼‰æ—¶ï¼Œä½ å¯ä»¥â€œè®¾ç½® stateâ€ï¼Œä½ å¯ä»¥åœ¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-a-components-memory">State: ä¸€ä¸ªç»„ä»¶çš„å†…å­˜</a> ä¸­ç»§ç»­äº†è§£ã€‚</p>
<h2 id="2-4-æ¡ä»¶æ¸²æŸ“"><a href="#2-4-æ¡ä»¶æ¸²æŸ“" class="headerlink" title="2.4 æ¡ä»¶æ¸²æŸ“"></a>2.4 æ¡ä»¶æ¸²æŸ“</h2><p>é€šå¸¸ä½ çš„ç»„ä»¶ä¼šéœ€è¦æ ¹æ®ä¸åŒçš„æƒ…å†µæ˜¾ç¤ºä¸åŒçš„å†…å®¹ã€‚åœ¨ React ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ JavaScript çš„ <code>if</code> è¯­å¥ã€<code>&amp;&amp;</code> å’Œ <code>? :</code> è¿ç®—ç¬¦æ¥é€‰æ‹©æ€§åœ°æ¸²æŸ“ JSXã€‚</p>
<h3 id="2-4-1-æ¡ä»¶è¿”å›-JSX"><a href="#2-4-1-æ¡ä»¶è¿”å›-JSX" class="headerlink" title="2.4.1 æ¡ä»¶è¿”å› JSX"></a>2.4.1 æ¡ä»¶è¿”å› JSX</h3><p>å‡è®¾æœ‰ä¸€ä¸ª <code>PackingList</code> ç»„ä»¶ï¼Œé‡Œé¢æ¸²æŸ“å¤šä¸ª <code>Item</code> ç»„ä»¶ï¼Œæ¯ä¸ªç‰©å“å¯æ ‡è®°ä¸ºæ‰“åŒ…ä¸å¦ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Item</span>(<span class="params">&#123; name, isPacked &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">PackingList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Sally Ride çš„è¡Œææ¸…å•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å®‡èˆªæœ&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å¸¦é‡‘ç®”çš„å¤´ç›”&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;false&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;Tam çš„ç…§ç‰‡&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº› <code>Item</code> ç»„ä»¶çš„ <code>isPacked</code> å±æ€§æ˜¯è¢«è®¾ä¸º <code>true</code> è€Œä¸æ˜¯ <code>false</code>ã€‚ä½ å¯ä»¥åœ¨é‚£äº›æ»¡è¶³ <code>isPacked=&#123;true&#125;</code> æ¡ä»¶çš„ç‰©å“æ—åŠ ä¸Šä¸€ä¸ªå‹¾é€‰ç¬¦å·ï¼ˆâœ…ï¼‰ã€‚</p>
<p>ä½ å¯ä»¥ç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/if...else">if&#x2F;else è¯­å¥</a> å»åˆ¤æ–­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isPacked) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125; âœ…<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ <code>isPacked</code> å±æ€§æ˜¯ <code>true</code>ï¼Œè¿™æ®µä»£ç ä¼š<strong>è¿”å›ä¸€ä¸ªä¸ä¸€æ ·çš„ JSX</strong>ã€‚é€šè¿‡è¿™æ ·çš„æ”¹åŠ¨ï¼Œä¸€äº›ç‰©å“çš„åå­—åé¢ä¼šå‡ºç°ä¸€ä¸ªå‹¾é€‰ç¬¦å·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Item</span>(<span class="params">&#123; name, isPacked &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (isPacked) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125; âœ…<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">PackingList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Sally Ride çš„è¡Œææ¸…å•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å®‡èˆªæœ&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å¸¦é‡‘ç®”çš„å¤´ç›”&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;false&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;Tam çš„ç…§ç‰‡&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç•™æ„è¿™é‡Œä½ æ˜¯æ€ä¹ˆä½¿ç”¨ JavaScript çš„ <code>if</code> å’Œ <code>return</code> è¯­å¥æ¥å†™åˆ†æ”¯é€»è¾‘ã€‚åœ¨ React ä¸­ï¼Œæ˜¯ç”± JavaScript æ¥å¤„ç†æ§åˆ¶æµçš„ï¼ˆæ¯”å¦‚æ¡ä»¶ï¼‰ã€‚</p>
<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240927140735.png"></p>
<h3 id="2-4-2-é€‰æ‹©æ€§è¿”å›-null"><a href="#2-4-2-é€‰æ‹©æ€§è¿”å›-null" class="headerlink" title="2.4.2 é€‰æ‹©æ€§è¿”å› null"></a>2.4.2 é€‰æ‹©æ€§è¿”å› null</h3><p>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œä½ ä¸æƒ³æœ‰ä»»ä½•ä¸œè¥¿è¿›è¡Œæ¸²æŸ“ã€‚æ¯”å¦‚ï¼Œä½ ä¸æƒ³æ˜¾ç¤ºå·²ç»æ‰“åŒ…å¥½çš„ç‰©å“ã€‚ä½†ä¸€ä¸ªç»„ä»¶å¿…é¡»è¿”å›ä¸€äº›ä¸œè¥¿ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç›´æ¥è¿”å› <code>null</code>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isPacked) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç»„ä»¶çš„ <code>isPacked</code> å±æ€§ä¸º <code>true</code>ï¼Œé‚£ä¹ˆå®ƒå°†åªè¿”å› <code>null</code>ã€‚å¦åˆ™ï¼Œå®ƒå°†è¿”å›ç›¸åº”çš„ JSX ç”¨æ¥æ¸²æŸ“ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Item</span>(<span class="params">&#123; name, isPacked &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (isPacked) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">PackingList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Sally Ride çš„è¡Œææ¸…å•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å®‡èˆªæœ&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å¸¦é‡‘ç®”çš„å¤´ç›”&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;false&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;Tam çš„ç…§ç‰‡&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\lm\AppData\Roaming\Typora\typora-user-images\image-20240927140722291.png" alt="image-20240927140722291"></p>
<p>å®é™…ä¸Šï¼Œåœ¨ç»„ä»¶é‡Œè¿”å› <code>null</code> å¹¶ä¸å¸¸è§ï¼Œå› ä¸ºè¿™æ ·ä¼šè®©æƒ³ä½¿ç”¨å®ƒçš„å¼€å‘è€…æ„Ÿè§‰å¥‡æ€ªã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥åœ¨çˆ¶ç»„ä»¶é‡Œé€‰æ‹©æ˜¯å¦è¦æ¸²æŸ“è¯¥ç»„ä»¶ã€‚è®©æˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹å§ï¼</p>
<h3 id="2-4-3-é€‰æ‹©æ€§åœ°åŒ…å«-JSX"><a href="#2-4-3-é€‰æ‹©æ€§åœ°åŒ…å«-JSX" class="headerlink" title="2.4.3 é€‰æ‹©æ€§åœ°åŒ…å« JSX"></a>2.4.3 é€‰æ‹©æ€§åœ°åŒ…å« JSX</h3><p>åœ¨ä¹‹å‰çš„ä¾‹å­é‡Œï¼Œä½ åœ¨ç»„ä»¶å†…éƒ¨æ§åˆ¶å“ªäº› JSX æ ‘ï¼ˆå¦‚æœæœ‰çš„è¯ï¼ï¼‰ä¼šè¿”å›ã€‚ä½ å¯èƒ½å·²ç»å‘ç°äº†åœ¨æ¸²æŸ“è¾“å‡ºé‡Œä¼šæœ‰ä¸€äº›é‡å¤çš„å†…å®¹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li className=<span class="string">&quot;item&quot;</span>&gt;&#123;name&#125; âœ…&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<p>å’Œä¸‹é¢çš„å†™æ³•å¾ˆåƒï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li className=<span class="string">&quot;item&quot;</span>&gt;&#123;name&#125;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªæ¡ä»¶åˆ†æ”¯éƒ½ä¼šè¿”å› <code>&lt;li className=&quot;item&quot;&gt;...&lt;/li&gt;</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isPacked) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125; âœ…<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>

<p>è™½ç„¶è¿™äº›é‡å¤çš„å†…å®¹æ²¡ä»€ä¹ˆå®³å¤„ï¼Œä½†è¿™æ ·å¯èƒ½ä¼šå¯¼è‡´ä½ çš„ä»£ç æ›´éš¾ç»´æŠ¤ã€‚æ¯”å¦‚ä½ æƒ³æ›´æ”¹ <code>className</code>ï¼Ÿä½ å°±éœ€è¦ä¿®æ”¹ä¸¤ä¸ªåœ°æ–¹ï¼é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥é€šè¿‡é€‰æ‹©æ€§åœ°åŒ…å«ä¸€å°æ®µ JSX æ¥è®©ä½ çš„ä»£ç æ›´åŠ  <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Don't_repeat_yourself">DRY</a>ã€‚</p>
<p><strong>ä¸‰ç›®è¿ç®—ç¬¦ï¼ˆ<code>? :</code>ï¼‰</strong></p>
<p>JavaScript æœ‰ä¸€ç§ç´§å‡‘å‹è¯­æ³•æ¥å®ç°æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼â€”â€”<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">æ¡ä»¶è¿ç®—ç¬¦</a> åˆç§°â€œä¸‰ç›®è¿ç®—ç¬¦â€ã€‚</p>
<p>é™¤äº†è¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isPacked) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125; âœ…<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>

<p>ä½ è¿˜å¯ä»¥è¿™æ ·å®ç°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;isPacked ? name + &#x27; âœ…&#x27; : name&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥è®¤ä¸ºï¼Œ<em>â€œå¦‚æœ <code>isPacked</code> ä¸º true æ—¶ï¼Œåˆ™ï¼ˆ<code>?</code>ï¼‰æ¸²æŸ“ <code>name + &#39; âœ…&#39;</code>ï¼Œå¦åˆ™ï¼ˆ<code>:</code>ï¼‰æ¸²æŸ“ <code>name</code>ã€‚â€</em></p>
<blockquote>
<p>å¦‚æœä½ ä¹‹å‰æ˜¯ä¹ æƒ¯é¢å‘å¯¹è±¡å¼€å‘çš„ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ç•¥æœ‰ä¸åŒï¼Œå› ä¸ºå…¶ä¸­ä¸€ä¸ªå¯èƒ½ä¼šåˆ›å»ºä¸¤ä¸ªä¸åŒçš„ <code>&lt;li&gt;</code> â€œå®ä¾‹â€ã€‚ä½† JSX å…ƒç´ ä¸æ˜¯â€œå®ä¾‹â€ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å†…éƒ¨çŠ¶æ€ä¹Ÿä¸æ˜¯çœŸå®çš„ DOM èŠ‚ç‚¹ã€‚å®ƒä»¬åªæ˜¯ä¸€äº›ç®€å•çš„æè¿°ï¼Œå°±åƒå›¾çº¸ä¸€æ ·ã€‚æ‰€ä»¥ä¸Šé¢è¿™ä¸¤ä¸ªä¾‹å­äº‹å®ä¸Šæ˜¯å®Œå…¨ç›¸åŒçš„ã€‚åœ¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/preserving-and-resetting-state">çŠ¶æ€çš„ä¿æŒå’Œé‡ç½®</a> é‡Œä¼šæ·±å…¥æ¢è®¨å…¶åŸå› ã€‚</p>
</blockquote>
<p>ç°åœ¨ï¼Œå‡å¦‚ä½ æƒ³å°†å¯¹åº”ç‰©å“çš„æ–‡æœ¬æ”¾åˆ°å¦ä¸€ä¸ª HTML æ ‡ç­¾é‡Œï¼Œæ¯”å¦‚ç”¨ <code>&lt;del&gt;</code> æ¥æ˜¾ç¤ºåˆ é™¤çº¿ã€‚ä½ å¯ä»¥æ·»åŠ æ›´å¤šçš„æ¢è¡Œå’Œæ‹¬å·ï¼Œä»¥ä¾¿åœ¨å„ç§æƒ…å†µä¸‹æ›´å¥½åœ°å»åµŒå¥— JSXï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Item</span>(<span class="params">&#123; name, isPacked &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;isPacked ? (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">del</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;name + &#x27; âœ…&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">del</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ) : (</span></span><br><span class="line"><span class="language-xml">        name</span></span><br><span class="line"><span class="language-xml">      )&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">PackingList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Sally Ride çš„è¡Œææ¸…å•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å®‡èˆªæœ&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å¸¦é‡‘ç®”çš„å¤´ç›”&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;false&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;Tam çš„ç…§ç‰‡&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºç®€å•çš„æ¡ä»¶åˆ¤æ–­ï¼Œè¿™æ ·çš„é£æ ¼å¯ä»¥å¾ˆå¥½åœ°å®ç°ï¼Œä½†éœ€è¦é€‚é‡ä½¿ç”¨ã€‚å¦‚æœä½ çš„ç»„ä»¶é‡Œæœ‰å¾ˆå¤šçš„åµŒå¥—å¼æ¡ä»¶è¡¨è¾¾å¼ï¼Œåˆ™éœ€è¦è€ƒè™‘é€šè¿‡æå–ä¸ºå­ç»„ä»¶æ¥ç®€åŒ–è¿™äº›åµŒå¥—è¡¨è¾¾å¼ã€‚åœ¨ React é‡Œï¼Œæ ‡ç­¾ä¹Ÿæ˜¯ä½ ä»£ç ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä½ å¯ä»¥ä½¿ç”¨å˜é‡å’Œå‡½æ•°æ¥æ•´ç†ä¸€äº›å¤æ‚çš„è¡¨è¾¾å¼ã€‚</p>
<h3 id="2-4-4-ä¸è¿ç®—ç¬¦ï¼ˆ-ï¼‰"><a href="#2-4-4-ä¸è¿ç®—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="2.4.4 ä¸è¿ç®—ç¬¦ï¼ˆ&amp;&amp;ï¼‰"></a>2.4.4 ä¸è¿ç®—ç¬¦ï¼ˆ<code>&amp;&amp;</code>ï¼‰</h3><p>ä½ ä¼šé‡åˆ°çš„å¦ä¸€ä¸ªå¸¸è§çš„å¿«æ·è¡¨è¾¾å¼æ˜¯ [JavaScript é€»è¾‘ä¸ï¼ˆ<code>&amp;&amp;</code>ï¼‰è¿ç®—ç¬¦](<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_AND#:~:text=The">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_AND#:~:text=The</a> logical AND ( %26%26 ) operator,it returns a Boolean value.)ã€‚åœ¨ React ç»„ä»¶é‡Œï¼Œé€šå¸¸ç”¨åœ¨å½“æ¡ä»¶æˆç«‹æ—¶ï¼Œä½ æƒ³æ¸²æŸ“ä¸€äº› JSXï¼Œ<strong>æˆ–è€…ä¸åšä»»ä½•æ¸²æŸ“</strong>ã€‚ä½¿ç”¨ <code>&amp;&amp;</code>ï¼Œä½ ä¹Ÿå¯ä»¥å®ç°ä»…å½“ <code>isPacked</code> ä¸º <code>true</code> æ—¶ï¼Œæ¸²æŸ“å‹¾é€‰ç¬¦å·ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;name&#125; &#123;isPacked &amp;&amp; &#x27;âœ…&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥è®¤ä¸ºï¼Œ<em>â€œå½“ <code>isPacked</code> ä¸ºçœŸå€¼æ—¶ï¼Œåˆ™ï¼ˆ<code>&amp;&amp;</code>ï¼‰æ¸²æŸ“å‹¾é€‰ç¬¦å·ï¼Œå¦åˆ™ï¼Œä¸æ¸²æŸ“ã€‚â€</em></p>
<p>ä¸‹é¢ä¸ºå…·ä½“çš„ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Item</span>(<span class="params">&#123; name, isPacked &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;name&#125; &#123;isPacked &amp;&amp; &#x27;âœ…&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">PackingList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Sally Ride çš„è¡Œææ¸…å•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å®‡èˆªæœ&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å¸¦é‡‘ç®”çš„å¤´ç›”&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;false&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;Tam çš„ç…§ç‰‡&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Logical_AND">JavaScript &amp;&amp; è¡¨è¾¾å¼</a> çš„å·¦ä¾§ï¼ˆæˆ‘ä»¬çš„æ¡ä»¶ï¼‰ä¸º <code>true</code> æ—¶ï¼Œå®ƒåˆ™è¿”å›å…¶å³ä¾§çš„å€¼ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œæ˜¯å‹¾é€‰ç¬¦å·ï¼‰ã€‚ä½†æ¡ä»¶çš„ç»“æœæ˜¯ <code>false</code>ï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼ä¼šå˜æˆ <code>false</code>ã€‚åœ¨ JSX é‡Œï¼ŒReact ä¼šå°† <code>false</code> è§†ä¸ºä¸€ä¸ªâ€œç©ºå€¼â€ï¼Œå°±åƒ <code>null</code> æˆ–è€… <code>undefined</code>ï¼Œè¿™æ · React å°±ä¸ä¼šåœ¨è¿™é‡Œè¿›è¡Œä»»ä½•æ¸²æŸ“ã€‚</p>
<blockquote>
<p><strong>åˆ‡å‹¿å°†æ•°å­—æ”¾åœ¨ <code>&amp;&amp;</code> å·¦ä¾§.</strong></p>
<p>JavaScript ä¼šè‡ªåŠ¨å°†å·¦ä¾§çš„å€¼è½¬æ¢æˆå¸ƒå°”ç±»å‹ä»¥åˆ¤æ–­æ¡ä»¶æˆç«‹ä¸å¦ã€‚ç„¶è€Œï¼Œå¦‚æœå·¦ä¾§æ˜¯ <code>0</code>ï¼Œæ•´ä¸ªè¡¨è¾¾å¼å°†å˜æˆå·¦ä¾§çš„å€¼ï¼ˆ<code>0</code>ï¼‰ï¼ŒReact æ­¤æ—¶åˆ™ä¼šæ¸²æŸ“ <code>0</code> è€Œä¸æ˜¯ä¸è¿›è¡Œæ¸²æŸ“ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯ <code>messageCount &amp;&amp; &lt;p&gt;New messages&lt;/p&gt;</code>ã€‚å…¶åŸæœ¬æ˜¯æƒ³å½“ <code>messageCount</code> ä¸º 0 çš„æ—¶å€™ä¸è¿›è¡Œæ¸²æŸ“ï¼Œä½†å®é™…ä¸Šå´æ¸²æŸ“äº† <code>0</code>ã€‚</p>
<p>ä¸ºäº†æ›´æ­£ï¼Œå¯ä»¥å°†å·¦ä¾§çš„å€¼æ”¹æˆå¸ƒå°”ç±»å‹ï¼š<code>messageCount &gt; 0 &amp;&amp; &lt;p&gt;New messages&lt;/p&gt;</code>ã€‚</p>
</blockquote>
<h3 id="2-4-5-é€‰æ‹©æ€§åœ°å°†-JSX-èµ‹å€¼ç»™å˜é‡"><a href="#2-4-5-é€‰æ‹©æ€§åœ°å°†-JSX-èµ‹å€¼ç»™å˜é‡" class="headerlink" title="2.4.5 é€‰æ‹©æ€§åœ°å°† JSX èµ‹å€¼ç»™å˜é‡"></a>2.4.5 é€‰æ‹©æ€§åœ°å°† JSX èµ‹å€¼ç»™å˜é‡</h3><p>å½“è¿™äº›å¿«æ·æ–¹å¼å¦¨ç¢å†™æ™®é€šä»£ç æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>if</code> è¯­å¥å’Œå˜é‡ã€‚å› ä¸ºä½ å¯ä»¥ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/let"><code>let</code></a> è¿›è¡Œé‡å¤èµ‹å€¼ï¼Œæ‰€ä»¥ä¸€å¼€å§‹ä½ å¯ä»¥å°†ä½ æƒ³å±•ç¤ºçš„ï¼ˆè¿™é‡ŒæŒ‡çš„æ˜¯ç‰©å“çš„åå­—ï¼‰ä½œä¸ºé»˜è®¤å€¼èµ‹äºˆç»™è¯¥å˜é‡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> itemContent = name;</span><br></pre></td></tr></table></figure>

<p>ç»“åˆ <code>if</code> è¯­å¥ï¼Œå½“ <code>isPacked</code> ä¸º <code>true</code> æ—¶ï¼Œå°† JSX è¡¨è¾¾å¼çš„å€¼é‡æ–°èµ‹å€¼ç»™ <code>itemContent</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (isPacked) &#123;</span><br><span class="line">  itemContent = name + <span class="string">&quot; âœ…&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/javascript-in-jsx-with-curly-braces#using-curly-braces-a-window-into-the-javascript-world">åœ¨ JSX ä¸­é€šè¿‡å¤§æ‹¬å·ä½¿ç”¨ JavaScript</a>ã€‚å°†å˜é‡ç”¨å¤§æ‹¬å·åµŒå…¥åœ¨è¿”å›çš„ JSX æ ‘ä¸­ï¼Œæ¥åµŒå¥—è®¡ç®—å¥½çš„è¡¨è¾¾å¼ä¸ JSXï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;li className=<span class="string">&quot;item&quot;</span>&gt;</span><br><span class="line">  &#123;itemContent&#125;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§æ–¹å¼æ˜¯æœ€å†—é•¿çš„ï¼Œä½†ä¹Ÿæ˜¯æœ€çµæ´»çš„ã€‚ä¸‹é¢æ˜¯ç›¸å…³çš„ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Item</span>(<span class="params">&#123; name, isPacked &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> itemContent = name;</span><br><span class="line">  <span class="keyword">if</span> (isPacked) &#123;</span><br><span class="line">    itemContent = name + <span class="string">&quot; âœ…&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;itemContent&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">PackingList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Sally Ride çš„è¡Œææ¸…å•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å®‡èˆªæœ&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å¸¦é‡‘ç®”çš„å¤´ç›”&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;false&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;Tam çš„ç…§ç‰‡&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è·Ÿä¹‹å‰çš„ä¸€æ ·ï¼Œè¿™ä¸ªæ–¹å¼ä¸ä»…ä»…é€‚ç”¨äºæ–‡æœ¬ï¼Œä»»æ„çš„ JSX å‡é€‚ç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Item</span>(<span class="params">&#123; name, isPacked &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> itemContent = name;</span><br><span class="line">  <span class="keyword">if</span> (isPacked) &#123;</span><br><span class="line">    itemContent = (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">del</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;name + &quot; âœ…&quot;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">del</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;itemContent&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">PackingList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Sally Ride çš„è¡Œææ¸…å•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å®‡èˆªæœ&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;true&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;å¸¦é‡‘ç®”çš„å¤´ç›”&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Item</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">isPacked</span>=<span class="string">&#123;false&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;Tam çš„ç…§ç‰‡&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå¯¹ JavaScript ä¸ç†Ÿæ‚‰ï¼Œè¿™äº›ä¸åŒçš„é£æ ¼ä¸€å¼€å§‹å¯èƒ½ä¼šè®©ä½ æ„Ÿåˆ°ä¸çŸ¥æ‰€æªã€‚ä½†æ˜¯ï¼Œå­¦ä¹ è¿™äº›å°†æœ‰åŠ©äºä½ ç†è§£å’Œå†™ä»»ä½•çš„ JavaScript ä»£ç ï¼Œè€Œä¸ä»…ä»…æ˜¯ React ç»„ä»¶ã€‚ä¸€å¼€å§‹å¯ä»¥é€‰æ‹©ä¸€ä¸ªä½ å–œæ¬¢çš„æ¥ç”¨ï¼Œç„¶åå½“ä½ å¿˜è®°å…¶ä»–çš„æ€ä¹ˆç”¨æ—¶ï¼Œå¯ä»¥å†ç¿»é˜…è¿™ä»½å‚è€ƒèµ„æ–™ã€‚</p>
<h2 id="2-5-æ¸²æŸ“åˆ—è¡¨"><a href="#2-5-æ¸²æŸ“åˆ—è¡¨" class="headerlink" title="2.5 æ¸²æŸ“åˆ—è¡¨"></a>2.5 æ¸²æŸ“åˆ—è¡¨</h2><p>ä½ å¯èƒ½ç»å¸¸éœ€è¦é€šè¿‡ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array#">JavaScript çš„æ•°ç»„æ–¹æ³•</a> æ¥æ“ä½œæ•°ç»„ä¸­çš„æ•°æ®ï¼Œä»è€Œå°†ä¸€ä¸ªæ•°æ®é›†æ¸²æŸ“æˆå¤šä¸ªç›¸ä¼¼çš„ç»„ä»¶ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter()</code></a> ç­›é€‰éœ€è¦æ¸²æŸ“çš„ç»„ä»¶å’Œä½¿ç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map()</code></a> æŠŠæ•°ç»„è½¬æ¢æˆç»„ä»¶æ•°ç»„ã€‚</p>
<h3 id="2-5-1-ä»æ•°ç»„ä¸­æ¸²æŸ“æ•°æ®"><a href="#2-5-1-ä»æ•°ç»„ä¸­æ¸²æŸ“æ•°æ®" class="headerlink" title="2.5.1 ä»æ•°ç»„ä¸­æ¸²æŸ“æ•°æ®"></a>2.5.1 ä»æ•°ç»„ä¸­æ¸²æŸ“æ•°æ®</h3><p>è¿™é‡Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåˆ—è¡¨ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>å‡¯ç‘Ÿç³Â·çº¦ç¿°é€Š: æ•°å­¦å®¶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>é©¬é‡Œå¥¥Â·è«åˆ©çº³: åŒ–å­¦å®¶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç©†ç½•é»˜å¾·Â·é˜¿åœæœå‹’Â·è¨æ‹‰å§†: ç‰©ç†å­¦å®¶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç€è¥¿Â·è±æ¸©Â·æœ±åˆ©äºš: åŒ–å­¦å®¶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>è‹å¸ƒæ‹‰é©¬å°¼æ‰¬Â·é’±å¾·æ‹‰å¡å¡: å¤©ä½“ç‰©ç†å­¦å®¶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›åˆ—è¡¨é¡¹ä¹‹é—´å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å…¶ä¸­çš„å†…å®¹&#x2F;æ•°æ®ã€‚æœªæ¥ä½ å¯èƒ½ä¼šç¢°åˆ°å¾ˆå¤šç±»ä¼¼çš„æƒ…å†µï¼Œåœ¨é‚£äº›åœºæ™¯ä¸­ï¼Œä½ æƒ³åŸºäºä¸åŒçš„æ•°æ®æ¸²æŸ“å‡ºç›¸ä¼¼çš„ç»„ä»¶ï¼Œæ¯”å¦‚è¯„è®ºåˆ—è¡¨æˆ–è€…ä¸ªäººèµ„æ–™çš„å›¾åº“ã€‚åœ¨è¿™æ ·çš„åœºæ™¯ä¸‹ï¼Œå¯ä»¥æŠŠè¦ç”¨åˆ°çš„æ•°æ®å­˜å…¥ JavaScript å¯¹è±¡æˆ–æ•°ç»„ï¼Œç„¶åç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map()</code></a> æˆ– <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter()</code></a> è¿™æ ·çš„æ–¹æ³•æ¥æ¸²æŸ“å‡ºä¸€ä¸ªç»„ä»¶åˆ—è¡¨ã€‚</p>
<p>è¿™é‡Œç»™å‡ºä¸€ä¸ªç”±æ•°ç»„ç”Ÿæˆä¸€ç³»åˆ—åˆ—è¡¨é¡¹çš„ç®€å•ç¤ºä¾‹ï¼š</p>
<ol>
<li><p>é¦–å…ˆï¼ŒæŠŠæ•°æ® <strong>å­˜å‚¨</strong> åˆ°æ•°ç»„ä¸­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = [</span><br><span class="line">  <span class="string">&#x27;å‡¯ç‘Ÿç³Â·çº¦ç¿°é€Š: æ•°å­¦å®¶&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;é©¬é‡Œå¥¥Â·è«åˆ©çº³: åŒ–å­¦å®¶&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;ç©†ç½•é»˜å¾·Â·é˜¿åœæœå‹’Â·è¨æ‹‰å§†: ç‰©ç†å­¦å®¶&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;ç€è¥¿Â·è±æ¸©Â·æœ±åˆ©äºš: åŒ–å­¦å®¶&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;è‹å¸ƒæ‹‰é©¬å°¼æ‰¬Â·é’±å¾·æ‹‰å¡å¡: å¤©ä½“ç‰©ç†å­¦å®¶&#x27;</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>éå†</strong> <code>people</code> è¿™ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ï¼Œå¹¶è·å¾—ä¸€ä¸ªæ–°çš„ JSX èŠ‚ç‚¹æ•°ç»„ <code>listItems</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> listItems = people.<span class="title function_">map</span>(<span class="function"><span class="params">person</span> =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;person&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŠŠ <code>listItems</code> ç”¨ <code>&lt;ul&gt;</code> åŒ…è£¹èµ·æ¥ï¼Œç„¶å <strong>è¿”å›</strong> å®ƒï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return &lt;ul&gt;&#123;listItems&#125;&lt;/ul&gt;;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>æ¥çœ‹çœ‹è¿è¡Œçš„ç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = [</span><br><span class="line">  <span class="string">&#x27;å‡¯ç‘Ÿç³Â·çº¦ç¿°é€Š: æ•°å­¦å®¶&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;é©¬é‡Œå¥¥Â·è«åˆ©çº³: åŒ–å­¦å®¶&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;ç©†ç½•é»˜å¾·Â·é˜¿åœæœå‹’Â·è¨æ‹‰å§†: ç‰©ç†å­¦å®¶&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;ç€è¥¿Â·è±æ¸©Â·æœ±åˆ©äºš: åŒ–å­¦å®¶&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;è‹å¸ƒæ‹‰é©¬å°¼æ‰¬Â·é’±å¾·æ‹‰å¡å¡: å¤©ä½“ç‰©ç†å­¦å®¶&#x27;</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">List</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> listItems = people.<span class="title function_">map</span>(<span class="function"><span class="params">person</span> =&gt;</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;person&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;listItems&#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240927111208.png"></p>
<p>æ³¨æ„ä¸Šé¢çš„æ²™ç›’å¯èƒ½ä¼šè¾“å‡ºè¿™æ ·ä¸€ä¸ªæ§åˆ¶å°é”™è¯¯ã€‚</p>
<p>ç­‰ä¼šæˆ‘ä»¬ä¼šå­¦åˆ°æ€ä¹ˆä¿®å¤å®ƒã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¦‚ä½•æŠŠè¿™ä¸ªæ•°ç»„å˜å¾—æ›´åŠ ç»“æ„åŒ–ã€‚</p>
<h3 id="2-5-2-å¯¹æ•°ç»„é¡¹è¿›è¡Œè¿‡æ»¤"><a href="#2-5-2-å¯¹æ•°ç»„é¡¹è¿›è¡Œè¿‡æ»¤" class="headerlink" title="2.5.2 å¯¹æ•°ç»„é¡¹è¿›è¡Œè¿‡æ»¤"></a>2.5.2 å¯¹æ•°ç»„é¡¹è¿›è¡Œè¿‡æ»¤</h3><p>è®©æˆ‘ä»¬æŠŠ <code>people</code> æ•°ç»„å˜å¾—æ›´åŠ ç»“æ„åŒ–ä¸€ç‚¹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = [&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;å‡¯ç‘Ÿç³Â·çº¦ç¿°é€Š&#x27;</span>,</span><br><span class="line">  <span class="attr">profession</span>: <span class="string">&#x27;æ•°å­¦å®¶&#x27;</span>,</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;é©¬é‡Œå¥¥Â·è«åˆ©çº³&#x27;</span>,</span><br><span class="line">  <span class="attr">profession</span>: <span class="string">&#x27;åŒ–å­¦å®¶&#x27;</span>,</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;ç©†ç½•é»˜å¾·Â·é˜¿åœæœå‹’Â·è¨æ‹‰å§†&#x27;</span>,</span><br><span class="line">  <span class="attr">profession</span>: <span class="string">&#x27;ç‰©ç†å­¦å®¶&#x27;</span>,</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;ç€è¥¿Â·è±æ¸©Â·æœ±åˆ©äºš&#x27;</span>,</span><br><span class="line">  <span class="attr">profession</span>: <span class="string">&#x27;åŒ–å­¦å®¶&#x27;</span>,</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;è‹å¸ƒæ‹‰é©¬å°¼æ‰¬Â·é’±å¾·æ‹‰å¡å¡&#x27;</span>,</span><br><span class="line">  <span class="attr">profession</span>: <span class="string">&#x27;å¤©ä½“ç‰©ç†å­¦å®¶&#x27;</span>,</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œå‡è®¾ä½ åªæƒ³åœ¨å±å¹•ä¸Šæ˜¾ç¤ºèŒä¸šæ˜¯ <code>åŒ–å­¦å®¶</code> çš„äººã€‚é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ JavaScript çš„ <code>filter()</code> æ–¹æ³•æ¥è¿”å›æ»¡è¶³æ¡ä»¶çš„é¡¹ã€‚è¿™ä¸ªæ–¹æ³•ä¼šè®©æ•°ç»„çš„å­é¡¹ç»è¿‡ â€œè¿‡æ»¤å™¨â€ï¼ˆä¸€ä¸ªè¿”å›å€¼ä¸º <code>true</code> æˆ– <code>false</code> çš„å‡½æ•°ï¼‰çš„ç­›é€‰ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªåªåŒ…å«æ»¡è¶³æ¡ä»¶çš„é¡¹çš„æ–°æ•°ç»„ã€‚</p>
<p>æ—¢ç„¶ä½ åªæƒ³æ˜¾ç¤º <code>profession</code> å€¼æ˜¯ <code>åŒ–å­¦å®¶</code> çš„äººï¼Œé‚£ä¹ˆè¿™é‡Œçš„ â€œè¿‡æ»¤å™¨â€ å‡½æ•°åº”è¯¥é•¿è¿™æ ·ï¼š<code>(person) =&gt; person.profession === &#39;åŒ–å­¦å®¶&#39;</code>ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹è¯¥æ€ä¹ˆæŠŠå®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ï¼š</p>
<ol>
<li><p>é¦–å…ˆï¼Œ<strong>åˆ›å»º</strong> ä¸€ä¸ªç”¨æ¥å­˜åŒ–å­¦å®¶ä»¬çš„æ–°æ•°ç»„ <code>chemists</code>ï¼Œè¿™é‡Œç”¨åˆ° <code>filter()</code> æ–¹æ³•è¿‡æ»¤ <code>people</code> æ•°ç»„æ¥å¾—åˆ°æ‰€æœ‰çš„åŒ–å­¦å®¶ï¼Œè¿‡æ»¤çš„æ¡ä»¶åº”è¯¥æ˜¯ <code>person.profession === &#39;åŒ–å­¦å®¶&#39;</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> chemists = people.<span class="title function_">filter</span>(<span class="function"><span class="params">person</span> =&gt;</span></span><br><span class="line">  person.<span class="property">profession</span> === <span class="string">&#x27;åŒ–å­¦å®¶&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ¥ä¸‹æ¥ <strong>ç”¨ map æ–¹æ³•éå†</strong> <code>chemists</code> æ•°ç»„:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> listItems = chemists.<span class="title function_">map</span>(<span class="function"><span class="params">person</span> =&gt;</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">       <span class="attr">src</span>=<span class="string">&#123;getImageUrl(person)&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">       <span class="attr">alt</span>=<span class="string">&#123;person.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">     /&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">b</span>&gt;</span>&#123;person.name&#125;:<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       &#123;&#x27; &#x27; + person.profession + &#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">       å› &#123;person.accomplishment&#125;è€Œé—»åä¸–ç•Œ</span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ€åï¼Œ<strong>è¿”å›</strong> <code>listItems</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;listItems&#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><code>App.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; people &#125; <span class="keyword">from</span> <span class="string">&#x27;./data.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getImageUrl &#125; <span class="keyword">from</span> <span class="string">&#x27;./utils.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">List</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> chemists = people.<span class="title function_">filter</span>(<span class="function"><span class="params">person</span> =&gt;</span></span><br><span class="line">    person.<span class="property">profession</span> === <span class="string">&#x27;åŒ–å­¦å®¶&#x27;</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> listItems = chemists.<span class="title function_">map</span>(<span class="function"><span class="params">person</span> =&gt;</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&#123;getImageUrl(person)&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&#123;person.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">b</span>&gt;</span>&#123;person.name&#125;:<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#x27; &#x27; + person.profession + &#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        å› &#123;person.accomplishment&#125;è€Œé—»åä¸–ç•Œ</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;listItems&#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>data.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> people = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å‡¯ç‘Ÿç³Â·çº¦ç¿°é€Š&#x27;</span>,</span><br><span class="line">    <span class="attr">profession</span>: <span class="string">&#x27;æ•°å­¦å®¶&#x27;</span>,</span><br><span class="line">    <span class="attr">accomplishment</span>: <span class="string">&#x27;å¤ªç©ºé£è¡Œç›¸å…³æ•°å€¼çš„æ ¸ç®—&#x27;</span>,</span><br><span class="line">    <span class="attr">imageId</span>: <span class="string">&#x27;MK3eW3A&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;é©¬é‡Œå¥¥Â·è«åˆ©çº³&#x27;</span>,</span><br><span class="line">    <span class="attr">profession</span>: <span class="string">&#x27;åŒ–å­¦å®¶&#x27;</span>,</span><br><span class="line">    <span class="attr">accomplishment</span>: <span class="string">&#x27;åŒ—æè‡­æ°§ç©ºæ´çš„å‘ç°&#x27;</span>,</span><br><span class="line">    <span class="attr">imageId</span>: <span class="string">&#x27;mynHUSa&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ç©†ç½•é»˜å¾·Â·é˜¿åœæœå‹’Â·è¨æ‹‰å§†&#x27;</span>,</span><br><span class="line">    <span class="attr">profession</span>: <span class="string">&#x27;ç‰©ç†å­¦å®¶&#x27;</span>,</span><br><span class="line">    <span class="attr">accomplishment</span>: <span class="string">&#x27;å…³äºåŸºæœ¬ç²’å­é—´å¼±ç›¸äº’ä½œç”¨å’Œç”µç£ç›¸äº’ä½œç”¨çš„ç»Ÿä¸€ç†è®º&#x27;</span>,</span><br><span class="line">    <span class="attr">imageId</span>: <span class="string">&#x27;bE7W1ji&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ç€è¥¿Â·è±æ¸©Â·æœ±åˆ©äºš&#x27;</span>,</span><br><span class="line">    <span class="attr">profession</span>: <span class="string">&#x27;åŒ–å­¦å®¶&#x27;</span>,</span><br><span class="line">    <span class="attr">accomplishment</span>: <span class="string">&#x27;å¼€åˆ›æ€§çš„å¯çš„æ¾è¯ç‰©ã€ç±»å›ºé†‡å’Œé¿å­•è¯çš„ç ”ç©¶&#x27;</span>,</span><br><span class="line">    <span class="attr">imageId</span>: <span class="string">&#x27;IOjWm71&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;è‹å¸ƒæ‹‰é©¬å°¼æ‰¬Â·é’±å¾·æ‹‰å¡å¡&#x27;</span>,</span><br><span class="line">    <span class="attr">profession</span>: <span class="string">&#x27;å¤©ä½“ç‰©ç†å­¦å®¶&#x27;</span>,</span><br><span class="line">    <span class="attr">accomplishment</span>: <span class="string">&#x27;ç™½çŸ®æ˜Ÿè´¨é‡è®¡ç®—&#x27;</span>,</span><br><span class="line">    <span class="attr">imageId</span>: <span class="string">&#x27;lrWQx8l&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p><code>utils.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getImageUrl</span>(<span class="params">person</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="string">&#x27;https://i.imgur.com/&#x27;</span> +</span><br><span class="line">    person.<span class="property">imageId</span> +</span><br><span class="line">    <span class="string">&#x27;s.jpg&#x27;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å› ä¸ºç®­å¤´å‡½æ•°ä¼šéšå¼åœ°è¿”å›ä½äº <code>=&gt;</code> ä¹‹åçš„è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä½ å¯ä»¥çœç•¥ <code>return</code> è¯­å¥ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> listItems = chemists.<span class="title function_">map</span>(<span class="function"><span class="params">person</span> =&gt;</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>...<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span> <span class="comment">// éšå¼åœ°è¿”å›ï¼</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ä¸è¿‡ï¼Œ<strong>å¦‚æœä½ çš„ <code>=&gt;</code> åé¢è·Ÿäº†ä¸€å¯¹èŠ±æ‹¬å· <code>&#123;</code> ï¼Œé‚£ä½ å¿…é¡»ä½¿ç”¨ <code>return</code> æ¥æŒ‡å®šè¿”å›å€¼ï¼</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> listItems = chemists.<span class="title function_">map</span>(<span class="function"><span class="params">person</span> =&gt;</span> &#123; <span class="comment">// èŠ±æ‹¬å·</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>...<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ç®­å¤´å‡½æ•° <code>=&gt; &#123;</code> åé¢çš„éƒ¨åˆ†è¢«ç§°ä¸º <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions#function_body">â€œå—å‡½æ•°ä½“â€</a>ï¼Œå—å‡½æ•°ä½“æ”¯æŒå¤šè¡Œä»£ç çš„å†™æ³•ï¼Œä½†è¦ç”¨ <code>return</code> è¯­å¥æ‰èƒ½æŒ‡å®šè¿”å›å€¼ã€‚å‡å¦‚ä½ å¿˜äº†å†™ <code>return</code>ï¼Œé‚£è¿™ä¸ªå‡½æ•°ä»€ä¹ˆéƒ½ä¸ä¼šè¿”å›ï¼</p>
</blockquote>
<h3 id="2-5-3-ç”¨-key-ä¿æŒåˆ—è¡¨é¡¹çš„é¡ºåº"><a href="#2-5-3-ç”¨-key-ä¿æŒåˆ—è¡¨é¡¹çš„é¡ºåº" class="headerlink" title="2.5.3 ç”¨ key ä¿æŒåˆ—è¡¨é¡¹çš„é¡ºåº"></a>2.5.3 ç”¨ <code>key</code> ä¿æŒåˆ—è¡¨é¡¹çš„é¡ºåº</h3><p>å¦‚æœæŠŠä¸Šé¢ä»»ä½•ä¸€ä¸ªæ²™ç›’ç¤ºä¾‹åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼Œä½ å°±ä¼šå‘ç°æ§åˆ¶å°æœ‰è¿™æ ·ä¸€ä¸ªæŠ¥é”™ï¼š</p>
<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240927111918.png"></p>
<p>è¿™æ˜¯å› ä¸ºä½ å¿…é¡»ç»™æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹éƒ½æŒ‡å®šä¸€ä¸ª <code>key</code>â€”â€”å®ƒå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—çš„å½¢å¼ï¼Œåªè¦èƒ½å”¯ä¸€æ ‡è¯†å‡ºå„ä¸ªæ•°ç»„é¡¹å°±è¡Œï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li key=&#123;person.<span class="property">id</span>&#125;&gt;...&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç›´æ¥æ”¾åœ¨ <code>map()</code> æ–¹æ³•é‡Œçš„ JSX å…ƒç´ ä¸€èˆ¬éƒ½éœ€è¦æŒ‡å®š <code>key</code> å€¼ï¼</p>
</blockquote>
<p>è¿™äº› key ä¼šå‘Šè¯‰ Reactï¼Œæ¯ä¸ªç»„ä»¶å¯¹åº”ç€æ•°ç»„é‡Œçš„å“ªä¸€é¡¹ï¼Œæ‰€ä»¥ React å¯ä»¥æŠŠå®ƒä»¬åŒ¹é…èµ·æ¥ã€‚è¿™åœ¨æ•°ç»„é¡¹è¿›è¡Œç§»åŠ¨ï¼ˆä¾‹å¦‚æ’åºï¼‰ã€æ’å…¥æˆ–åˆ é™¤ç­‰æ“ä½œæ—¶éå¸¸é‡è¦ã€‚ä¸€ä¸ªåˆé€‚çš„ <code>key</code> å¯ä»¥å¸®åŠ© React æ¨æ–­å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä»è€Œå¾—ä»¥æ­£ç¡®åœ°æ›´æ–° DOM æ ‘ã€‚</p>
<p>ç”¨ä½œ key çš„å€¼åº”è¯¥åœ¨æ•°æ®ä¸­æå‰å°±å‡†å¤‡å¥½ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶æ‰éšæ‰‹ç”Ÿæˆï¼š</p>
<p><code>App.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; people &#125; <span class="keyword">from</span> <span class="string">&#x27;./data.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; getImageUrl &#125; <span class="keyword">from</span> <span class="string">&#x27;./utils.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">List</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> listItems = people.<span class="title function_">map</span>(<span class="function"><span class="params">person</span> =&gt;</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;person.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&#123;getImageUrl(person)&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&#123;person.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">b</span>&gt;</span>&#123;person.name&#125;<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;&#x27; &#x27; + person.profession + &#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">          å› &#123;person.accomplishment&#125;è€Œé—»åä¸–ç•Œ</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;listItems&#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>data.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> people = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">0</span>, <span class="comment">// åœ¨ JSX ä¸­ä½œä¸º key ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;å‡¯ç‘Ÿç³Â·çº¦ç¿°é€Š&#x27;</span>,</span><br><span class="line">    <span class="attr">profession</span>: <span class="string">&#x27;æ•°å­¦å®¶&#x27;</span>,</span><br><span class="line">    <span class="attr">accomplishment</span>: <span class="string">&#x27;å¤ªç©ºé£è¡Œç›¸å…³æ•°å€¼çš„æ ¸ç®—&#x27;</span>,</span><br><span class="line">    <span class="attr">imageId</span>: <span class="string">&#x27;MK3eW3A&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>, <span class="comment">// åœ¨ JSX ä¸­ä½œä¸º key ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;é©¬é‡Œå¥¥Â·è«åˆ©çº³&#x27;</span>,</span><br><span class="line">    <span class="attr">profession</span>: <span class="string">&#x27;åŒ–å­¦å®¶&#x27;</span>,</span><br><span class="line">    <span class="attr">accomplishment</span>: <span class="string">&#x27;åŒ—æè‡­æ°§ç©ºæ´çš„å‘ç°&#x27;</span>,</span><br><span class="line">    <span class="attr">imageId</span>: <span class="string">&#x27;mynHUSa&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">2</span>, <span class="comment">// åœ¨ JSX ä¸­ä½œä¸º key ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ç©†ç½•é»˜å¾·Â·é˜¿åœæœå‹’Â·è¨æ‹‰å§†&#x27;</span>,</span><br><span class="line">    <span class="attr">profession</span>: <span class="string">&#x27;ç‰©ç†å­¦å®¶&#x27;</span>,</span><br><span class="line">    <span class="attr">accomplishment</span>: <span class="string">&#x27;å…³äºåŸºæœ¬ç²’å­é—´å¼±ç›¸äº’ä½œç”¨å’Œç”µç£ç›¸äº’ä½œç”¨çš„ç»Ÿä¸€ç†è®º&#x27;</span>,</span><br><span class="line">    <span class="attr">imageId</span>: <span class="string">&#x27;bE7W1ji&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">3</span>, <span class="comment">// åœ¨ JSX ä¸­ä½œä¸º key ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;ç€è¥¿Â·è±æ¸©Â·æœ±åˆ©äºš&#x27;</span>,</span><br><span class="line">    <span class="attr">profession</span>: <span class="string">&#x27;åŒ–å­¦å®¶&#x27;</span>,</span><br><span class="line">    <span class="attr">accomplishment</span>: <span class="string">&#x27;å¼€åˆ›æ€§çš„å¯çš„æ¾è¯ç‰©ã€ç±»å›ºé†‡å’Œé¿å­•è¯&#x27;</span>,</span><br><span class="line">    <span class="attr">imageId</span>: <span class="string">&#x27;IOjWm71&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">4</span>, <span class="comment">// åœ¨ JSX ä¸­ä½œä¸º key ä½¿ç”¨</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;è‹å¸ƒæ‹‰é©¬å°¼æ‰¬Â·é’±å¾·æ‹‰å¡å¡&#x27;</span>,</span><br><span class="line">    <span class="attr">profession</span>: <span class="string">&#x27;å¤©ä½“ç‰©ç†å­¦å®¶&#x27;</span>,</span><br><span class="line">    <span class="attr">accomplishment</span>: <span class="string">&#x27;ç™½çŸ®æ˜Ÿè´¨é‡è®¡ç®—&#x27;</span>,</span><br><span class="line">    <span class="attr">imageId</span>: <span class="string">&#x27;lrWQx8l&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="2-5-4-å¦‚ä½•è®¾ç½®-key-å€¼"><a href="#2-5-4-å¦‚ä½•è®¾ç½®-key-å€¼" class="headerlink" title="2.5.4 å¦‚ä½•è®¾ç½® key å€¼"></a>2.5.4 å¦‚ä½•è®¾ç½® key å€¼</h3><p>ä¸åŒæ¥æºçš„æ•°æ®å¾€å¾€å¯¹åº”ä¸åŒçš„ key å€¼è·å–æ–¹å¼ï¼š</p>
<ul>
<li><strong>æ¥è‡ªæ•°æ®åº“çš„æ•°æ®ï¼š</strong> å¦‚æœä½ çš„æ•°æ®æ˜¯ä»æ•°æ®åº“ä¸­è·å–çš„ï¼Œé‚£ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨æ•°æ®è¡¨ä¸­çš„ä¸»é”®ï¼Œå› ä¸ºå®ƒä»¬å¤©ç„¶å…·æœ‰å”¯ä¸€æ€§ã€‚</li>
<li><strong>æœ¬åœ°äº§ç”Ÿæ•°æ®ï¼š</strong> å¦‚æœä½ æ•°æ®çš„äº§ç”Ÿå’Œä¿å­˜éƒ½åœ¨æœ¬åœ°ï¼ˆä¾‹å¦‚ç¬”è®°è½¯ä»¶é‡Œçš„ç¬”è®°ï¼‰ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªè‡ªå¢è®¡æ•°å™¨æˆ–è€…ä¸€ä¸ªç±»ä¼¼ <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/uuid"><code>uuid</code></a> çš„åº“æ¥ç”Ÿæˆ keyã€‚</li>
</ul>
<p><strong>key éœ€è¦æ»¡è¶³çš„æ¡ä»¶</strong></p>
<ul>
<li><strong>key å€¼åœ¨å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</strong> ä¸è¿‡ä¸è¦æ±‚å…¨å±€å”¯ä¸€ï¼Œåœ¨ä¸åŒçš„æ•°ç»„ä¸­å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ keyã€‚</li>
<li><strong>key å€¼ä¸èƒ½æ”¹å˜</strong>ï¼Œå¦åˆ™å°±å¤±å»äº†ä½¿ç”¨ key çš„æ„ä¹‰ï¼æ‰€ä»¥åƒä¸‡ä¸è¦åœ¨æ¸²æŸ“æ—¶åŠ¨æ€åœ°ç”Ÿæˆ keyã€‚</li>
</ul>
<p><strong>React ä¸­ä¸ºä»€ä¹ˆéœ€è¦ keyï¼Ÿ</strong></p>
<p>è®¾æƒ³ä¸€ä¸‹ï¼Œå‡å¦‚ä½ æ¡Œé¢ä¸Šçš„æ–‡ä»¶éƒ½æ²¡æœ‰æ–‡ä»¶åï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä½ éœ€è¦é€šè¿‡æ–‡ä»¶çš„ä½ç½®é¡ºåºæ¥åŒºåˆ†å®ƒä»¬â€”â€”â€”ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œç¬¬äºŒä¸ªæ–‡ä»¶ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä¹Ÿè®¸ä½ ä¹Ÿä¸æ˜¯ä¸èƒ½æ¥å—è¿™ç§æ–¹å¼ï¼Œå¯æ˜¯ä¸€æ—¦ä½ åˆ é™¤äº†å…¶ä¸­çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ç§ç»„ç»‡æ–¹å¼å°±ä¼šå˜å¾—æ··ä¹±æ— æ¯”ã€‚åŸæ¥çš„ç¬¬äºŒä¸ªæ–‡ä»¶å¯èƒ½ä¼šå˜æˆç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œç¬¬ä¸‰ä¸ªæ–‡ä»¶ä¼šæˆä¸ºç¬¬äºŒä¸ªæ–‡ä»¶â€¦â€¦</p>
<p>React é‡Œéœ€è¦ key å’Œæ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶éœ€è¦æœ‰æ–‡ä»¶åçš„é“ç†æ˜¯ç±»ä¼¼çš„ã€‚å®ƒä»¬ï¼ˆkey å’Œæ–‡ä»¶åï¼‰éƒ½è®©æˆ‘ä»¬å¯ä»¥ä»ä¼—å¤šçš„å…„å¼Ÿå…ƒç´ ä¸­å”¯ä¸€æ ‡è¯†å‡ºæŸä¸€é¡¹ï¼ˆJSX èŠ‚ç‚¹æˆ–æ–‡ä»¶ï¼‰ã€‚è€Œä¸€ä¸ªç²¾å¿ƒé€‰æ‹©çš„ key å€¼æ‰€èƒ½æä¾›çš„ä¿¡æ¯è¿œè¿œä¸æ­¢äºè¿™ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚å³ä½¿å…ƒç´ çš„ä½ç½®åœ¨æ¸²æŸ“çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†æ”¹å˜ï¼Œå®ƒæä¾›çš„ <code>key</code> å€¼ä¹Ÿèƒ½è®© React åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ä¸€ç›´è®¤å¾—å®ƒã€‚</p>
<blockquote>
<p>ä½ å¯èƒ½ä¼šæƒ³ç›´æ¥æŠŠæ•°ç»„é¡¹çš„ç´¢å¼•å½“ä½œ key å€¼æ¥ç”¨ï¼Œå®é™…ä¸Šï¼Œå¦‚æœä½ æ²¡æœ‰æ˜¾å¼åœ°æŒ‡å®š <code>key</code> å€¼ï¼ŒReact ç¡®å®é»˜è®¤ä¼šè¿™ä¹ˆåšã€‚ä½†æ˜¯æ•°ç»„é¡¹çš„é¡ºåºåœ¨æ’å…¥ã€åˆ é™¤æˆ–è€…é‡æ–°æ’åºç­‰æ“ä½œä¸­ä¼šå‘ç”Ÿæ”¹å˜ï¼Œæ­¤æ—¶æŠŠç´¢å¼•é¡ºåºç”¨ä½œ key å€¼ä¼šäº§ç”Ÿä¸€äº›å¾®å¦™ä¸”ä»¤äººå›°æƒ‘çš„ bugã€‚</p>
<p>ä¸ä¹‹ç±»ä¼¼ï¼Œè¯·ä¸è¦åœ¨è¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€åœ°äº§ç”Ÿ keyï¼Œåƒæ˜¯ <code>key=&#123;Math.random()&#125;</code> è¿™ç§æ–¹å¼ã€‚è¿™ä¼šå¯¼è‡´æ¯æ¬¡é‡æ–°æ¸²æŸ“åçš„ key å€¼éƒ½ä¸ä¸€æ ·ï¼Œä»è€Œä½¿å¾—æ‰€æœ‰çš„ç»„ä»¶å’Œ DOM å…ƒç´ æ¯æ¬¡éƒ½è¦é‡æ–°åˆ›å»ºã€‚è¿™ä¸ä»…ä¼šé€ æˆè¿è¡Œå˜æ…¢çš„é—®é¢˜ï¼Œæ›´æœ‰å¯èƒ½å¯¼è‡´ç”¨æˆ·è¾“å…¥çš„ä¸¢å¤±ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨èƒ½ä»ç»™å®šæ•°æ®ä¸­ç¨³å®šå–å¾—çš„å€¼æ‰æ˜¯æ˜æ™ºçš„é€‰æ‹©ã€‚</p>
<p>æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œç»„ä»¶ä¸ä¼šæŠŠ <code>key</code> å½“ä½œ props çš„ä¸€éƒ¨åˆ†ã€‚Key çš„å­˜åœ¨åªå¯¹ React æœ¬èº«èµ·åˆ°æç¤ºä½œç”¨ã€‚å¦‚æœä½ çš„ç»„ä»¶éœ€è¦ä¸€ä¸ª IDï¼Œé‚£ä¹ˆè¯·æŠŠå®ƒä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ prop ä¼ ç»™ç»„ä»¶ï¼š <code>&lt;Profile key=&#123;id&#125; userId=&#123;id&#125; /&gt;</code>ã€‚</p>
</blockquote>
<h2 id="2-6-ä¿æŒç»„ä»¶çº¯ç²¹"><a href="#2-6-ä¿æŒç»„ä»¶çº¯ç²¹" class="headerlink" title="2.6 ä¿æŒç»„ä»¶çº¯ç²¹"></a>2.6 ä¿æŒç»„ä»¶çº¯ç²¹</h2><p>éƒ¨åˆ† JavaScript å‡½æ•°æ˜¯ <strong>çº¯ç²¹</strong> çš„ï¼Œè¿™ç±»å‡½æ•°é€šå¸¸è¢«ç§°ä¸ºçº¯å‡½æ•°ã€‚çº¯å‡½æ•°ä»…æ‰§è¡Œè®¡ç®—æ“ä½œï¼Œä¸åšå…¶ä»–æ“ä½œã€‚ä½ å¯ä»¥é€šè¿‡å°†ç»„ä»¶æŒ‰çº¯å‡½æ•°ä¸¥æ ¼ç¼–å†™ï¼Œä»¥é¿å…ä¸€äº›éšç€ä»£ç åº“çš„å¢é•¿è€Œå‡ºç°çš„ã€ä»¤äººå›°æ‰°çš„ bug ä»¥åŠä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚ä½†ä¸ºäº†è·å¾—è¿™äº›å¥½å¤„ï¼Œä½ éœ€è¦éµå¾ªä¸€äº›è§„åˆ™ã€‚</p>
<h3 id="2-6-1-çº¯å‡½æ•°ï¼šç»„ä»¶ä½œä¸ºå…¬å¼"><a href="#2-6-1-çº¯å‡½æ•°ï¼šç»„ä»¶ä½œä¸ºå…¬å¼" class="headerlink" title="2.6.1 çº¯å‡½æ•°ï¼šç»„ä»¶ä½œä¸ºå…¬å¼"></a>2.6.1 çº¯å‡½æ•°ï¼šç»„ä»¶ä½œä¸ºå…¬å¼</h3><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ˆå°¤å…¶æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸–ç•Œä¸­ï¼‰ï¼Œ<a target="_blank" rel="noopener" href="https://wikipedia.org/wiki/Pure_function">çº¯å‡½æ•°</a> é€šå¸¸å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š</p>
<ul>
<li><strong>åªè´Ÿè´£è‡ªå·±çš„ä»»åŠ¡</strong>ã€‚å®ƒä¸ä¼šæ›´æ”¹åœ¨è¯¥å‡½æ•°è°ƒç”¨å‰å°±å·²å­˜åœ¨çš„å¯¹è±¡æˆ–å˜é‡ã€‚</li>
<li><strong>è¾“å…¥ç›¸åŒï¼Œåˆ™è¾“å‡ºç›¸åŒ</strong>ã€‚ç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œçº¯å‡½æ•°åº”æ€»æ˜¯è¿”å›ç›¸åŒçš„ç»“æœã€‚</li>
</ul>
<p>ä¸¾ä¸ªä½ éå¸¸ç†Ÿæ‚‰çš„çº¯å‡½æ•°ç¤ºä¾‹ï¼šæ•°å­¦ä¸­çš„å…¬å¼ã€‚</p>
<p>è€ƒè™‘å¦‚ä¸‹æ•°å­¦å…¬å¼ï¼šy &#x3D; 2xã€‚</p>
<p>è‹¥ x &#x3D; 2 åˆ™ y &#x3D; 4ã€‚æ°¸è¿œå¦‚æ­¤ã€‚</p>
<p>è‹¥ x &#x3D; 3 åˆ™ y &#x3D; 6ã€‚æ°¸è¿œå¦‚æ­¤ã€‚</p>
<p>è‹¥ x &#x3D; 3ï¼Œé‚£ä¹ˆ y å¹¶ä¸ä¼šå› ä¸ºæ—¶é—´æˆ–è‚¡å¸‚çš„å½±å“ï¼Œè€Œæœ‰æ—¶ç­‰äº 9 ã€ â€“1 æˆ– 2.5ã€‚</p>
<p>è‹¥ y &#x3D; 2x ä¸” x &#x3D; 3, é‚£ä¹ˆ y <em>æ°¸è¿œ</em> ç­‰äº 6.</p>
<p>æˆ‘ä»¬ä½¿ç”¨ JavaScript çš„å‡½æ•°å®ç°ï¼Œçœ‹èµ·æ¥å°†ä¼šæ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">double</span>(<span class="params">number</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span> * number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ<code>double()</code> å°±æ˜¯ä¸€ä¸ª <strong>çº¯å‡½æ•°</strong>ã€‚å¦‚æœä½ ä¼ å…¥ <code>3</code> ï¼Œå®ƒå°†æ€»æ˜¯è¿”å› <code>6</code> ã€‚</p>
<p>React ä¾¿å›´ç»•ç€è¿™ä¸ªæ¦‚å¿µè¿›è¡Œè®¾è®¡ã€‚<strong>React å‡è®¾ä½ ç¼–å†™çš„æ‰€æœ‰ç»„ä»¶éƒ½æ˜¯çº¯å‡½æ•°</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥ï¼Œä½ æ‰€ç¼–å†™çš„ React ç»„ä»¶å¿…é¡»æ€»æ˜¯è¿”å›ç›¸åŒçš„ JSXã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Recipe</span>(<span class="params">&#123; drinkers &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ol</span>&gt;</span>    </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Boil &#123;drinkers&#125; cups of water.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Add &#123;drinkers&#125; spoons of tea and &#123;0.5 * drinkers&#125; spoons of spice.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>Add &#123;0.5 * drinkers&#125; cups of milk to boil and sugar to taste.<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Spiced Chai Recipe<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>For two<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Recipe</span> <span class="attr">drinkers</span>=<span class="string">&#123;2&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>For a gathering<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Recipe</span> <span class="attr">drinkers</span>=<span class="string">&#123;4&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ä½ ç»™å‡½æ•° <code>Recipe</code> ä¼ å…¥ <code>drinkers=&#123;2&#125;</code> å‚æ•°æ—¶ï¼Œå®ƒå°†è¿”å›åŒ…å« <code>2 cups of water</code> çš„ JSXã€‚æ°¸è¿œå¦‚æ­¤ã€‚</p>
<p>è€Œå½“ä½ ä¼ å…¥ <code>drinkers=&#123;4&#125;</code> æ—¶ï¼Œå®ƒå°†è¿”å›åŒ…å« <code>4 cups of water</code> çš„ JSXã€‚æ°¸è¿œå¦‚æ­¤ã€‚</p>
<p>å°±åƒæ•°å­¦å…¬å¼ä¸€æ ·ã€‚</p>
<p>ä½ å¯ä»¥æŠŠä½ çš„ç»„ä»¶å½“ä½œé£Ÿè°±ï¼šå¦‚æœä½ éµå¾ªå®ƒä»¬ï¼Œå¹¶ä¸”åœ¨çƒ¹é¥ªè¿‡ç¨‹ä¸­ä¸å¼•å…¥æ–°é£Ÿæï¼Œä½ æ¯æ¬¡éƒ½ä¼šå¾—åˆ°ç›¸åŒçš„èœè‚´ã€‚é‚£è¿™é“ â€œèœè‚´â€ å°±æ˜¯ç»„ä»¶ç”¨äº React <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/render-and-commit">æ¸²æŸ“</a> çš„ JSXã€‚</p>
<h3 id="2-6-2-å‰¯ä½œç”¨ï¼šï¼ˆä¸ç¬¦åˆï¼‰é¢„æœŸçš„åæœ"><a href="#2-6-2-å‰¯ä½œç”¨ï¼šï¼ˆä¸ç¬¦åˆï¼‰é¢„æœŸçš„åæœ" class="headerlink" title="2.6.2 å‰¯ä½œç”¨ï¼šï¼ˆä¸ç¬¦åˆï¼‰é¢„æœŸçš„åæœ"></a>2.6.2 å‰¯ä½œç”¨ï¼šï¼ˆä¸ç¬¦åˆï¼‰é¢„æœŸçš„åæœ</h3><p>React çš„æ¸²æŸ“è¿‡ç¨‹å¿…é¡»è‡ªå§‹è‡³ç»ˆæ˜¯çº¯ç²¹çš„ã€‚ç»„ä»¶åº”è¯¥åª <strong>è¿”å›</strong> å®ƒä»¬çš„ JSXï¼Œè€Œä¸ <strong>æ”¹å˜</strong> åœ¨æ¸²æŸ“å‰ï¼Œå°±å·²å­˜åœ¨çš„ä»»ä½•å¯¹è±¡æˆ–å˜é‡ â€” è¿™å°†ä¼šä½¿å®ƒä»¬å˜å¾—ä¸çº¯ç²¹ï¼</p>
<p>ä»¥ä¸‹æ˜¯è¿åè¿™ä¸€è§„åˆ™çš„ç»„ä»¶ç¤ºä¾‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> guest = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Cup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// Badï¼šæ­£åœ¨æ›´æ”¹é¢„å…ˆå­˜åœ¨çš„å˜é‡ï¼</span></span><br><span class="line">  guest = guest + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Tea cup for guest #&#123;guest&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TeaSet</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Cup</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Cup</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Cup</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥ç»„ä»¶æ­£åœ¨è¯»å†™å…¶å¤–éƒ¨å£°æ˜çš„ <code>guest</code> å˜é‡ã€‚è¿™æ„å‘³ç€ <strong>å¤šæ¬¡è°ƒç”¨è¿™ä¸ªç»„ä»¶ä¼šäº§ç”Ÿä¸åŒçš„ JSX</strong>ï¼å¹¶ä¸”ï¼Œå¦‚æœ <strong>å…¶ä»–</strong> ç»„ä»¶è¯»å– <code>guest</code> ï¼Œå®ƒä»¬ä¹Ÿä¼šäº§ç”Ÿä¸åŒçš„ JSXï¼Œå…¶ç»“æœå–å†³äºå®ƒä»¬ä½•æ—¶è¢«æ¸²æŸ“ï¼è¿™æ˜¯æ— æ³•é¢„æµ‹çš„ã€‚</p>
<p>å›åˆ°æˆ‘ä»¬çš„å…¬å¼ y &#x3D; 2x ï¼Œç°åœ¨å³ä½¿ x &#x3D; 2 ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½ç›¸ä¿¡ y &#x3D; 4 ã€‚æˆ‘ä»¬çš„æµ‹è¯•å¯èƒ½ä¼šå¤±è´¥ï¼Œæˆ‘ä»¬çš„ç”¨æˆ·å¯èƒ½ä¼šæ„Ÿåˆ°å›°æ‰°ï¼Œé£æœºå¯èƒ½ä¼šä»å¤©ç©ºå æ¯â€”â€”ä½ å°†çœ‹åˆ°è¿™ä¼šå¼•å‘å¤šä¹ˆæ‰‘æœ”è¿·ç¦»çš„ bugsï¼</p>
<p>ä½ å¯ä»¥ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/passing-props-to-a-component">å°† <code>guest</code> ä½œä¸º prop ä¼ å…¥</a> æ¥ä¿®å¤æ­¤ç»„ä»¶ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Cup</span>(<span class="params">&#123; guest &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Tea cup for guest #&#123;guest&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TeaSet</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Cup</span> <span class="attr">guest</span>=<span class="string">&#123;1&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Cup</span> <span class="attr">guest</span>=<span class="string">&#123;2&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Cup</span> <span class="attr">guest</span>=<span class="string">&#123;3&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ çš„ç»„ä»¶å°±æ˜¯çº¯ç²¹çš„ï¼Œå› ä¸ºå®ƒè¿”å›çš„ JSX åªä¾èµ–äº <code>guest</code> propã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œä½ ä¸åº”è¯¥æœŸæœ›ä½ çš„ç»„ä»¶ä»¥ä»»ä½•ç‰¹å®šçš„é¡ºåºè¢«æ¸²æŸ“ã€‚è°ƒç”¨ y &#x3D; 5x å’Œ y &#x3D; 2x çš„å…ˆåé¡ºåºå¹¶ä¸é‡è¦ï¼šè¿™ä¸¤ä¸ªå…¬å¼ç›¸äº’ç‹¬ç«‹ã€‚åŒæ ·åœ°ï¼Œæ¯ä¸ªç»„ä»¶ä¹Ÿåº”è¯¥â€œç‹¬ç«‹æ€è€ƒâ€ï¼Œè€Œä¸æ˜¯åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è¯•å›¾ä¸å…¶ä»–ç»„ä»¶åè°ƒï¼Œæˆ–è€…ä¾èµ–äºå…¶ä»–ç»„ä»¶ã€‚æ¸²æŸ“è¿‡ç¨‹å°±åƒæ˜¯ä¸€åœºå­¦æ ¡è€ƒè¯•ï¼šæ¯ä¸ªç»„ä»¶éƒ½åº”è¯¥è‡ªå·±è®¡ç®— JSXï¼</p>
<blockquote>
<p>å°½ç®¡ä½ å¯èƒ½è¿˜æ²¡ä½¿ç”¨è¿‡ï¼Œä½†åœ¨ React ä¸­ï¼Œä½ å¯ä»¥åœ¨æ¸²æŸ“æ—¶è¯»å–ä¸‰ç§è¾“å…¥ï¼š<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/passing-props-to-a-component">props</a>ï¼Œ<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-a-components-memory">state</a> å’Œ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/passing-data-deeply-with-context">context</a>ã€‚ä½ åº”è¯¥å§‹ç»ˆå°†è¿™äº›è¾“å…¥è§†ä¸ºåªè¯»ã€‚</p>
<p>å½“ä½ æƒ³æ ¹æ®ç”¨æˆ·è¾“å…¥ <em>æ›´æ”¹</em> æŸäº›å†…å®¹æ—¶ï¼Œä½ åº”è¯¥ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-a-components-memory">è®¾ç½®çŠ¶æ€</a>ï¼Œè€Œä¸æ˜¯ç›´æ¥å†™å…¥å˜é‡ã€‚å½“ä½ çš„ç»„ä»¶æ­£åœ¨æ¸²æŸ“æ—¶ï¼Œä½ æ°¸è¿œä¸åº”è¯¥æ”¹å˜é¢„å…ˆå­˜åœ¨çš„å˜é‡æˆ–å¯¹è±¡ã€‚</p>
<p>React æä¾›äº† â€œä¸¥æ ¼æ¨¡å¼â€ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¼€å‘æ—¶ï¼Œå®ƒå°†ä¼šè°ƒç”¨æ¯ä¸ªç»„ä»¶å‡½æ•°ä¸¤æ¬¡ã€‚<strong>é€šè¿‡é‡å¤è°ƒç”¨ç»„ä»¶å‡½æ•°ï¼Œä¸¥æ ¼æ¨¡å¼æœ‰åŠ©äºæ‰¾åˆ°è¿åè¿™äº›è§„åˆ™çš„ç»„ä»¶</strong>ã€‚</p>
<p>æˆ‘ä»¬æ³¨æ„åˆ°ï¼ŒåŸå§‹ç¤ºä¾‹æ˜¾ç¤ºçš„æ˜¯ â€œGuest #2â€ã€â€œGuest #4â€ å’Œ â€œGuest #6â€ï¼Œè€Œä¸æ˜¯ â€œGuest #1â€ã€â€œGuest #2â€ å’Œ â€œGuest #3â€ã€‚åŸæ¥çš„å‡½æ•°å¹¶ä¸çº¯ç²¹ï¼Œå› æ­¤è°ƒç”¨å®ƒä¸¤æ¬¡å°±å‡ºç°äº†é—®é¢˜ã€‚ä½†å¯¹äºä¿®å¤åçš„çº¯å‡½æ•°ç‰ˆæœ¬ï¼Œå³ä½¿è°ƒç”¨è¯¥å‡½æ•°ä¸¤æ¬¡ä¹Ÿèƒ½å¾—åˆ°æ­£ç¡®ç»“æœã€‚<strong>çº¯å‡½æ•°ä»…ä»…æ‰§è¡Œè®¡ç®—ï¼Œå› æ­¤è°ƒç”¨å®ƒä»¬ä¸¤æ¬¡ä¸ä¼šæ”¹å˜ä»»ä½•ä¸œè¥¿</strong> â€” å°±åƒä¸¤æ¬¡è°ƒç”¨ <code>double(2)</code> å¹¶ä¸ä¼šæ”¹å˜è¿”å›å€¼ï¼Œä¸¤æ¬¡æ±‚è§£ y &#x3D; 2x ä¸ä¼šæ”¹å˜ y çš„å€¼ä¸€æ ·ã€‚ç›¸åŒçš„è¾“å…¥ï¼Œæ€»æ˜¯è¿”å›ç›¸åŒçš„è¾“å‡ºã€‚</p>
<p>ä¸¥æ ¼æ¨¡å¼åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¸ç”Ÿæ•ˆï¼Œå› æ­¤å®ƒä¸ä¼šé™ä½åº”ç”¨ç¨‹åºçš„é€Ÿåº¦ã€‚å¦‚éœ€å¼•å…¥ä¸¥æ ¼æ¨¡å¼ï¼Œä½ å¯ä»¥ç”¨ <code>&lt;React.StrictMode&gt;</code> åŒ…è£¹æ ¹ç»„ä»¶ã€‚ä¸€äº›æ¡†æ¶ä¼šé»˜è®¤è¿™æ ·åšã€‚</p>
</blockquote>
<h3 id="2-6-3-å±€éƒ¨-mutationï¼šç»„ä»¶çš„å°ç§˜å¯†"><a href="#2-6-3-å±€éƒ¨-mutationï¼šç»„ä»¶çš„å°ç§˜å¯†" class="headerlink" title="2.6.3 å±€éƒ¨ mutationï¼šç»„ä»¶çš„å°ç§˜å¯†"></a>2.6.3 å±€éƒ¨ mutationï¼šç»„ä»¶çš„å°ç§˜å¯†</h3><p>ä¸Šè¿°ç¤ºä¾‹çš„é—®é¢˜å‡ºåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œç»„ä»¶æ”¹å˜äº† <strong>é¢„å…ˆå­˜åœ¨çš„</strong> å˜é‡çš„å€¼ã€‚ä¸ºäº†è®©å®ƒå¬èµ·æ¥æ›´å¯æ€•ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†è¿™ç§ç°è±¡ç§°ä¸º <strong>çªå˜ï¼ˆmutationï¼‰</strong> ã€‚çº¯å‡½æ•°ä¸ä¼šæ”¹å˜å‡½æ•°ä½œç”¨åŸŸå¤–çš„å˜é‡ã€æˆ–åœ¨å‡½æ•°è°ƒç”¨å‰åˆ›å»ºçš„å¯¹è±¡â€”â€”è¿™ä¼šä½¿å‡½æ•°å˜å¾—ä¸çº¯ç²¹ï¼</p>
<p>ä½†æ˜¯ï¼Œ<strong>ä½ å®Œå…¨å¯ä»¥åœ¨æ¸²æŸ“æ—¶æ›´æ”¹ä½  <em>åˆšåˆš</em> åˆ›å»ºçš„å˜é‡å’Œå¯¹è±¡</strong>ã€‚åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œä½ åˆ›å»ºä¸€ä¸ª <code>[]</code> æ•°ç»„ï¼Œå°†å…¶åˆ†é…ç»™ä¸€ä¸ª <code>cups</code> å˜é‡ï¼Œç„¶å <code>push</code> ä¸€æ‰“ cup è¿›å»ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Cup</span>(<span class="params">&#123; guest &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Tea cup for guest #&#123;guest&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TeaGathering</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> cups = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="number">12</span>; i++) &#123;</span><br><span class="line">    cups.<span class="title function_">push</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Cup</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span> <span class="attr">guest</span>=<span class="string">&#123;i&#125;</span> /&gt;</span></span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cups;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ <code>cups</code> å˜é‡æˆ– <code>[]</code> æ•°ç»„æ˜¯åœ¨ <code>TeaGathering</code> å‡½æ•°ä¹‹å¤–åˆ›å»ºçš„ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼å› ä¸ºå¦‚æœé‚£æ ·çš„è¯ï¼Œå½“ä½ è°ƒç”¨æ•°ç»„çš„ push æ–¹æ³•æ—¶ï¼Œå°±ä¼šæ›´æ”¹ <strong>é¢„å…ˆå­˜åœ¨çš„</strong> å¯¹è±¡ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™é‡Œä¸ä¼šæœ‰å½±å“ï¼Œå› ä¸ºæ¯æ¬¡æ¸²æŸ“æ—¶ï¼Œä½ éƒ½æ˜¯åœ¨ <code>TeaGathering</code> å‡½æ•°å†…éƒ¨åˆ›å»ºçš„å®ƒä»¬ã€‚<code>TeaGathering</code> ä¹‹å¤–çš„ä»£ç å¹¶ä¸ä¼šçŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆã€‚è¿™å°±è¢«ç§°ä¸º <strong>â€œå±€éƒ¨ mutationâ€</strong> â€” å¦‚åŒè—åœ¨ç»„ä»¶é‡Œçš„å°ç§˜å¯†ã€‚</p>
<h3 id="2-6-4-å“ªäº›åœ°æ–¹-å¯èƒ½-å¼•å‘å‰¯ä½œç”¨"><a href="#2-6-4-å“ªäº›åœ°æ–¹-å¯èƒ½-å¼•å‘å‰¯ä½œç”¨" class="headerlink" title="2.6.4 å“ªäº›åœ°æ–¹ å¯èƒ½ å¼•å‘å‰¯ä½œç”¨"></a>2.6.4 å“ªäº›åœ°æ–¹ <strong>å¯èƒ½</strong> å¼•å‘å‰¯ä½œç”¨</h3><p>å‡½æ•°å¼ç¼–ç¨‹åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºçº¯å‡½æ•°ï¼Œä½† <strong>æŸäº›äº‹ç‰©</strong> åœ¨ç‰¹å®šæƒ…å†µä¸‹ä¸å¾—ä¸å‘ç”Ÿæ”¹å˜ã€‚è¿™æ˜¯ç¼–ç¨‹çš„è¦ä¹‰ï¼è¿™äº›å˜åŠ¨åŒ…æ‹¬æ›´æ–°å±å¹•ã€å¯åŠ¨åŠ¨ç”»ã€æ›´æ”¹æ•°æ®ç­‰ï¼Œå®ƒä»¬è¢«ç§°ä¸º <strong>å‰¯ä½œç”¨</strong>ã€‚å®ƒä»¬æ˜¯ <strong>â€œé¢å¤–â€</strong> å‘ç”Ÿçš„äº‹æƒ…ï¼Œä¸æ¸²æŸ“è¿‡ç¨‹æ— å…³ã€‚</p>
<p>åœ¨ React ä¸­ï¼Œ**å‰¯ä½œç”¨é€šå¸¸å±äº <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/responding-to-events">äº‹ä»¶å¤„ç†ç¨‹åº</a>**ã€‚äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯ React åœ¨ä½ æ‰§è¡ŒæŸäº›æ“ä½œï¼ˆå¦‚å•å‡»æŒ‰é’®ï¼‰æ—¶è¿è¡Œçš„å‡½æ•°ã€‚å³ä½¿äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯åœ¨ä½ çš„ç»„ä»¶ <strong>å†…éƒ¨</strong> å®šä¹‰çš„ï¼Œå®ƒä»¬ä¹Ÿä¸ä¼šåœ¨æ¸²æŸ“æœŸé—´è¿è¡Œï¼ <strong>å› æ­¤äº‹ä»¶å¤„ç†ç¨‹åºæ— éœ€æ˜¯çº¯å‡½æ•°</strong>ã€‚</p>
<p>å¦‚æœä½ ç”¨å°½ä¸€åˆ‡åŠæ³•ï¼Œä»æ— æ³•ä¸ºå‰¯ä½œç”¨æ‰¾åˆ°åˆé€‚çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä½ è¿˜å¯ä»¥è°ƒç”¨ç»„ä»¶ä¸­çš„ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/useEffect"><code>useEffect</code></a> æ–¹æ³•å°†å…¶é™„åŠ åˆ°è¿”å›çš„ JSX ä¸­ã€‚è¿™ä¼šå‘Šè¯‰ React åœ¨æ¸²æŸ“ç»“æŸåæ‰§è¡Œå®ƒã€‚<strong>ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•åº”è¯¥æ˜¯ä½ æœ€åçš„æ‰‹æ®µ</strong>ã€‚</p>
<blockquote>
<h4 id="React-ä¸ºä½•ä¾§é‡äºçº¯å‡½æ•°"><a href="#React-ä¸ºä½•ä¾§é‡äºçº¯å‡½æ•°" class="headerlink" title="React ä¸ºä½•ä¾§é‡äºçº¯å‡½æ•°?"></a>React ä¸ºä½•ä¾§é‡äºçº¯å‡½æ•°?</h4><p>ç¼–å†™çº¯å‡½æ•°éœ€è¦éµå¾ªä¸€äº›ä¹ æƒ¯å’Œè§„ç¨‹ã€‚ä½†å®ƒå¼€å¯äº†ç»å¦™çš„æœºé‡ï¼š</p>
<ul>
<li>ä½ çš„ç»„ä»¶å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹è¿è¡Œ â€” ä¾‹å¦‚ï¼Œåœ¨æœåŠ¡å™¨ä¸Šï¼ç”±äºå®ƒä»¬é’ˆå¯¹ç›¸åŒçš„è¾“å…¥ï¼Œæ€»æ˜¯è¿”å›ç›¸åŒçš„ç»“æœï¼Œå› æ­¤ä¸€ä¸ªç»„ä»¶å¯ä»¥æ»¡è¶³å¤šä¸ªç”¨æˆ·è¯·æ±‚ã€‚</li>
<li>ä½ å¯ä»¥ä¸ºé‚£äº›è¾“å…¥æœªæ›´æ”¹çš„ç»„ä»¶æ¥ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/memo">è·³è¿‡æ¸²æŸ“</a>ï¼Œä»¥æé«˜æ€§èƒ½ã€‚è¿™æ˜¯å®‰å…¨çš„åšæ³•ï¼Œå› ä¸ºçº¯å‡½æ•°æ€»æ˜¯è¿”å›ç›¸åŒçš„ç»“æœï¼Œæ‰€ä»¥å¯ä»¥å®‰å…¨åœ°ç¼“å­˜å®ƒä»¬ã€‚</li>
<li>å¦‚æœåœ¨æ¸²æŸ“æ·±å±‚ç»„ä»¶æ ‘çš„è¿‡ç¨‹ä¸­ï¼ŒæŸäº›æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼ŒReact å¯ä»¥é‡æ–°å¼€å§‹æ¸²æŸ“ï¼Œè€Œä¸ä¼šæµªè´¹æ—¶é—´å®Œæˆè¿‡æ—¶çš„æ¸²æŸ“ã€‚çº¯ç²¹æ€§ä½¿å¾—å®ƒéšæ—¶å¯ä»¥å®‰å…¨åœ°åœæ­¢è®¡ç®—ã€‚</li>
</ul>
<p>æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„æ¯ä¸ª React æ–°ç‰¹æ€§éƒ½åˆ©ç”¨åˆ°äº†çº¯å‡½æ•°ã€‚ä»æ•°æ®è·å–åˆ°åŠ¨ç”»å†åˆ°æ€§èƒ½ï¼Œä¿æŒç»„ä»¶çš„çº¯ç²¹å¯ä»¥å……åˆ†é‡Šæ”¾ React èŒƒå¼çš„èƒ½åŠ›ã€‚</p>
</blockquote>
<h3 id="2-6-5-æ‘˜è¦"><a href="#2-6-5-æ‘˜è¦" class="headerlink" title="2.6.5 æ‘˜è¦"></a>2.6.5 æ‘˜è¦</h3><ul>
<li>ä¸€ä¸ªç»„ä»¶å¿…é¡»æ˜¯çº¯ç²¹çš„ï¼Œå°±æ„å‘³ç€ï¼š<ul>
<li><strong>åªè´Ÿè´£è‡ªå·±çš„ä»»åŠ¡ã€‚</strong> å®ƒä¸ä¼šæ›´æ”¹åœ¨è¯¥å‡½æ•°è°ƒç”¨å‰å°±å·²å­˜åœ¨çš„å¯¹è±¡æˆ–å˜é‡ã€‚</li>
<li><strong>è¾“å…¥ç›¸åŒï¼Œåˆ™è¾“å‡ºç›¸åŒã€‚</strong> ç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œç»„ä»¶åº”è¯¥æ€»æ˜¯è¿”å›ç›¸åŒçš„ JSXã€‚</li>
</ul>
</li>
<li>æ¸²æŸ“éšæ—¶å¯èƒ½å‘ç”Ÿï¼Œå› æ­¤ç»„ä»¶ä¸åº”ä¾èµ–äºå½¼æ­¤çš„æ¸²æŸ“é¡ºåºã€‚</li>
<li>ä½ ä¸åº”è¯¥æ”¹å˜ä»»ä½•ç”¨äºç»„ä»¶æ¸²æŸ“çš„è¾“å…¥ã€‚è¿™åŒ…æ‹¬ propsã€state å’Œ contextã€‚é€šè¿‡ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-a-components-memory">â€œè®¾ç½®â€ state</a> æ¥æ›´æ–°ç•Œé¢ï¼Œè€Œä¸è¦æ”¹å˜é¢„å…ˆå­˜åœ¨çš„å¯¹è±¡ã€‚</li>
<li>åŠªåŠ›åœ¨ä½ è¿”å›çš„ JSX ä¸­è¡¨è¾¾ä½ çš„ç»„ä»¶é€»è¾‘ã€‚å½“ä½ éœ€è¦â€œæ”¹å˜äº‹ç‰©â€æ—¶ï¼Œä½ é€šå¸¸å¸Œæœ›åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­è¿›è¡Œã€‚ä½œä¸ºæœ€åçš„æ‰‹æ®µï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>useEffect</code>ã€‚</li>
<li>ç¼–å†™çº¯å‡½æ•°éœ€è¦ä¸€äº›ç»ƒä¹ ï¼Œä½†å®ƒå……åˆ†é‡Šæ”¾äº† React èŒƒå¼çš„èƒ½åŠ›ã€‚</li>
</ul>
<h2 id="2-7-å°†-UI-è§†ä¸ºæ ‘"><a href="#2-7-å°†-UI-è§†ä¸ºæ ‘" class="headerlink" title="2.7 å°† UI è§†ä¸ºæ ‘"></a>2.7 å°† UI è§†ä¸ºæ ‘</h2><p>å½“ React åº”ç”¨ç¨‹åºé€æ¸æˆå½¢æ—¶ï¼Œè®¸å¤šç»„ä»¶ä¼šå‡ºç°åµŒå¥—ã€‚é‚£ä¹ˆ React æ˜¯å¦‚ä½•è·Ÿè¸ªåº”ç”¨ç¨‹åºç»„ä»¶ç»“æ„çš„ï¼Ÿ</p>
<p>React ä»¥åŠè®¸å¤šå…¶ä»– UI åº“ï¼Œå°† UI å»ºæ¨¡ä¸ºæ ‘ã€‚å°†åº”ç”¨ç¨‹åºè§†ä¸ºæ ‘å¯¹äºç†è§£ç»„ä»¶ä¹‹é—´çš„å…³ç³»ä»¥åŠè°ƒè¯•æ€§èƒ½å’ŒçŠ¶æ€ç®¡ç†ç­‰æœªæ¥å°†ä¼šé‡åˆ°çš„ä¸€äº›æ¦‚å¿µéå¸¸æœ‰ç”¨ã€‚</p>
<h3 id="2-7-1-æ ‘ç»“æ„"><a href="#2-7-1-æ ‘ç»“æ„" class="headerlink" title="2.7.1 æ ‘ç»“æ„"></a>2.7.1 æ ‘ç»“æ„</h3><p>æ ‘æ˜¯é¡¹ç›®å’Œ UI ä¹‹é—´çš„å…³ç³»æ¨¡å‹ï¼Œé€šå¸¸ä½¿ç”¨æ ‘ç»“æ„æ¥è¡¨ç¤º UIã€‚ä¾‹å¦‚ï¼Œæµè§ˆå™¨ä½¿ç”¨æ ‘ç»“æ„æ¥å»ºæ¨¡ HTMLï¼ˆ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/API/Document_Object_Model/Introduction">DOM</a>ï¼‰ä¸CSSï¼ˆ<a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/API/CSS_Object_Model">CSSOM</a>ï¼‰ã€‚ç§»åŠ¨å¹³å°ä¹Ÿä½¿ç”¨æ ‘æ¥è¡¨ç¤ºå…¶è§†å›¾å±‚æ¬¡ç»“æ„ã€‚</p>
<p><img src="https://zh-hans.react.dev/_next/image?url=/images/docs/diagrams/preserving_state_dom_tree.dark.png&w=1920&q=75"></p>
<p>React ä»ç»„ä»¶ä¸­åˆ›å»º UI æ ‘ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒUI æ ‘æœ€åä¼šç”¨äºæ¸²æŸ“ DOMã€‚</p>
<p>æ°´å¹³æ’åˆ—çš„ä¸‰ä¸ªéƒ¨åˆ†çš„å›¾è¡¨ã€‚ç¬¬ä¸€éƒ¨åˆ†æœ‰ä¸‰ä¸ªå‚ç›´å †å çš„çŸ©å½¢ï¼Œå¹¶åˆ†åˆ«æ ‡è®°ä¸º Component Aã€Component B å’Œ Component Cã€‚å‘ä¸‹ä¸€ä¸ªçª—æ ¼è¿‡æ¸¡çš„æ˜¯ä¸€ä¸ªå¸¦æœ‰ React æ ‡å¿—çš„ç®­å¤´ï¼Œæ ‡è®°ä¸º Reactã€‚ä¸­é—´éƒ¨åˆ†åŒ…å«ä¸€æ£µç»„ä»¶æ ‘ï¼Œæ ¹èŠ‚ç‚¹æ ‡è®°ä¸º Aï¼Œæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹åˆ†åˆ«æ ‡è®°ä¸º B å’Œ Cã€‚ä¸‹ä¸€ä¸ªéƒ¨åˆ†å†æ¬¡ä½¿ç”¨å¸¦æœ‰ React æ ‡å¿—çš„ç®­å¤´è¿›è¡Œè¿‡æ¸¡ï¼Œæ ‡è®°ä¸º React DOMã€‚ç¬¬ä¸‰å’Œæœ€åä¸€ä¸ªéƒ¨åˆ†æ˜¯æµè§ˆå™¨çš„çº¿æ¡†å›¾ï¼ŒåŒ…å«ä¸€æ£µæœ‰ 8 ä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œå…¶ä¸­åªæœ‰ä¸€ä¸ªå­é›†è¢«çªå‡ºæ˜¾ç¤ºï¼ˆè¡¨ç¤ºä¸­é—´éƒ¨åˆ†çš„å­æ ‘ï¼‰ã€‚</p>
<p>ä¸æµè§ˆå™¨å’Œç§»åŠ¨å¹³å°ä¸€æ ·ï¼ŒReact è¿˜ä½¿ç”¨æ ‘ç»“æ„æ¥ç®¡ç†å’Œå»ºæ¨¡ React åº”ç”¨ç¨‹åºä¸­ç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€‚è¿™äº›æ ‘æ˜¯æœ‰ç”¨çš„å·¥å…·ï¼Œç”¨äºç†è§£æ•°æ®å¦‚ä½•åœ¨ React åº”ç”¨ç¨‹åºä¸­æµåŠ¨ä»¥åŠå¦‚ä½•ä¼˜åŒ–å‘ˆç°å’Œåº”ç”¨ç¨‹åºå¤§å°ã€‚</p>
<h3 id="2-7-2-æ¸²æŸ“æ ‘"><a href="#2-7-2-æ¸²æŸ“æ ‘" class="headerlink" title="2.7.2 æ¸²æŸ“æ ‘"></a>2.7.2 æ¸²æŸ“æ ‘</h3><p>ç»„ä»¶çš„ä¸€ä¸ªä¸»è¦ç‰¹æ€§æ˜¯èƒ½å¤Ÿç”±å…¶ä»–ç»„ä»¶ç»„åˆè€Œæˆã€‚åœ¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/your-first-component#nesting-and-organizing-components">åµŒå¥—ç»„ä»¶</a> ä¸­æœ‰çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶çš„æ¦‚å¿µï¼Œå…¶ä¸­æ¯ä¸ªçˆ¶ç»„ä»¶æœ¬èº«å¯èƒ½æ˜¯å¦ä¸€ä¸ªç»„ä»¶çš„å­ç»„ä»¶ã€‚</p>
<p>å½“æ¸²æŸ“ React åº”ç”¨ç¨‹åºæ—¶ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªç§°ä¸ºæ¸²æŸ“æ ‘çš„æ ‘ä¸­å»ºæ¨¡è¿™ç§å…³ç³»ã€‚</p>
<p>ä¸‹é¢çš„ React åº”ç”¨ç¨‹åºæ¸²æŸ“äº†ä¸€äº›é¼“èˆäººå¿ƒçš„å¼•è¯­ã€‚</p>
<p><code>App.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">FancyText</span> <span class="keyword">from</span> <span class="string">&#x27;./FancyText&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">InspirationGenerator</span> <span class="keyword">from</span> <span class="string">&#x27;./InspirationGenerator&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Copyright</span> <span class="keyword">from</span> <span class="string">&#x27;./Copyright&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">FancyText</span> <span class="attr">title</span> <span class="attr">text</span>=<span class="string">&quot;Get Inspired App&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">InspirationGenerator</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Copyright</span> <span class="attr">year</span>=<span class="string">&#123;2004&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">InspirationGenerator</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>FancyText.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">FancyText</span>(<span class="params">&#123;title, text&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> title</span><br><span class="line">    ? <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&#x27;fancy title&#x27;</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    : <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">className</span>=<span class="string">&#x27;fancy cursive&#x27;</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>InspirationGenerator.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> quotes <span class="keyword">from</span> <span class="string">&#x27;./quotes&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">FancyText</span> <span class="keyword">from</span> <span class="string">&#x27;./FancyText&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">InspirationGenerator</span>(<span class="params">&#123;children&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [index, setIndex] = <span class="title class_">React</span>.<span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> quote = quotes[index];</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">next</span> = (<span class="params"></span>) =&gt; <span class="title function_">setIndex</span>((index + <span class="number">1</span>) % quotes.<span class="property">length</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Your inspirational quote is:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">FancyText</span> <span class="attr">text</span>=<span class="string">&#123;quote&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;next&#125;</span>&gt;</span>Inspire me again<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Copyright.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Copyright</span>(<span class="params">&#123;year&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&#x27;small&#x27;</span>&gt;</span>Â©ï¸ &#123;year&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>quotes.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  <span class="string">&quot;Donâ€™t let yesterday take up too much of today.â€ â€” Will Rogers&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Ambition is putting a ladder against the sky.&quot;</span>,</span><br><span class="line">  <span class="string">&quot;A joy that&#x27;s shared is a joy made double.&quot;</span>,</span><br><span class="line">  ];</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240927162318.png"></p>
<p>é€šè¿‡ç¤ºä¾‹åº”ç”¨ç¨‹åºï¼Œå¯ä»¥æ„å»ºä¸Šé¢çš„æ¸²æŸ“æ ‘ã€‚</p>
<p>è¿™æ£µæ ‘ç”±èŠ‚ç‚¹ç»„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œ<code>App</code>ã€<code>FancyText</code>ã€<code>Copyright</code> ç­‰éƒ½æ˜¯æˆ‘ä»¬æ ‘ä¸­çš„èŠ‚ç‚¹ã€‚</p>
<p>åœ¨ React æ¸²æŸ“æ ‘ä¸­ï¼Œæ ¹èŠ‚ç‚¹æ˜¯åº”ç”¨ç¨‹åºçš„ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/importing-and-exporting-components#the-root-component-file">æ ¹ç»„ä»¶</a>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ ¹ç»„ä»¶æ˜¯ <code>App</code>ï¼Œå®ƒæ˜¯ React æ¸²æŸ“çš„ç¬¬ä¸€ä¸ªç»„ä»¶ã€‚æ ‘ä¸­çš„æ¯ä¸ªç®­å¤´ä»çˆ¶ç»„ä»¶æŒ‡å‘å­ç»„ä»¶ã€‚</p>
<blockquote>
<h4 id="é‚£ä¹ˆæ¸²æŸ“æ ‘ä¸­çš„-HTML-æ ‡ç­¾åœ¨å“ªé‡Œå‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆæ¸²æŸ“æ ‘ä¸­çš„-HTML-æ ‡ç­¾åœ¨å“ªé‡Œå‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆæ¸²æŸ“æ ‘ä¸­çš„ HTML æ ‡ç­¾åœ¨å“ªé‡Œå‘¢ï¼Ÿ"></a>é‚£ä¹ˆæ¸²æŸ“æ ‘ä¸­çš„ HTML æ ‡ç­¾åœ¨å“ªé‡Œå‘¢ï¼Ÿ</h4><p>ä¹Ÿè®¸ä¼šæ³¨æ„åˆ°åœ¨ä¸Šé¢çš„æ¸²æŸ“æ ‘ä¸­ï¼Œæ²¡æœ‰æåˆ°æ¯ä¸ªç»„ä»¶æ¸²æŸ“çš„ HTML æ ‡ç­¾ã€‚è¿™æ˜¯å› ä¸ºæ¸²æŸ“æ ‘ä»…ç”± React <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/your-first-component#components-ui-building-blocks">ç»„ä»¶</a> ç»„æˆã€‚</p>
<p>React æ˜¯è·¨å¹³å°çš„ UI æ¡†æ¶ã€‚react.dev å±•ç¤ºäº†ä¸€äº›æ¸²æŸ“åˆ°ä½¿ç”¨ HTML æ ‡ç­¾ä½œä¸º UI åŸè¯­çš„ web çš„ç¤ºä¾‹ã€‚ä½†æ˜¯ React åº”ç”¨ç¨‹åºåŒæ ·å¯ä»¥æ¸²æŸ“åˆ°ç§»åŠ¨è®¾å¤‡æˆ–æ¡Œé¢å¹³å°ï¼Œè¿™äº›å¹³å°å¯èƒ½ä½¿ç”¨ä¸åŒçš„ UI åŸè¯­ï¼Œå¦‚ <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/uiview">UIView</a> æˆ– <a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/dotnet/api/system.windows.frameworkelement?view=windowsdesktop-7.0">FrameworkElement</a>ã€‚</p>
<p>è¿™äº›å¹³å° UI åŸè¯­ä¸æ˜¯ React çš„ä¸€éƒ¨åˆ†ã€‚æ— è®ºåº”ç”¨ç¨‹åºæ¸²æŸ“åˆ°å“ªä¸ªå¹³å°ï¼ŒReact æ¸²æŸ“æ ‘éƒ½å¯ä»¥ä¸º React åº”ç”¨ç¨‹åºæä¾›è§è§£ã€‚</p>
</blockquote>
<p>æ¸²æŸ“æ ‘è¡¨ç¤º React åº”ç”¨ç¨‹åºçš„å•ä¸ªæ¸²æŸ“è¿‡ç¨‹ã€‚åœ¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/conditional-rendering">æ¡ä»¶æ¸²æŸ“</a> ä¸­ï¼Œçˆ¶ç»„ä»¶å¯ä»¥æ ¹æ®ä¼ é€’çš„æ•°æ®æ¸²æŸ“ä¸åŒçš„å­ç»„ä»¶ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ›´æ–°åº”ç”¨ç¨‹åºä»¥æœ‰æ¡ä»¶åœ°æ¸²æŸ“åŠ±å¿—è¯­å½•æˆ–é¢œè‰²ã€‚</p>
<p><code>App.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">FancyText</span> <span class="keyword">from</span> <span class="string">&#x27;./FancyText&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">InspirationGenerator</span> <span class="keyword">from</span> <span class="string">&#x27;./InspirationGenerator&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Copyright</span> <span class="keyword">from</span> <span class="string">&#x27;./Copyright&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">FancyText</span> <span class="attr">title</span> <span class="attr">text</span>=<span class="string">&quot;Get Inspired App&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">InspirationGenerator</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Copyright</span> <span class="attr">year</span>=<span class="string">&#123;2004&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">InspirationGenerator</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>FancyText.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">FancyText</span>(<span class="params">&#123;title, text&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> title</span><br><span class="line">    ? <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&#x27;fancy title&#x27;</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    : <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">className</span>=<span class="string">&#x27;fancy cursive&#x27;</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Color.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Color</span>(<span class="params">&#123;value&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;colorbox&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;backgroundColor:</span> <span class="attr">value</span>&#125;&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>InspirationGenerator.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> inspirations <span class="keyword">from</span> <span class="string">&#x27;./inspirations&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">FancyText</span> <span class="keyword">from</span> <span class="string">&#x27;./FancyText&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Color</span> <span class="keyword">from</span> <span class="string">&#x27;./Color&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">InspirationGenerator</span>(<span class="params">&#123;children&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [index, setIndex] = <span class="title class_">React</span>.<span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> inspiration = inspirations[index];</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">next</span> = (<span class="params"></span>) =&gt; <span class="title function_">setIndex</span>((index + <span class="number">1</span>) % inspirations.<span class="property">length</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Your inspirational &#123;inspiration.type&#125; is:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;inspiration.type === &#x27;quote&#x27;</span></span><br><span class="line"><span class="language-xml">      ? <span class="tag">&lt;<span class="name">FancyText</span> <span class="attr">text</span>=<span class="string">&#123;inspiration.value&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      : <span class="tag">&lt;<span class="name">Color</span> <span class="attr">value</span>=<span class="string">&#123;inspiration.value&#125;</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;next&#125;</span>&gt;</span>Inspire me again<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Copyright.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Copyright</span>(<span class="params">&#123;year&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&#x27;small&#x27;</span>&gt;</span>Â©ï¸ &#123;year&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>inspirations.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">  &#123;<span class="attr">type</span>: <span class="string">&#x27;quote&#x27;</span>, <span class="attr">value</span>: <span class="string">&quot;Donâ€™t let yesterday take up too much of today.â€ â€” Will Rogers&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">type</span>: <span class="string">&#x27;color&#x27;</span>, <span class="attr">value</span>: <span class="string">&quot;#B73636&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">type</span>: <span class="string">&#x27;quote&#x27;</span>, <span class="attr">value</span>: <span class="string">&quot;Ambition is putting a ladder against the sky.&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">type</span>: <span class="string">&#x27;color&#x27;</span>, <span class="attr">value</span>: <span class="string">&quot;#256266&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">type</span>: <span class="string">&#x27;quote&#x27;</span>, <span class="attr">value</span>: <span class="string">&quot;A joy that&#x27;s shared is a joy made double.&quot;</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">type</span>: <span class="string">&#x27;color&#x27;</span>, <span class="attr">value</span>: <span class="string">&quot;#F9F2B4&quot;</span>&#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240927165151.png"></p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ ¹æ® <code>inspiration.type</code> çš„å€¼å¯èƒ½ä¼šæ¸²æŸ“ <code>&lt;FancyText&gt;</code> æˆ– <code>&lt;Color&gt;</code>ã€‚æ¯æ¬¡æ¸²æŸ“è¿‡ç¨‹çš„æ¸²æŸ“æ ‘å¯èƒ½éƒ½ä¸åŒã€‚</p>
<p>å°½ç®¡æ¸²æŸ“æ ‘å¯èƒ½åœ¨ä¸åŒçš„æ¸²æŸ“è¿‡ç¨‹ä¸­æœ‰æ‰€ä¸åŒï¼Œä½†é€šå¸¸è¿™äº›æ ‘æœ‰åŠ©äºè¯†åˆ« React åº”ç”¨ç¨‹åºä¸­çš„é¡¶çº§å’Œå¶å­ç»„ä»¶ã€‚é¡¶çº§ç»„ä»¶æ˜¯ç¦»æ ¹ç»„ä»¶æœ€è¿‘çš„ç»„ä»¶ï¼Œå®ƒä»¬å½±å“å…¶ä¸‹æ‰€æœ‰ç»„ä»¶çš„æ¸²æŸ“æ€§èƒ½ï¼Œé€šå¸¸åŒ…å«æœ€å¤šå¤æ‚æ€§ã€‚å¶å­ç»„ä»¶ä½äºæ ‘çš„åº•éƒ¨ï¼Œæ²¡æœ‰å­ç»„ä»¶ï¼Œé€šå¸¸ä¼šé¢‘ç¹é‡æ–°æ¸²æŸ“ã€‚</p>
<p>è¯†åˆ«è¿™äº›ç»„ä»¶ç±»åˆ«æœ‰åŠ©äºç†è§£åº”ç”¨ç¨‹åºçš„æ•°æ®æµå’Œæ€§èƒ½ã€‚</p>
<h3 id="2-7-3-æ¨¡å—ä¾èµ–æ ‘"><a href="#2-7-3-æ¨¡å—ä¾èµ–æ ‘" class="headerlink" title="2.7.3 æ¨¡å—ä¾èµ–æ ‘"></a>2.7.3 æ¨¡å—ä¾èµ–æ ‘</h3><p>åœ¨ React åº”ç”¨ç¨‹åºä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ ‘æ¥å»ºæ¨¡çš„å¦ä¸€ä¸ªå…³ç³»æ˜¯åº”ç”¨ç¨‹åºçš„æ¨¡å—ä¾èµ–å…³ç³»ã€‚å½“ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/importing-and-exporting-components#exporting-and-importing-a-component">æ‹†åˆ†ç»„ä»¶</a> å’Œé€»è¾‘åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­æ—¶ï¼Œå°±åˆ›å»ºäº† <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">JavaScript æ¨¡å—</a>ï¼Œåœ¨è¿™äº›æ¨¡å—ä¸­å¯ä»¥å¯¼å‡ºç»„ä»¶ã€å‡½æ•°æˆ–å¸¸é‡ã€‚</p>
<p>æ¨¡å—ä¾èµ–æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ¯ä¸ªåˆ†æ”¯ä»£è¡¨è¯¥æ¨¡å—ä¸­çš„ <code>import</code> è¯­å¥ã€‚</p>
<p>ä»¥ä¹‹å‰çš„ Inspirations åº”ç”¨ç¨‹åºä¸ºä¾‹ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªæ¨¡å—ä¾èµ–æ ‘ï¼Œç®€ç§°ä¾èµ–æ ‘ã€‚</p>
<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240927165508.png"></p>
<p>æ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯æ ¹æ¨¡å—ï¼Œä¹Ÿç§°ä¸ºå…¥å£æ–‡ä»¶ã€‚å®ƒé€šå¸¸åŒ…å«æ ¹ç»„ä»¶çš„æ¨¡å—ã€‚</p>
<p>ä¸åŒä¸€åº”ç”¨ç¨‹åºçš„æ¸²æŸ“æ ‘ç›¸æ¯”ï¼Œå­˜åœ¨ç›¸ä¼¼çš„ç»“æ„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›æ˜¾è‘—çš„å·®å¼‚ï¼š</p>
<ul>
<li>æ„æˆæ ‘çš„èŠ‚ç‚¹ä»£è¡¨æ¨¡å—ï¼Œè€Œä¸æ˜¯ç»„ä»¶ã€‚</li>
<li>éç»„ä»¶æ¨¡å—ï¼Œå¦‚ <code>inspirations.js</code>ï¼Œåœ¨è¿™ä¸ªæ ‘ä¸­ä¹Ÿæœ‰æ‰€ä½“ç°ã€‚æ¸²æŸ“æ ‘ä»…å°è£…ç»„ä»¶ã€‚</li>
<li><code>Copyright.js</code> å‡ºç°åœ¨ <code>App.js</code> ä¸‹ï¼Œä½†åœ¨æ¸²æŸ“æ ‘ä¸­ï¼Œ<code>Copyright</code> ä½œä¸º <code>InspirationGenerator</code> çš„å­ç»„ä»¶å‡ºç°ã€‚è¿™æ˜¯å› ä¸º <code>InspirationGenerator</code> æ¥å— JSX ä½œä¸º <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/passing-props-to-a-component#passing-jsx-as-children">children props</a>ï¼Œå› æ­¤å®ƒå°† <code>Copyright</code> ä½œä¸ºå­ç»„ä»¶æ¸²æŸ“ï¼Œä½†ä¸å¯¼å…¥è¯¥æ¨¡å—ã€‚</li>
</ul>
<p>ä¾èµ–æ ‘å¯¹äºç¡®å®šè¿è¡Œ React åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ¨¡å—éå¸¸æœ‰ç”¨ã€‚åœ¨ä¸ºç”Ÿäº§ç¯å¢ƒæ„å»º React åº”ç”¨ç¨‹åºæ—¶ï¼Œé€šå¸¸ä¼šæœ‰ä¸€ä¸ªæ„å»ºæ­¥éª¤ï¼Œè¯¥æ­¥éª¤å°†æ†ç»‘æ‰€æœ‰å¿…è¦çš„ JavaScript ä»¥ä¾›å®¢æˆ·ç«¯ä½¿ç”¨ã€‚è´Ÿè´£æ­¤æ“ä½œçš„å·¥å…·ç§°ä¸º <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Overview#the_modern_tooling_ecosystem">bundlerï¼ˆæ†ç»‘å™¨ï¼‰</a>ï¼Œå¹¶ä¸” bundler å°†ä½¿ç”¨ä¾èµ–æ ‘æ¥ç¡®å®šåº”åŒ…å«å“ªäº›æ¨¡å—ã€‚</p>
<p>éšç€åº”ç”¨ç¨‹åºçš„å¢é•¿ï¼Œæ†ç»‘åŒ…å¤§å°é€šå¸¸ä¹Ÿä¼šå¢åŠ ã€‚å¤§å‹æ†ç»‘åŒ…å¤§å°å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ä¸‹è½½å’Œè¿è¡Œæˆæœ¬é«˜æ˜‚ï¼Œå¹¶å»¶è¿Ÿ UI ç»˜åˆ¶çš„æ—¶é—´ã€‚äº†è§£åº”ç”¨ç¨‹åºçš„ä¾èµ–æ ‘å¯èƒ½æœ‰åŠ©äºè°ƒè¯•è¿™äº›é—®é¢˜ã€‚</p>
<h3 id="2-7-4-æ‘˜è¦"><a href="#2-7-4-æ‘˜è¦" class="headerlink" title="2.7.4 æ‘˜è¦"></a>2.7.4 æ‘˜è¦</h3><ul>
<li>æ ‘æ˜¯è¡¨ç¤ºå®ä½“ä¹‹é—´å…³ç³»çš„å¸¸è§æ–¹å¼ï¼Œå®ƒä»¬ç»å¸¸ç”¨äºå»ºæ¨¡ UIã€‚</li>
<li>æ¸²æŸ“æ ‘è¡¨ç¤ºå•æ¬¡æ¸²æŸ“ä¸­ React ç»„ä»¶ä¹‹é—´çš„åµŒå¥—å…³ç³»ã€‚</li>
<li>ä½¿ç”¨æ¡ä»¶æ¸²æŸ“ï¼Œæ¸²æŸ“æ ‘å¯èƒ½ä¼šåœ¨ä¸åŒçš„æ¸²æŸ“è¿‡ç¨‹ä¸­å‘ç”Ÿå˜åŒ–ã€‚ä½¿ç”¨ä¸åŒçš„å±æ€§å€¼ï¼Œç»„ä»¶å¯èƒ½ä¼šæ¸²æŸ“ä¸åŒçš„å­ç»„ä»¶ã€‚</li>
<li>æ¸²æŸ“æ ‘æœ‰åŠ©äºè¯†åˆ«é¡¶çº§ç»„ä»¶å’Œå¶å­ç»„ä»¶ã€‚é¡¶çº§ç»„ä»¶ä¼šå½±å“å…¶ä¸‹æ‰€æœ‰ç»„ä»¶çš„æ¸²æŸ“æ€§èƒ½ï¼Œè€Œå¶å­ç»„ä»¶é€šå¸¸ä¼šé¢‘ç¹é‡æ–°æ¸²æŸ“ã€‚è¯†åˆ«å®ƒä»¬æœ‰åŠ©äºç†è§£å’Œè°ƒè¯•æ¸²æŸ“æ€§èƒ½é—®é¢˜ã€‚</li>
<li>ä¾èµ–æ ‘è¡¨ç¤º React åº”ç”¨ç¨‹åºä¸­çš„æ¨¡å—ä¾èµ–å…³ç³»ã€‚</li>
<li>æ„å»ºå·¥å…·ä½¿ç”¨ä¾èµ–æ ‘æ¥æ†ç»‘å¿…è¦çš„ä»£ç ä»¥éƒ¨ç½²åº”ç”¨ç¨‹åºã€‚</li>
<li>ä¾èµ–æ ‘æœ‰åŠ©äºè°ƒè¯•å¤§å‹æ†ç»‘åŒ…å¸¦æ¥çš„æ¸²æŸ“é€Ÿåº¦è¿‡æ…¢çš„é—®é¢˜ï¼Œä»¥åŠå‘ç°å“ªäº›æ†ç»‘ä»£ç å¯ä»¥è¢«ä¼˜åŒ–ã€‚</li>
</ul>
<h1 id="3-äº¤äº’"><a href="#3-äº¤äº’" class="headerlink" title="3. äº¤äº’"></a>3. äº¤äº’</h1><p>ç•Œé¢ä¸Šçš„æ§ä»¶ä¼šæ ¹æ®ç”¨æˆ·çš„è¾“å…¥è€Œæ›´æ–°ã€‚ä¾‹å¦‚ï¼Œç‚¹å‡»æŒ‰é’®åˆ‡æ¢è½®æ’­å›¾çš„å±•ç¤ºã€‚åœ¨ React ä¸­ï¼Œéšæ—¶é—´å˜åŒ–çš„æ•°æ®è¢«ç§°ä¸ºçŠ¶æ€ï¼ˆstateï¼‰ã€‚ä½ å¯ä»¥å‘ä»»ä½•ç»„ä»¶æ·»åŠ çŠ¶æ€ï¼Œå¹¶æŒ‰éœ€è¿›è¡Œæ›´æ–°ã€‚åœ¨æœ¬ç« èŠ‚ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•ç¼–å†™å¤„ç†äº¤äº’çš„ç»„ä»¶ï¼Œæ›´æ–°å®ƒä»¬çš„çŠ¶æ€ï¼Œå¹¶æ ¹æ®æ—¶é—´å˜åŒ–æ˜¾ç¤ºä¸åŒçš„æ•ˆæœã€‚</p>
<h2 id="3-1-å“åº”äº‹ä»¶"><a href="#3-1-å“åº”äº‹ä»¶" class="headerlink" title="3.1 å“åº”äº‹ä»¶"></a>3.1 å“åº”äº‹ä»¶</h2><p>ä½¿ç”¨ React å¯ä»¥åœ¨ JSX ä¸­æ·»åŠ  <strong>äº‹ä»¶å¤„ç†å‡½æ•°</strong>ã€‚å…¶ä¸­äº‹ä»¶å¤„ç†å‡½æ•°ä¸ºè‡ªå®šä¹‰å‡½æ•°ï¼Œå®ƒå°†åœ¨å“åº”äº¤äº’ï¼ˆå¦‚ç‚¹å‡»ã€æ‚¬åœã€è¡¨å•è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹ç­‰ï¼‰æ—¶è§¦å‘ã€‚</p>
<h3 id="3-1-1-æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°"><a href="#3-1-1-æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°" class="headerlink" title="3.1.1 æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°"></a>3.1.1 æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°</h3><p>å¦‚éœ€æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä½ éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶å <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/passing-props-to-a-component">å°†å…¶ä½œä¸º prop ä¼ å…¥</a> åˆé€‚çš„ JSX æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªæ²¡ç»‘å®šä»»ä½•äº‹ä»¶çš„æŒ‰é’®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      æœªç»‘å®šä»»ä½•äº‹ä»¶</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŒ‰ç…§å¦‚ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼Œå³å¯è®©å®ƒåœ¨ç”¨æˆ·ç‚¹å‡»æ—¶æ˜¾ç¤ºæ¶ˆæ¯ï¼š</p>
<ol>
<li>åœ¨ <code>Button</code> ç»„ä»¶ <strong>å†…éƒ¨</strong> å£°æ˜ä¸€ä¸ªåä¸º <code>handleClick</code> çš„å‡½æ•°ã€‚</li>
<li>å®ç°å‡½æ•°å†…éƒ¨çš„é€»è¾‘ï¼ˆä½¿ç”¨ <code>alert</code> æ¥æ˜¾ç¤ºæ¶ˆæ¯ï¼‰ã€‚</li>
<li>æ·»åŠ  <code>onClick=&#123;handleClick&#125;</code> åˆ° <code>&lt;button&gt;</code> JSX ä¸­ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;ç‚¹å‡»&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">     <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ç‚¹å‡»</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥å®šä¹‰ <code>handleClick</code> å‡½æ•°ç„¶å <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/passing-props-to-a-component">å°†å…¶ä½œä¸º prop ä¼ å…¥</a> <code>&lt;button&gt;</code>ã€‚å…¶ä¸­ <code>handleClick</code> æ˜¯ä¸€ä¸ª <strong>äº‹ä»¶å¤„ç†å‡½æ•°</strong> ã€‚äº‹ä»¶å¤„ç†å‡½æ•°æœ‰å¦‚ä¸‹ç‰¹ç‚¹:</p>
<ul>
<li>é€šå¸¸åœ¨ä½ çš„ç»„ä»¶ <strong>å†…éƒ¨</strong> å®šä¹‰ã€‚</li>
<li>åç§°ä»¥ <code>handle</code> å¼€å¤´ï¼Œåè·Ÿäº‹ä»¶åç§°ã€‚</li>
</ul>
<blockquote>
<p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œé€šå¸¸å°†äº‹ä»¶å¤„ç†ç¨‹åºå‘½åä¸º <code>handle</code>ï¼Œåæ¥äº‹ä»¶åã€‚ä½ ä¼šç»å¸¸çœ‹åˆ° <code>onClick=&#123;handleClick&#125;</code>ï¼Œ<code>onMouseEnter=&#123;handleMouseEnter&#125;</code> ç­‰ã€‚</p>
</blockquote>
<p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ JSX ä¸­å®šä¹‰ä¸€ä¸ªå†…è”çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;ä½ ç‚¹å‡»äº†æˆ‘ï¼&#x27;</span>);</span><br><span class="line">&#125;&#125;&gt;</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ï¼Œç›´æ¥ä½¿ç”¨æ›´ä¸ºç®€æ´ç®­å¤´å‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;ä½ ç‚¹å‡»äº†æˆ‘ï¼&#x27;</span>);</span><br><span class="line">&#125;&#125;&gt;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ‰€æœ‰æ–¹å¼éƒ½æ˜¯ç­‰æ•ˆçš„ã€‚å½“å‡½æ•°ä½“è¾ƒçŸ­æ—¶ï¼Œå†…è”äº‹ä»¶å¤„ç†å‡½æ•°ä¼šå¾ˆæ–¹ä¾¿ã€‚</p>
<blockquote>
<p>ä¼ é€’ç»™äº‹ä»¶å¤„ç†å‡½æ•°çš„å‡½æ•°åº”ç›´æ¥ä¼ é€’ï¼Œè€Œéè°ƒç”¨ã€‚ä¾‹å¦‚ï¼š</p>
<table>
<thead>
<tr>
<th>ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼ˆæ­£ç¡®ï¼‰</th>
<th>è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼ˆé”™è¯¯ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;button onClick=&#123;handleClick&#125;&gt;</code></td>
<td><code>&lt;button onClick=&#123;handleClick()&#125;&gt;</code></td>
</tr>
</tbody></table>
<p>åŒºåˆ«å¾ˆå¾®å¦™ã€‚åœ¨ç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>handleClick</code> å‡½æ•°ä½œä¸º <code>onClick</code> äº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’ã€‚è¿™ä¼šè®© React è®°ä½å®ƒï¼Œå¹¶ä¸”åªåœ¨ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶è°ƒç”¨ä½ çš„å‡½æ•°ã€‚</p>
<p>åœ¨ç¬¬äºŒä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>handleClick()</code> ä¸­æœ€åçš„ <code>()</code> ä¼šåœ¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/render-and-commit">æ¸²æŸ“</a> è¿‡ç¨‹ä¸­ <strong>ç«‹å³</strong> è§¦å‘å‡½æ•°ï¼Œå³ä½¿æ²¡æœ‰ä»»ä½•ç‚¹å‡»ã€‚è¿™æ˜¯å› ä¸ºä½äº <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/javascript-in-jsx-with-curly-braces">JSX <code>&#123;&#125;</code></a> ä¹‹é—´çš„ JavaScript ä¼šç«‹å³æ‰§è¡Œã€‚</p>
<p>å½“ä½ ç¼–å†™å†…è”ä»£ç æ—¶ï¼ŒåŒæ ·çš„é™·é˜±å¯èƒ½ä¼šä»¥ä¸åŒçš„æ–¹å¼å‡ºç°ï¼š</p>
<table>
<thead>
<tr>
<th>ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼ˆæ­£ç¡®ï¼‰</th>
<th>è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼ˆé”™è¯¯ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>&lt;button onClick=&#123;() =&gt; alert(&#39;...&#39;)&#125;&gt;</code></td>
<td><code>&lt;button onClick=&#123;alert(&#39;...&#39;)&#125;&gt;</code></td>
</tr>
</tbody></table>
<p>å¦‚æœæŒ‰å¦‚ä¸‹æ–¹å¼ä¼ é€’å†…è”ä»£ç ï¼Œå¹¶ä¸ä¼šåœ¨ç‚¹å‡»æ—¶è§¦å‘ï¼Œè€Œæ˜¯ä¼šåœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶è§¦å‘ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// è¿™ä¸ª alert åœ¨ç»„ä»¶æ¸²æŸ“æ—¶è§¦å‘ï¼Œè€Œä¸æ˜¯ç‚¹å‡»æ—¶è§¦å‘ï¼</span><br><span class="line"></span><br><span class="line">&lt;button onClick=&#123;alert(&#x27;ä½ ç‚¹å‡»äº†æˆ‘ï¼&#x27;)&#125;&gt;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ æƒ³è¦å®šä¹‰å†…è”äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¯·å°†å…¶åŒ…è£…åœ¨åŒ¿åå‡½æ•°ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;() =&gt; alert(&#x27;ä½ ç‚¹å‡»äº†æˆ‘ï¼&#x27;)&#125;&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªç¨åè°ƒç”¨çš„å‡½æ•°ï¼Œè€Œä¸ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œå…¶å†…éƒ¨ä»£ç ã€‚</p>
<p>åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œä½ éƒ½åº”è¯¥ä¼ é€’ä¸€ä¸ªå‡½æ•°ï¼š</p>
<ul>
<li><code>&lt;button onClick=&#123;handleClick&#125;&gt;</code> ä¼ é€’äº† <code>handleClick</code> å‡½æ•°ã€‚</li>
<li><code>&lt;button onClick=&#123;() =&gt; alert(&#39;...&#39;)&#125;&gt;</code> ä¼ é€’äº† <code>() =&gt; alert(&#39;...&#39;)</code> å‡½æ•°ã€‚</li>
</ul>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://zh.javascript.info/arrow-functions-basics">äº†è§£æ›´å¤šç®­å¤´å‡½æ•°çš„ä¿¡æ¯</a>ã€‚</p>
</blockquote>
</blockquote>
<h3 id="3-1-2-åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è¯»å–-props"><a href="#3-1-2-åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è¯»å–-props" class="headerlink" title="3.1.2 åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è¯»å– props"></a>3.1.2 åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è¯»å– props</h3><p>ç”±äºäº‹ä»¶å¤„ç†å‡½æ•°å£°æ˜äºç»„ä»¶å†…éƒ¨ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥ç›´æ¥è®¿é—®ç»„ä»¶çš„ propsã€‚ç¤ºä¾‹ä¸­çš„æŒ‰é’®ï¼Œå½“ç‚¹å‡»æ—¶ä¼šå¼¹å‡ºå¸¦æœ‰ <code>message</code> prop çš„ alertï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">AlertButton</span>(<span class="params">&#123; message, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> alert(message)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Toolbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AlertButton</span> <span class="attr">message</span>=<span class="string">&quot;æ­£åœ¨æ’­æ”¾ï¼&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        æ’­æ”¾ç”µå½±</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">AlertButton</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">AlertButton</span> <span class="attr">message</span>=<span class="string">&quot;æ­£åœ¨ä¸Šä¼ ï¼&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ä¸Šä¼ å›¾ç‰‡</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">AlertButton</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤„æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œä¼šå±•ç¤ºä¸åŒçš„æ¶ˆæ¯ã€‚ä½ å¯ä»¥å°è¯•æ›´æ”¹ä¼ é€’ç»™å®ƒä»¬çš„æ¶ˆæ¯ã€‚</p>
<h3 id="3-1-3-å°†äº‹ä»¶å¤„ç†å‡½æ•°ä½œä¸º-props-ä¼ é€’"><a href="#3-1-3-å°†äº‹ä»¶å¤„ç†å‡½æ•°ä½œä¸º-props-ä¼ é€’" class="headerlink" title="3.1.3 å°†äº‹ä»¶å¤„ç†å‡½æ•°ä½œä¸º props ä¼ é€’"></a>3.1.3 å°†äº‹ä»¶å¤„ç†å‡½æ•°ä½œä¸º props ä¼ é€’</h3><p>é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šåœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰å­ç»„ä»¶çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚æ¯”å¦‚ï¼šç½®äºä¸åŒä½ç½®çš„ <code>Button</code> ç»„ä»¶ï¼Œå¯èƒ½æœ€ç»ˆæ‰§è¡Œçš„åŠŸèƒ½ä¹Ÿä¸åŒ â€”â€” ä¹Ÿè®¸æ˜¯æ’­æ”¾ç”µå½±ï¼Œä¹Ÿè®¸æ˜¯ä¸Šä¼ å›¾ç‰‡ã€‚</p>
<p>ä¸ºæ­¤ï¼Œå°†ç»„ä»¶ä»çˆ¶ç»„ä»¶æ¥æ”¶çš„ prop ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; onClick, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">PlayButton</span>(<span class="params">&#123; movieName &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handlePlayClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">`æ­£åœ¨æ’­æ”¾ <span class="subst">$&#123;movieName&#125;</span>ï¼`</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;handlePlayClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      æ’­æ”¾ &quot;&#123;movieName&#125;&quot;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UploadButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> alert(&#x27;æ­£åœ¨ä¸Šä¼ ï¼&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      ä¸Šä¼ å›¾ç‰‡</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Toolbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">PlayButton</span> <span class="attr">movieName</span>=<span class="string">&quot;é­”å¥³å®…æ€¥ä¾¿&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">UploadButton</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ä¸­ï¼Œ<code>Toolbar</code> ç»„ä»¶æ¸²æŸ“äº†ä¸€ä¸ª <code>PlayButton</code> ç»„ä»¶å’Œ <code>UploadButton</code> ç»„ä»¶ï¼š</p>
<ul>
<li><code>PlayButton</code> å°† <code>handlePlayClick</code> ä½œä¸º <code>onClick</code> prop ä¼ å…¥ <code>Button</code> ç»„ä»¶å†…éƒ¨ã€‚</li>
<li><code>UploadButton</code> å°† <code>() =&gt; alert(&#39;æ­£åœ¨ä¸Šä¼ ï¼&#39;)</code> ä½œä¸º <code>onClick</code> prop ä¼ å…¥ <code>Button</code> ç»„ä»¶å†…éƒ¨ã€‚</li>
</ul>
<p>æœ€åï¼Œä½ çš„ <code>Button</code> ç»„ä»¶æ¥æ”¶ä¸€ä¸ªåä¸º <code>onClick</code> çš„ propã€‚å®ƒç›´æ¥å°†è¿™ä¸ª prop ä»¥ <code>onClick=&#123;onClick&#125;</code> æ–¹å¼ä¼ é€’ç»™æµè§ˆå™¨å†…ç½®çš„ <code>&lt;button&gt;</code>ã€‚å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒReact ä¼šè°ƒç”¨ä¼ å…¥çš„å‡½æ•°ã€‚</p>
<p>å¦‚æœä½ éµå¾ªæŸä¸ª <a target="_blank" rel="noopener" href="https://uxdesign.cc/everything-you-need-to-know-about-design-systems-54b109851969">è®¾è®¡ç³»ç»Ÿ</a> æ—¶ï¼ŒæŒ‰é’®ä¹‹ç±»çš„ç»„ä»¶é€šå¸¸ä¼šåŒ…å«æ ·å¼ï¼Œä½†ä¸ä¼šæŒ‡å®šè¡Œä¸ºã€‚è€Œ <code>PlayButton</code> å’Œ <code>UploadButton</code> ä¹‹ç±»çš„ç»„ä»¶åˆ™ä¼šå‘ä¸‹ä¼ é€’äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>
<h3 id="3-1-4-å‘½åäº‹ä»¶å¤„ç†å‡½æ•°-prop"><a href="#3-1-4-å‘½åäº‹ä»¶å¤„ç†å‡½æ•°-prop" class="headerlink" title="3.1.4 å‘½åäº‹ä»¶å¤„ç†å‡½æ•° prop"></a>3.1.4 å‘½åäº‹ä»¶å¤„ç†å‡½æ•° prop</h3><p>å†…ç½®ç»„ä»¶ï¼ˆ<code>&lt;button&gt;</code> å’Œ <code>&lt;div&gt;</code>ï¼‰ä»…æ”¯æŒ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react-dom/components/common#common-props">æµè§ˆå™¨äº‹ä»¶åç§°</a>ï¼Œä¾‹å¦‚ <code>onClick</code>ã€‚ä½†æ˜¯ï¼Œå½“ä½ æ„å»ºè‡ªå·±çš„ç»„ä»¶æ—¶ï¼Œä½ å¯ä»¥æŒ‰ä½ ä¸ªäººå–œå¥½å‘½åäº‹ä»¶å¤„ç†å‡½æ•°çš„ propã€‚</p>
<blockquote>
<p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œäº‹ä»¶å¤„ç†å‡½æ•° props åº”è¯¥ä»¥ <code>on</code> å¼€å¤´ï¼Œåè·Ÿä¸€ä¸ªå¤§å†™å­—æ¯ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼Œ<code>Button</code> ç»„ä»¶çš„ <code>onClick</code> prop æœ¬æ¥ä¹Ÿå¯ä»¥è¢«å‘½åä¸º <code>onSmash</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; onSmash, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onSmash&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">onSmash</span>=<span class="string">&#123;()</span> =&gt;</span> alert(&#x27;æ­£åœ¨æ’­æ”¾ï¼&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        æ’­æ”¾ç”µå½±</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">onSmash</span>=<span class="string">&#123;()</span> =&gt;</span> alert(&#x27;æ­£åœ¨ä¸Šä¼ ï¼&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        ä¸Šä¼ å›¾ç‰‡</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ<code>&lt;button onClick=&#123;onSmash&#125;&gt;</code> ä»£è¡¨æµè§ˆå™¨å†…ç½®çš„ <code>&lt;button&gt;</code>ï¼ˆå°å†™ï¼‰ä»ç„¶éœ€è¦ä½¿ç”¨ <code>onClick</code> propï¼Œè€Œè‡ªå®šä¹‰çš„ <code>Button</code> ç»„ä»¶æ¥æ”¶åˆ°çš„ prop åç§°å¯ç”±ä½ å†³å®šï¼</p>
<p>å½“ä½ çš„ç»„ä»¶æ”¯æŒå¤šç§äº¤äº’æ—¶ï¼Œä½ å¯ä»¥æ ¹æ®ä¸åŒçš„åº”ç”¨ç¨‹åºå‘½åäº‹ä»¶å¤„ç†å‡½æ•° propã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª <code>Toolbar</code> ç»„ä»¶æ¥æ”¶ <code>onPlayMovie</code> å’Œ <code>onUploadImage</code> ä¸¤ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Toolbar</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onPlayMovie</span>=<span class="string">&#123;()</span> =&gt;</span> alert(&#x27;æ­£åœ¨æ’­æ”¾ï¼&#x27;)&#125;</span></span><br><span class="line"><span class="language-xml">      onUploadImage=&#123;() =&gt; alert(&#x27;æ­£åœ¨ä¸Šä¼ ï¼&#x27;)&#125;</span></span><br><span class="line"><span class="language-xml">    /&gt;</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Toolbar</span>(<span class="params">&#123; onPlayMovie, onUploadImage &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;onPlayMovie&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        æ’­æ”¾ç”µå½±</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;onUploadImage&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ä¸Šä¼ å›¾ç‰‡</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; onClick, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ï¼Œ<code>App</code> ç»„ä»¶å¹¶ä¸éœ€è¦çŸ¥é“ <code>Toolbar</code> å°†ä¼šå¯¹ <code>onPlayMovie</code> å’Œ <code>onUploadImage</code> åš <strong>ä»€ä¹ˆ</strong> ã€‚ä¸Šè¿°ç¤ºä¾‹æ˜¯ <code>Toolbar</code> çš„å®ç°ç»†èŠ‚ã€‚å…¶ä¸­ï¼Œ<code>Toolbar</code> å°†å®ƒä»¬ä½œä¸º <code>onClick</code> å¤„ç†å‡½æ•°ä¼ é€’ç»™äº† <code>Button</code> ç»„ä»¶ï¼Œå…¶å®è¿˜å¯ä»¥é€šè¿‡é”®ç›˜å¿«æ·é”®æ¥è§¦å‘å®ƒä»¬ã€‚æ ¹æ®åº”ç”¨ç¨‹åºç‰¹å®šçš„äº¤äº’æ–¹å¼ï¼ˆå¦‚ <code>onPlayMovie</code>ï¼‰æ¥å‘½å prop ï¼Œå¯ä»¥è®©ä½ çµæ´»åœ°æ›´æ”¹ä»¥åä½¿ç”¨å®ƒä»¬çš„æ–¹å¼ã€‚</p>
<blockquote>
<p>ç¡®ä¿ä¸ºäº‹ä»¶å¤„ç†ç¨‹åºä½¿ç”¨é€‚å½“çš„ HTML æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œè¦å¤„ç†ç‚¹å‡»äº‹ä»¶ï¼Œè¯·ä½¿ç”¨ <button onClick={handleClick}> è€Œä¸æ˜¯ <code>&lt;div onClick=&#123;handleClick&#125;&gt;</code>ã€‚ä½¿ç”¨çœŸæ­£çš„æµè§ˆå™¨ <code>&lt;button&gt;</code> å¯ç”¨å†…ç½®çš„æµè§ˆå™¨è¡Œä¸ºï¼Œå¦‚é”®ç›˜å¯¼èˆªã€‚å¦‚æœä½ ä¸å–œæ¬¢æŒ‰é’®çš„é»˜è®¤æµè§ˆå™¨æ ·å¼ï¼Œå¹¶ä¸”æƒ³è®©å®ƒçœ‹èµ·æ¥æ›´åƒä¸€ä¸ªé“¾æ¥æˆ–ä¸åŒçš„ UI å…ƒç´ ï¼Œä½ å¯ä»¥ä½¿ç”¨ CSS æ¥å®ç°ã€‚<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Learn/Accessibility/HTML">äº†è§£æœ‰å…³ç¼–å†™æ— éšœç¢æ ‡ç­¾çš„æ›´å¤šä¿¡æ¯</a>ã€‚</p>
</blockquote>
<h3 id="3-1-5-äº‹ä»¶ä¼ æ’­"><a href="#3-1-5-äº‹ä»¶ä¼ æ’­" class="headerlink" title="3.1.5 äº‹ä»¶ä¼ æ’­"></a>3.1.5 äº‹ä»¶ä¼ æ’­</h3><p>äº‹ä»¶å¤„ç†å‡½æ•°è¿˜å°†æ•è·ä»»ä½•æ¥è‡ªå­ç»„ä»¶çš„äº‹ä»¶ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šè¯´äº‹ä»¶ä¼šæ²¿ç€æ ‘å‘ä¸Šâ€œå†’æ³¡â€æˆ–â€œä¼ æ’­â€ï¼šå®ƒä»äº‹ä»¶å‘ç”Ÿçš„åœ°æ–¹å¼€å§‹ï¼Œç„¶åæ²¿ç€æ ‘å‘ä¸Šä¼ æ’­ã€‚</p>
<p>ä¸‹é¢è¿™ä¸ª <code>&lt;div&gt;</code> åŒ…å«ä¸¤ä¸ªæŒ‰é’®ã€‚<code>&lt;div&gt;</code> å’Œæ¯ä¸ªæŒ‰é’®éƒ½æœ‰è‡ªå·±çš„ <code>onClick</code> å¤„ç†å‡½æ•°ã€‚ä½ è®¤ä¸ºç‚¹å‡»æŒ‰é’®æ—¶ä¼šè§¦å‘å“ªäº›å¤„ç†å‡½æ•°ï¼Ÿ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Toolbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Toolbar&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">      alert(&#x27;ä½ ç‚¹å‡»äº† toolbar ï¼&#x27;);</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> alert(&#x27;æ­£åœ¨æ’­æ”¾ï¼&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        æ’­æ”¾ç”µå½±</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> alert(&#x27;æ­£åœ¨ä¸Šä¼ ï¼&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        ä¸Šä¼ å›¾ç‰‡</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ç‚¹å‡»ä»»ä¸€æŒ‰é’®ï¼Œå®ƒè‡ªèº«çš„ <code>onClick</code> å°†é¦–å…ˆæ‰§è¡Œï¼Œç„¶åçˆ¶çº§ <code>&lt;div&gt;</code> çš„ <code>onClick</code> ä¼šæ¥ç€æ‰§è¡Œã€‚å› æ­¤ä¼šå‡ºç°ä¸¤æ¡æ¶ˆæ¯ã€‚å¦‚æœä½ ç‚¹å‡» toolbar æœ¬èº«ï¼Œå°†åªæœ‰çˆ¶çº§ <code>&lt;div&gt;</code> çš„ <code>onClick</code> ä¼šæ‰§è¡Œã€‚</p>
<blockquote>
<p>åœ¨ React ä¸­æ‰€æœ‰äº‹ä»¶éƒ½ä¼šä¼ æ’­ï¼Œé™¤äº† <code>onScroll</code>ï¼Œå®ƒä»…é€‚ç”¨äºä½ é™„åŠ åˆ°çš„ JSX æ ‡ç­¾ã€‚</p>
</blockquote>
<h3 id="3-1-6-é˜»æ­¢ä¼ æ’­"><a href="#3-1-6-é˜»æ­¢ä¼ æ’­" class="headerlink" title="3.1.6 é˜»æ­¢ä¼ æ’­"></a>3.1.6 é˜»æ­¢ä¼ æ’­</h3><p>äº‹ä»¶å¤„ç†å‡½æ•°æ¥æ”¶ä¸€ä¸ª <strong>äº‹ä»¶å¯¹è±¡</strong> ä½œä¸ºå”¯ä¸€çš„å‚æ•°ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œå®ƒé€šå¸¸è¢«ç§°ä¸º <code>e</code> ï¼Œä»£è¡¨ â€œeventâ€ï¼ˆäº‹ä»¶ï¼‰ã€‚ä½ å¯ä»¥ä½¿ç”¨æ­¤å¯¹è±¡æ¥è¯»å–æœ‰å…³äº‹ä»¶çš„ä¿¡æ¯ã€‚</p>
<p>è¿™ä¸ªäº‹ä»¶å¯¹è±¡è¿˜å…è®¸ä½ é˜»æ­¢ä¼ æ’­ã€‚å¦‚æœä½ æƒ³é˜»æ­¢ä¸€ä¸ªäº‹ä»¶åˆ°è¾¾çˆ¶ç»„ä»¶ï¼Œä½ éœ€è¦åƒä¸‹é¢ <code>Button</code> ç»„ä»¶é‚£æ ·è°ƒç”¨ <code>e.stopPropagation()</code> ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; onClick, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">      e.stopPropagation();</span></span><br><span class="line"><span class="language-xml">      onClick();</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Toolbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Toolbar&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">      alert(&#x27;ä½ ç‚¹å‡»äº† toolbar ï¼&#x27;);</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> alert(&#x27;æ­£åœ¨æ’­æ”¾ï¼&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        æ’­æ”¾ç”µå½±</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> alert(&#x27;æ­£åœ¨ä¸Šä¼ ï¼&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        ä¸Šä¼ å›¾ç‰‡</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ä½ ç‚¹å‡»æŒ‰é’®æ—¶ï¼š</p>
<ol>
<li>React è°ƒç”¨äº†ä¼ é€’ç»™ <code>&lt;button&gt;</code> çš„ <code>onClick</code> å¤„ç†å‡½æ•°ã€‚</li>
<li>å®šä¹‰åœ¨<code>Button</code>ä¸­çš„å¤„ç†å‡½æ•°æ‰§è¡Œäº†å¦‚ä¸‹æ“ä½œï¼š<ul>
<li>è°ƒç”¨ <code>e.stopPropagation()</code>ï¼Œé˜»æ­¢äº‹ä»¶è¿›ä¸€æ­¥å†’æ³¡ã€‚</li>
<li>è°ƒç”¨ <code>onClick</code> å‡½æ•°ï¼Œå®ƒæ˜¯ä» <code>Toolbar</code> ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ propã€‚</li>
</ul>
</li>
<li>åœ¨ <code>Toolbar</code> ç»„ä»¶ä¸­å®šä¹‰çš„å‡½æ•°ï¼Œæ˜¾ç¤ºæŒ‰é’®å¯¹åº”çš„ alertã€‚</li>
<li>ç”±äºä¼ æ’­è¢«é˜»æ­¢ï¼Œçˆ¶çº§ <code>&lt;div&gt;</code> çš„ <code>onClick</code> å¤„ç†å‡½æ•°ä¸ä¼šæ‰§è¡Œã€‚</li>
</ol>
<p>ç”±äºè°ƒç”¨äº† <code>e.stopPropagation()</code>ï¼Œç‚¹å‡»æŒ‰é’®ç°åœ¨å°†åªæ˜¾ç¤ºä¸€ä¸ª alertï¼ˆæ¥è‡ª <code>&lt;button&gt;</code>ï¼‰ï¼Œè€Œå¹¶éä¸¤ä¸ªï¼ˆåˆ†åˆ«æ¥è‡ª <code>&lt;button&gt;</code> å’Œçˆ¶çº§ toolbar <code>&lt;div&gt;</code>ï¼‰ã€‚ç‚¹å‡»æŒ‰é’®ä¸ç‚¹å‡»å‘¨å›´çš„ toolbar ä¸åŒï¼Œå› æ­¤é˜»æ­¢ä¼ æ’­å¯¹è¿™ä¸ª UI æ˜¯æœ‰æ„ä¹‰çš„ã€‚</p>
<blockquote>
<h4 id="æ•è·é˜¶æ®µäº‹ä»¶"><a href="#æ•è·é˜¶æ®µäº‹ä»¶" class="headerlink" title="æ•è·é˜¶æ®µäº‹ä»¶"></a>æ•è·é˜¶æ®µäº‹ä»¶</h4><p>æå°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½éœ€è¦æ•è·å­å…ƒç´ ä¸Šçš„æ‰€æœ‰äº‹ä»¶ï¼Œ<strong>å³ä¾¿å®ƒä»¬é˜»æ­¢äº†ä¼ æ’­</strong>ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³å¯¹æ¯æ¬¡ç‚¹å‡»è¿›è¡ŒåŸ‹ç‚¹è®°å½•ï¼Œä¼ æ’­é€»è¾‘æš‚ä¸”ä¸è®ºã€‚é‚£ä¹ˆä½ å¯ä»¥é€šè¿‡åœ¨äº‹ä»¶åç§°æœ«å°¾æ·»åŠ  <code>Capture</code> æ¥å®ç°è¿™ä¸€ç‚¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div onClickCapture=&#123;() =&gt; &#123; /* è¿™ä¼šé¦–å…ˆæ‰§è¡Œ */ &#125;&#125;&gt;</span><br><span class="line">  &lt;button onClick=&#123;e =&gt; e.stopPropagation()&#125; /&gt;</span><br><span class="line">  &lt;button onClick=&#123;e =&gt; e.stopPropagation()&#125; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>æ¯ä¸ªäº‹ä»¶åˆ†ä¸‰ä¸ªé˜¶æ®µä¼ æ’­ï¼š</p>
<ol>
<li>å®ƒå‘ä¸‹ä¼ æ’­ï¼Œè°ƒç”¨æ‰€æœ‰çš„ <code>onClickCapture</code> å¤„ç†å‡½æ•°ã€‚</li>
<li>å®ƒæ‰§è¡Œè¢«ç‚¹å‡»å…ƒç´ çš„ <code>onClick</code> å¤„ç†å‡½æ•°ã€‚</li>
<li>å®ƒå‘ä¸Šä¼ æ’­ï¼Œè°ƒç”¨æ‰€æœ‰çš„ <code>onClick</code> å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<p>æ•è·äº‹ä»¶å¯¹äºè·¯ç”±æˆ–æ•°æ®åˆ†æä¹‹ç±»çš„ä»£ç å¾ˆæœ‰ç”¨ï¼Œä½†ä½ å¯èƒ½ä¸ä¼šåœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­ä½¿ç”¨å®ƒä»¬ã€‚</p>
</blockquote>
<h3 id="3-1-7-ä¼ é€’å¤„ç†å‡½æ•°ä½œä¸ºäº‹ä»¶ä¼ æ’­çš„æ›¿ä»£æ–¹æ¡ˆ"><a href="#3-1-7-ä¼ é€’å¤„ç†å‡½æ•°ä½œä¸ºäº‹ä»¶ä¼ æ’­çš„æ›¿ä»£æ–¹æ¡ˆ" class="headerlink" title="3.1.7 ä¼ é€’å¤„ç†å‡½æ•°ä½œä¸ºäº‹ä»¶ä¼ æ’­çš„æ›¿ä»£æ–¹æ¡ˆ"></a>3.1.7 ä¼ é€’å¤„ç†å‡½æ•°ä½œä¸ºäº‹ä»¶ä¼ æ’­çš„æ›¿ä»£æ–¹æ¡ˆ</h3><p>æ³¨æ„ï¼Œæ­¤å¤„çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°å…ˆæ‰§è¡Œäº†ä¸€è¡Œä»£ç ï¼Œ<strong>ç„¶å</strong>è°ƒç”¨äº†çˆ¶ç»„ä»¶ä¼ é€’çš„ <code>onClick</code> propï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; onClick, children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">      e.stopPropagation();</span></span><br><span class="line"><span class="language-xml">      onClick();</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨çˆ¶å…ƒç´  <code>onClick</code> å‡½æ•°ä¹‹å‰ï¼Œå‘è¿™ä¸ªå¤„ç†å‡½æ•°æ·»åŠ æ›´å¤šä»£ç ã€‚æ­¤æ¨¡å¼æ˜¯äº‹ä»¶ä¼ æ’­çš„å¦ä¸€ç§ <strong>æ›¿ä»£æ–¹æ¡ˆ</strong> ã€‚å®ƒè®©å­ç»„ä»¶å¤„ç†äº‹ä»¶ï¼ŒåŒæ—¶ä¹Ÿè®©çˆ¶ç»„ä»¶æŒ‡å®šä¸€äº›é¢å¤–çš„è¡Œä¸ºã€‚ä¸äº‹ä»¶ä¼ æ’­ä¸åŒï¼Œå®ƒå¹¶éè‡ªåŠ¨ã€‚ä½†ä½¿ç”¨è¿™ç§æ¨¡å¼çš„å¥½å¤„æ˜¯ä½ å¯ä»¥æ¸…æ¥šåœ°è¿½è¸ªå› æŸä¸ªäº‹ä»¶çš„è§¦å‘è€Œæ‰§è¡Œçš„æ•´æ¡ä»£ç é“¾ã€‚</p>
<p>å¦‚æœä½ ä¾èµ–äºäº‹ä»¶ä¼ æ’­ï¼Œè€Œä¸”å¾ˆéš¾è¿½è¸ªå“ªäº›å¤„ç†ç¨‹åºåœ¨æ‰§è¡Œï¼ŒåŠå…¶æ‰§è¡Œçš„åŸå› ï¼Œå¯ä»¥å°è¯•è¿™ç§æ–¹æ³•ã€‚</p>
<h3 id="3-1-8-é˜»æ­¢é»˜è®¤è¡Œä¸º"><a href="#3-1-8-é˜»æ­¢é»˜è®¤è¡Œä¸º" class="headerlink" title="3.1.8 é˜»æ­¢é»˜è®¤è¡Œä¸º"></a>3.1.8 é˜»æ­¢é»˜è®¤è¡Œä¸º</h3><p>æŸäº›æµè§ˆå™¨äº‹ä»¶å…·æœ‰ä¸äº‹ä»¶ç›¸å…³è”çš„é»˜è®¤è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œç‚¹å‡» <code>&lt;form&gt;</code> è¡¨å•å†…éƒ¨çš„æŒ‰é’®ä¼šè§¦å‘è¡¨å•æäº¤äº‹ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹å°†é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Signup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;()</span> =&gt;</span> alert(&#x27;æäº¤è¡¨å•ï¼&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span>&gt;</span>å‘é€<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥è°ƒç”¨äº‹ä»¶å¯¹è±¡ä¸­çš„ <code>e.preventDefault()</code> æ¥é˜»æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Signup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">      e.preventDefault();</span></span><br><span class="line"><span class="language-xml">      alert(&#x27;æäº¤è¡¨å•ï¼&#x27;);</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span>&gt;</span>å‘é€<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸è¦æ··æ·† <code>e.stopPropagation()</code> å’Œ <code>e.preventDefault()</code>ã€‚å®ƒä»¬éƒ½å¾ˆæœ‰ç”¨ï¼Œä½†äºŒè€…å¹¶ä¸ç›¸å…³ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/API/Event/stopPropagation"><code>e.stopPropagation()</code></a> é˜»æ­¢è§¦å‘ç»‘å®šåœ¨å¤–å±‚æ ‡ç­¾ä¸Šçš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/API/Event/preventDefault"><code>e.preventDefault()</code></a> é˜»æ­¢å°‘æ•°äº‹ä»¶çš„é»˜è®¤æµè§ˆå™¨è¡Œä¸ºã€‚</li>
</ul>
<h3 id="3-1-9-äº‹ä»¶å¤„ç†å‡½æ•°å¯ä»¥åŒ…å«å‰¯ä½œç”¨å—ï¼Ÿ"><a href="#3-1-9-äº‹ä»¶å¤„ç†å‡½æ•°å¯ä»¥åŒ…å«å‰¯ä½œç”¨å—ï¼Ÿ" class="headerlink" title="3.1.9 äº‹ä»¶å¤„ç†å‡½æ•°å¯ä»¥åŒ…å«å‰¯ä½œç”¨å—ï¼Ÿ"></a>3.1.9 äº‹ä»¶å¤„ç†å‡½æ•°å¯ä»¥åŒ…å«å‰¯ä½œç”¨å—ï¼Ÿ</h3><p>å½“ç„¶å¯ä»¥ï¼äº‹ä»¶å¤„ç†å‡½æ•°æ˜¯æ‰§è¡Œå‰¯ä½œç”¨çš„æœ€ä½³ä½ç½®ã€‚</p>
<p>ä¸æ¸²æŸ“å‡½æ•°ä¸åŒï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ä¸éœ€è¦æ˜¯ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/keeping-components-pure">çº¯å‡½æ•°</a>ï¼Œå› æ­¤å®ƒæ˜¯ç”¨æ¥ <em>æ›´æ”¹</em> æŸäº›å€¼çš„ç»ä½³ä½ç½®ã€‚ä¾‹å¦‚ï¼Œæ›´æ”¹è¾“å…¥æ¡†çš„å€¼ä»¥å“åº”é”®å…¥ï¼Œæˆ–è€…æ›´æ”¹åˆ—è¡¨ä»¥å“åº”æŒ‰é’®çš„è§¦å‘ã€‚ä½†æ˜¯ï¼Œä¸ºäº†æ›´æ”¹æŸäº›ä¿¡æ¯ï¼Œä½ é¦–å…ˆéœ€è¦æŸç§æ–¹å¼å­˜å‚¨å®ƒã€‚åœ¨ React ä¸­ï¼Œè¿™æ˜¯é€šè¿‡ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-a-components-memory">stateï¼ˆç»„ä»¶çš„è®°å¿†ï¼‰</a> æ¥å®Œæˆçš„ã€‚</p>
<h3 id="3-1-10-æ‘˜è¦"><a href="#3-1-10-æ‘˜è¦" class="headerlink" title="3.1.10 æ‘˜è¦"></a>3.1.10 æ‘˜è¦</h3><ul>
<li>ä½ å¯ä»¥é€šè¿‡å°†å‡½æ•°ä½œä¸º prop ä¼ é€’ç»™å…ƒç´ å¦‚ <code>&lt;button&gt;</code> æ¥å¤„ç†äº‹ä»¶ã€‚</li>
<li>å¿…é¡»ä¼ é€’äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œ<strong>è€Œéå‡½æ•°è°ƒç”¨ï¼</strong> <code>onClick=&#123;handleClick&#125;</code> ï¼Œä¸æ˜¯ <code>onClick=&#123;handleClick()&#125;</code>ã€‚</li>
<li>ä½ å¯ä»¥å•ç‹¬æˆ–è€…å†…è”å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
<li>äº‹ä»¶å¤„ç†å‡½æ•°åœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰ï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥è®¿é—® propsã€‚</li>
<li>ä½ å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå¹¶å°†å…¶ä½œä¸º prop ä¼ é€’ç»™å­ç»„ä»¶ã€‚</li>
<li>ä½ å¯ä»¥æ ¹æ®ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„åç§°å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°çš„ propã€‚</li>
<li>äº‹ä»¶ä¼šå‘ä¸Šä¼ æ’­ã€‚é€šè¿‡äº‹ä»¶çš„ç¬¬ä¸€ä¸ªå‚æ•°è°ƒç”¨ <code>e.stopPropagation()</code> æ¥é˜²æ­¢è¿™ç§æƒ…å†µã€‚</li>
<li>äº‹ä»¶å¯èƒ½å…·æœ‰ä¸éœ€è¦çš„æµè§ˆå™¨é»˜è®¤è¡Œä¸ºã€‚è°ƒç”¨ <code>e.preventDefault()</code> æ¥é˜»æ­¢è¿™ç§æƒ…å†µã€‚</li>
<li>ä»å­ç»„ä»¶æ˜¾å¼è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•° prop æ˜¯äº‹ä»¶ä¼ æ’­çš„å¦ä¸€ç§ä¼˜ç§€æ›¿ä»£æ–¹æ¡ˆã€‚</li>
</ul>
<h2 id="3-2-Stateï¼šç»„ä»¶çš„è®°å¿†"><a href="#3-2-Stateï¼šç»„ä»¶çš„è®°å¿†" class="headerlink" title="3.2 Stateï¼šç»„ä»¶çš„è®°å¿†"></a>3.2 Stateï¼šç»„ä»¶çš„è®°å¿†</h2><p>ç»„ä»¶é€šå¸¸éœ€è¦æ ¹æ®äº¤äº’æ›´æ”¹å±å¹•ä¸Šæ˜¾ç¤ºçš„å†…å®¹ã€‚è¾“å…¥è¡¨å•åº”è¯¥æ›´æ–°è¾“å…¥å­—æ®µï¼Œå•å‡»è½®æ’­å›¾ä¸Šçš„â€œä¸‹ä¸€ä¸ªâ€åº”è¯¥æ›´æ”¹æ˜¾ç¤ºçš„å›¾ç‰‡ï¼Œå•å‡»â€œè´­ä¹°â€åº”è¯¥å°†å•†å“æ”¾å…¥è´­ç‰©è½¦ã€‚ç»„ä»¶éœ€è¦â€œè®°ä½â€æŸäº›ä¸œè¥¿ï¼šå½“å‰è¾“å…¥å€¼ã€å½“å‰å›¾ç‰‡ã€è´­ç‰©è½¦ã€‚åœ¨ React ä¸­ï¼Œè¿™ç§ç»„ä»¶ç‰¹æœ‰çš„è®°å¿†è¢«ç§°ä¸º <strong>state</strong>ã€‚</p>
<h3 id="3-2-1-å½“æ™®é€šçš„å˜é‡æ— æ³•æ»¡è¶³æ—¶"><a href="#3-2-1-å½“æ™®é€šçš„å˜é‡æ— æ³•æ»¡è¶³æ—¶" class="headerlink" title="3.2.1 å½“æ™®é€šçš„å˜é‡æ— æ³•æ»¡è¶³æ—¶"></a>3.2.1 å½“æ™®é€šçš„å˜é‡æ— æ³•æ»¡è¶³æ—¶</h3><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ¸²æŸ“é›•å¡‘å›¾ç‰‡çš„ç»„ä»¶ã€‚ç‚¹å‡» â€œNextâ€ æŒ‰é’®åº”è¯¥æ˜¾ç¤ºä¸‹ä¸€ä¸ªé›•å¡‘å¹¶å°† <code>index</code> æ›´æ”¹ä¸º <code>1</code>ï¼Œå†æ¬¡ç‚¹å‡»åˆæ›´æ”¹ä¸º <code>2</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä½†è¿™ä¸ªç»„ä»¶ç°åœ¨<strong>ä¸èµ·ä½œç”¨</strong>ï¼š</p>
<p><code>data.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sculptureList = [&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Homenaje a la NeurocirugÃ­a&#x27;</span>,</span><br><span class="line">  <span class="attr">artist</span>: <span class="string">&#x27;Marta Colvin Andrade&#x27;</span>,</span><br><span class="line">  <span class="attr">description</span>: <span class="string">&#x27;Although Colvin is predominantly known for abstract themes that allude to pre-Hispanic symbols, this gigantic sculpture, an homage to neurosurgery, is one of her most recognizable public art pieces.&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://i.imgur.com/Mx7dA2Y.jpg&#x27;</span>,</span><br><span class="line">  <span class="attr">alt</span>: <span class="string">&#x27;A bronze statue of two crossed hands delicately holding a human brain in their fingertips.&#x27;</span>  </span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Floralis GenÃ©rica&#x27;</span>,</span><br><span class="line">  <span class="attr">artist</span>: <span class="string">&#x27;Eduardo Catalano&#x27;</span>,</span><br><span class="line">  <span class="attr">description</span>: <span class="string">&#x27;This enormous (75 ft. or 23m) silver flower is located in Buenos Aires. It is designed to move, closing its petals in the evening or when strong winds blow and opening them in the morning.&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://i.imgur.com/ZF6s192m.jpg&#x27;</span>,</span><br><span class="line">  <span class="attr">alt</span>: <span class="string">&#x27;A gigantic metallic flower sculpture with reflective mirror-like petals and strong stamens.&#x27;</span></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>

<p><code>App.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sculptureList &#125; <span class="keyword">from</span> <span class="string">&#x27;./data.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    index = index + <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> sculpture = sculptureList[index];</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Next</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;sculpture.name&#125; <span class="tag">&lt;/<span class="name">i</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">        by &#123;sculpture.artist&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>  </span></span><br><span class="line"><span class="language-xml">        (&#123;index + 1&#125; of &#123;sculptureList.length&#125;)</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&#123;sculpture.url&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&#123;sculpture.alt&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;sculpture.description&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>handleClick()</code> äº‹ä»¶å¤„ç†å‡½æ•°æ­£åœ¨æ›´æ–°å±€éƒ¨å˜é‡ <code>index</code>ã€‚ä½†å­˜åœ¨ä¸¤ä¸ªåŸå› ä½¿å¾—å˜åŒ–ä¸å¯è§ï¼š</p>
<ol>
<li><strong>å±€éƒ¨å˜é‡æ— æ³•åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­æŒä¹…ä¿å­˜ã€‚</strong> å½“ React å†æ¬¡æ¸²æŸ“è¿™ä¸ªç»„ä»¶æ—¶ï¼Œå®ƒä¼šä»å¤´å¼€å§‹æ¸²æŸ“â€”â€”ä¸ä¼šè€ƒè™‘ä¹‹å‰å¯¹å±€éƒ¨å˜é‡çš„ä»»ä½•æ›´æ”¹ã€‚</li>
<li><strong>æ›´æ”¹å±€éƒ¨å˜é‡ä¸ä¼šè§¦å‘æ¸²æŸ“ã€‚</strong> React æ²¡æœ‰æ„è¯†åˆ°å®ƒéœ€è¦ä½¿ç”¨æ–°æ•°æ®å†æ¬¡æ¸²æŸ“ç»„ä»¶ã€‚</li>
</ol>
<p>è¦ä½¿ç”¨æ–°æ•°æ®æ›´æ–°ç»„ä»¶ï¼Œéœ€è¦åšä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li><strong>ä¿ç•™</strong> æ¸²æŸ“ä¹‹é—´çš„æ•°æ®ã€‚</li>
<li><strong>è§¦å‘</strong> React ä½¿ç”¨æ–°æ•°æ®æ¸²æŸ“ç»„ä»¶ï¼ˆé‡æ–°æ¸²æŸ“ï¼‰ã€‚</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/useState"><code>useState</code></a> Hook æä¾›äº†è¿™ä¸¤ä¸ªåŠŸèƒ½ï¼š</p>
<ol>
<li><strong>State å˜é‡</strong> ç”¨äºä¿å­˜æ¸²æŸ“é—´çš„æ•°æ®ã€‚</li>
<li><strong>State setter å‡½æ•°</strong> æ›´æ–°å˜é‡å¹¶è§¦å‘ React å†æ¬¡æ¸²æŸ“ç»„ä»¶ã€‚</li>
</ol>
<h3 id="3-2-2-æ·»åŠ ä¸€ä¸ª-state-å˜é‡"><a href="#3-2-2-æ·»åŠ ä¸€ä¸ª-state-å˜é‡" class="headerlink" title="3.2.2 æ·»åŠ ä¸€ä¸ª state å˜é‡"></a>3.2.2 æ·»åŠ ä¸€ä¸ª state å˜é‡</h3><p>è¦æ·»åŠ  state å˜é‡ï¼Œå…ˆä»æ–‡ä»¶é¡¶éƒ¨çš„ React ä¸­å¯¼å…¥ <code>useState</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œæ›¿æ¢è¿™ä¸€è¡Œï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> index = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>å°†å…¶ä¿®æ”¹ä¸º</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [index, setIndex] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p><code>index</code> æ˜¯ä¸€ä¸ª state å˜é‡ï¼Œ<code>setIndex</code> æ˜¯å¯¹åº”çš„ setter å‡½æ•°ã€‚</p>
<p>è¿™é‡Œçš„ <code>[</code> å’Œ <code>]</code> è¯­æ³•ç§°ä¸º<a target="_blank" rel="noopener" href="https://zh.javascript.info/destructuring-assignment">æ•°ç»„è§£æ„</a>ï¼Œå®ƒå…è®¸ä½ ä»æ•°ç»„ä¸­è¯»å–å€¼ã€‚ <code>useState</code> è¿”å›çš„æ•°ç»„æ€»æ˜¯æ­£å¥½æœ‰ä¸¤é¡¹ã€‚</p>
<p>ä»¥ä¸‹å±•ç¤ºäº†å®ƒä»¬åœ¨ <code>handleClick()</code> ä¸­æ˜¯å¦‚ä½•å…±åŒèµ·ä½œç”¨çš„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">setIndex</span>(index + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ç‚¹å‡» â€œNextâ€ æŒ‰é’®åˆ‡æ¢å½“å‰é›•å¡‘ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; sculptureList &#125; <span class="keyword">from</span> <span class="string">&#x27;./data.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [index, setIndex] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setIndex</span>(index + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> sculpture = sculptureList[index];</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Next</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;sculpture.name&#125; <span class="tag">&lt;/<span class="name">i</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">        by &#123;sculpture.artist&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>  </span></span><br><span class="line"><span class="language-xml">        (&#123;index + 1&#125; of &#123;sculptureList.length&#125;)</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&#123;sculpture.url&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&#123;sculpture.alt&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;sculpture.description&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-3-é‡è§ä½ çš„ç¬¬ä¸€ä¸ª-Hook"><a href="#3-2-3-é‡è§ä½ çš„ç¬¬ä¸€ä¸ª-Hook" class="headerlink" title="3.2.3 é‡è§ä½ çš„ç¬¬ä¸€ä¸ª Hook"></a>3.2.3 é‡è§ä½ çš„ç¬¬ä¸€ä¸ª Hook</h3><p>åœ¨ React ä¸­ï¼Œ<code>useState</code> ä»¥åŠä»»ä½•å…¶ä»–ä»¥â€œ<code>use</code>â€å¼€å¤´çš„å‡½æ•°éƒ½è¢«ç§°ä¸º <strong>Hook</strong>ã€‚</p>
<p>Hook æ˜¯ç‰¹æ®Šçš„å‡½æ•°ï¼Œåªåœ¨ React <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/render-and-commit#step-1-trigger-a-render">æ¸²æŸ“</a>æ—¶æœ‰æ•ˆï¼ˆæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚è¯¦ç»†ä»‹ç»ï¼‰ã€‚å®ƒä»¬èƒ½è®©ä½  â€œhookâ€ åˆ°ä¸åŒçš„ React ç‰¹æ€§ä¸­å»ã€‚</p>
<p>State åªæ˜¯è¿™äº›ç‰¹æ€§ä¸­çš„ä¸€ä¸ªï¼Œä½ ä¹‹åè¿˜ä¼šé‡åˆ°å…¶ä»– Hookã€‚</p>
<blockquote>
<p><strong>Hooks â€”â€”ä»¥ <code>use</code> å¼€å¤´çš„å‡½æ•°â€”â€”åªèƒ½åœ¨ç»„ä»¶æˆ–<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/reusing-logic-with-custom-hooks">è‡ªå®šä¹‰ Hook</a> çš„æœ€é¡¶å±‚è°ƒç”¨ã€‚</strong> ä½ ä¸èƒ½åœ¨æ¡ä»¶è¯­å¥ã€å¾ªç¯è¯­å¥æˆ–å…¶ä»–åµŒå¥—å‡½æ•°å†…è°ƒç”¨ Hookã€‚Hook æ˜¯å‡½æ•°ï¼Œä½†å°†å®ƒä»¬è§†ä¸ºå…³äºç»„ä»¶éœ€æ±‚çš„æ— æ¡ä»¶å£°æ˜ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚åœ¨ç»„ä»¶é¡¶éƒ¨ â€œuseâ€ React ç‰¹æ€§ï¼Œç±»ä¼¼äºåœ¨æ–‡ä»¶é¡¶éƒ¨â€œå¯¼å…¥â€æ¨¡å—ã€‚</p>
</blockquote>
<h3 id="3-2-4-å‰–æ-useState"><a href="#3-2-4-å‰–æ-useState" class="headerlink" title="3.2.4 å‰–æ useState"></a>3.2.4 å‰–æ useState</h3><p>å½“ä½ è°ƒç”¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/useState"><code>useState</code></a> æ—¶ï¼Œä½ æ˜¯åœ¨å‘Šè¯‰ React ä½ æƒ³è®©è¿™ä¸ªç»„ä»¶è®°ä½ä¸€äº›ä¸œè¥¿ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [index, setIndex] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œä½ å¸Œæœ› React è®°ä½ <code>index</code>ã€‚</p>
<blockquote>
<p>æƒ¯ä¾‹æ˜¯å°†è¿™å¯¹è¿”å›å€¼å‘½åä¸º <code>const [thing, setThing]</code>ã€‚ä½ ä¹Ÿå¯ä»¥å°†å…¶å‘½åä¸ºä»»ä½•ä½ å–œæ¬¢çš„åç§°ï¼Œä½†éµç…§çº¦å®šä¿—æˆèƒ½ä½¿è·¨é¡¹ç›®åˆä½œæ›´æ˜“ç†è§£ã€‚</p>
</blockquote>
<p><code>useState</code> çš„å”¯ä¸€å‚æ•°æ˜¯ state å˜é‡çš„<strong>åˆå§‹å€¼</strong>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>index</code> çš„åˆå§‹å€¼è¢«<code>useState(0)</code>è®¾ç½®ä¸º <code>0</code>ã€‚</p>
<p>æ¯æ¬¡ä½ çš„ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œ<code>useState</code> éƒ½ä¼šç»™ä½ ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå€¼çš„æ•°ç»„ï¼š</p>
<ol>
<li><strong>state å˜é‡</strong> (<code>index</code>) ä¼šä¿å­˜ä¸Šæ¬¡æ¸²æŸ“çš„å€¼ã€‚</li>
<li><strong>state setter å‡½æ•°</strong> (<code>setIndex</code>) å¯ä»¥æ›´æ–° state å˜é‡å¹¶è§¦å‘ React é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</li>
</ol>
<p>ä»¥ä¸‹æ˜¯å®é™…å‘ç”Ÿçš„æƒ…å†µï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [index, setIndex] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>ç»„ä»¶è¿›è¡Œç¬¬ä¸€æ¬¡æ¸²æŸ“ã€‚</strong> å› ä¸ºä½ å°† <code>0</code> ä½œä¸º <code>index</code> çš„åˆå§‹å€¼ä¼ é€’ç»™ <code>useState</code>ï¼Œå®ƒå°†è¿”å› <code>[0, setIndex]</code>ã€‚ React è®°ä½ <code>0</code> æ˜¯æœ€æ–°çš„ state å€¼ã€‚</li>
<li><strong>ä½ æ›´æ–°äº† state</strong>ã€‚å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ <code>setIndex(index + 1)</code>ã€‚ <code>index</code> æ˜¯ <code>0</code>ï¼Œæ‰€ä»¥å®ƒæ˜¯ <code>setIndex(1)</code>ã€‚è¿™å‘Šè¯‰ React ç°åœ¨è®°ä½ <code>index</code> æ˜¯ <code>1</code> å¹¶è§¦å‘ä¸‹ä¸€æ¬¡æ¸²æŸ“ã€‚</li>
<li><strong>ç»„ä»¶è¿›è¡Œç¬¬äºŒæ¬¡æ¸²æŸ“</strong>ã€‚React ä»ç„¶çœ‹åˆ° <code>useState(0)</code>ï¼Œä½†æ˜¯å› ä¸º React <em>è®°ä½</em> äº†ä½ å°† <code>index</code> è®¾ç½®ä¸ºäº† <code>1</code>ï¼Œå®ƒå°†è¿”å› <code>[1, setIndex]</code>ã€‚</li>
<li>ä»¥æ­¤ç±»æ¨ï¼</li>
</ol>
<h3 id="3-2-5-èµ‹äºˆä¸€ä¸ªç»„ä»¶å¤šä¸ª-state-å˜é‡"><a href="#3-2-5-èµ‹äºˆä¸€ä¸ªç»„ä»¶å¤šä¸ª-state-å˜é‡" class="headerlink" title="3.2.5 èµ‹äºˆä¸€ä¸ªç»„ä»¶å¤šä¸ª state å˜é‡"></a>3.2.5 èµ‹äºˆä¸€ä¸ªç»„ä»¶å¤šä¸ª state å˜é‡</h3><p>ä½ å¯ä»¥åœ¨ä¸€ä¸ªç»„ä»¶ä¸­æ‹¥æœ‰ä»»æ„å¤šç§ç±»å‹çš„ state å˜é‡ã€‚è¯¥ç»„ä»¶æœ‰ä¸¤ä¸ª state å˜é‡ï¼Œä¸€ä¸ªæ•°å­— <code>index</code> å’Œä¸€ä¸ªå¸ƒå°”å€¼ <code>showMore</code>ï¼Œç‚¹å‡» â€œShow Detailsâ€ ä¼šæ”¹å˜ <code>showMore</code> çš„å€¼ï¼š</p>
<p><code>data.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sculptureList = [&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Homenaje a la NeurocirugÃ­a&#x27;</span>,</span><br><span class="line">  <span class="attr">artist</span>: <span class="string">&#x27;Marta Colvin Andrade&#x27;</span>,</span><br><span class="line">  <span class="attr">description</span>: <span class="string">&#x27;Although Colvin is predominantly known for abstract themes that allude to pre-Hispanic symbols, this gigantic sculpture, an homage to neurosurgery, is one of her most recognizable public art pieces.&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://i.imgur.com/Mx7dA2Y.jpg&#x27;</span>,</span><br><span class="line">  <span class="attr">alt</span>: <span class="string">&#x27;A bronze statue of two crossed hands delicately holding a human brain in their fingertips.&#x27;</span>  </span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Floralis GenÃ©rica&#x27;</span>,</span><br><span class="line">  <span class="attr">artist</span>: <span class="string">&#x27;Eduardo Catalano&#x27;</span>,</span><br><span class="line">  <span class="attr">description</span>: <span class="string">&#x27;This enormous (75 ft. or 23m) silver flower is located in Buenos Aires. It is designed to move, closing its petals in the evening or when strong winds blow and opening them in the morning.&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://i.imgur.com/ZF6s192m.jpg&#x27;</span>,</span><br><span class="line">  <span class="attr">alt</span>: <span class="string">&#x27;A gigantic metallic flower sculpture with reflective mirror-like petals and strong stamens.&#x27;</span></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>

<p><code>App.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; sculptureList &#125; <span class="keyword">from</span> <span class="string">&#x27;./data.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [index, setIndex] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [showMore, setShowMore] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleNextClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setIndex</span>(index + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleMoreClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setShowMore</span>(!showMore);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> sculpture = sculptureList[index];</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleNextClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Next</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;sculpture.name&#125; <span class="tag">&lt;/<span class="name">i</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">        by &#123;sculpture.artist&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>  </span></span><br><span class="line"><span class="language-xml">        (&#123;index + 1&#125; of &#123;sculptureList.length&#125;)</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleMoreClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;showMore ? &#x27;Hide&#x27; : &#x27;Show&#x27;&#125; details</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;showMore &amp;&amp; <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;sculpture.description&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&#123;sculpture.url&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&#123;sculpture.alt&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå®ƒä»¬ä¸ç›¸å…³ï¼Œé‚£ä¹ˆå­˜åœ¨å¤šä¸ª state å˜é‡æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œä¾‹å¦‚æœ¬ä¾‹ä¸­çš„ <code>index</code> å’Œ <code>showMore</code>ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ å‘ç°ç»å¸¸åŒæ—¶æ›´æ”¹ä¸¤ä¸ª state å˜é‡ï¼Œé‚£ä¹ˆæœ€å¥½å°†å®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ªã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªåŒ…å«å¤šä¸ªå­—æ®µçš„è¡¨å•ï¼Œé‚£ä¹ˆæœ‰ä¸€ä¸ªå€¼ä¸ºå¯¹è±¡çš„ state å˜é‡æ¯”æ¯ä¸ªå­—æ®µå¯¹åº”ä¸€ä¸ª state å˜é‡æ›´æ–¹ä¾¿ã€‚ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/choosing-the-state-structure">é€‰æ‹© state ç»“æ„</a>åœ¨è¿™æ–¹é¢æœ‰æ›´å¤šæç¤ºã€‚</p>
<blockquote>
<h4 id="React-å¦‚ä½•çŸ¥é“è¿”å›å“ªä¸ª-state"><a href="#React-å¦‚ä½•çŸ¥é“è¿”å›å“ªä¸ª-state" class="headerlink" title="React å¦‚ä½•çŸ¥é“è¿”å›å“ªä¸ª state"></a>React å¦‚ä½•çŸ¥é“è¿”å›å“ªä¸ª state</h4><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œ<code>useState</code> åœ¨è°ƒç”¨æ—¶æ²¡æœ‰ä»»ä½•å…³äºå®ƒå¼•ç”¨çš„æ˜¯<em>å“ªä¸ª</em> state å˜é‡çš„ä¿¡æ¯ã€‚æ²¡æœ‰ä¼ é€’ç»™ <code>useState</code> çš„â€œæ ‡è¯†ç¬¦â€ï¼Œå®ƒæ˜¯å¦‚ä½•çŸ¥é“è¦è¿”å›å“ªä¸ª state å˜é‡å‘¢ï¼Ÿå®ƒæ˜¯å¦ä¾èµ–äºè§£æå‡½æ•°ä¹‹ç±»çš„é­”æ³•ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚</p>
<p>ç›¸åï¼Œä¸ºäº†ä½¿è¯­æ³•æ›´ç®€æ´ï¼Œ<strong>åœ¨åŒä¸€ç»„ä»¶çš„æ¯æ¬¡æ¸²æŸ“ä¸­ï¼ŒHooks éƒ½ä¾æ‰˜äºä¸€ä¸ªç¨³å®šçš„è°ƒç”¨é¡ºåº</strong>ã€‚è¿™åœ¨å®è·µä¸­å¾ˆæœ‰æ•ˆï¼Œå› ä¸ºå¦‚æœä½ éµå¾ªä¸Šé¢çš„è§„åˆ™ï¼ˆâ€œåªåœ¨é¡¶å±‚è°ƒç”¨ Hooksâ€ï¼‰ï¼ŒHooks å°†å§‹ç»ˆä»¥ç›¸åŒçš„é¡ºåºè¢«è°ƒç”¨ã€‚æ­¤å¤–ï¼Œ<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/eslint-plugin-react-hooks">linter æ’ä»¶</a>ä¹Ÿå¯ä»¥æ•è·å¤§å¤šæ•°é”™è¯¯ã€‚</p>
<p>åœ¨ React å†…éƒ¨ï¼Œä¸ºæ¯ä¸ªç»„ä»¶ä¿å­˜äº†ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ª state å¯¹ã€‚å®ƒç»´æŠ¤å½“å‰ state å¯¹çš„ç´¢å¼•å€¼ï¼Œåœ¨æ¸²æŸ“ä¹‹å‰å°†å…¶è®¾ç½®ä¸º â€œ0â€ã€‚æ¯æ¬¡è°ƒç”¨ useState æ—¶ï¼ŒReact éƒ½ä¼šä¸ºä½ æä¾›ä¸€ä¸ª state å¯¹å¹¶å¢åŠ ç´¢å¼•å€¼ã€‚ä½ å¯ä»¥åœ¨æ–‡ç«  <a target="_blank" rel="noopener" href="https://medium.com/@ryardley/react-hooks-not-magic-just-arrays-cd4f1857236e">React Hooks: not magic, just arrays</a>ä¸­é˜…è¯»æœ‰å…³æ­¤æœºåˆ¶çš„æ›´å¤šä¿¡æ¯ã€‚</p>
<p>è¿™ä¸ªä¾‹å­<strong>æ²¡æœ‰ä½¿ç”¨ React</strong>ï¼Œä½†å®ƒè®©ä½ äº†è§£ <code>useState</code> åœ¨å†…éƒ¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;nextButton&quot;</span>&gt;</span></span><br><span class="line">  Next</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">id</span>=<span class="string">&quot;header&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;moreButton&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;description&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;image&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">* &#123; <span class="attribute">box-sizing</span>: border-box; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-tag">body</span> &#123; <span class="attribute">font-family</span>: sans-serif; <span class="attribute">margin</span>: <span class="number">20px</span>; <span class="attribute">padding</span>: <span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-tag">button</span> &#123; <span class="attribute">display</span>: block; <span class="attribute">margin-bottom</span>: <span class="number">10px</span>; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> componentHooks = [];</span><br><span class="line"><span class="keyword">let</span> currentHookIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// useState åœ¨ React ä¸­æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼ˆç®€åŒ–ç‰ˆï¼‰</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useState</span>(<span class="params">initialState</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> pair = componentHooks[currentHookIndex];</span><br><span class="line">  <span class="keyword">if</span> (pair) &#123;</span><br><span class="line">    <span class="comment">// è¿™ä¸æ˜¯ç¬¬ä¸€æ¬¡æ¸²æŸ“</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥ state pair å·²ç»å­˜åœ¨</span></span><br><span class="line">    <span class="comment">// å°†å…¶è¿”å›å¹¶ä¸ºä¸‹ä¸€æ¬¡ hook çš„è°ƒç”¨åšå‡†å¤‡</span></span><br><span class="line">    currentHookIndex++;</span><br><span class="line">    <span class="keyword">return</span> pair;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¿›è¡Œæ¸²æŸ“</span></span><br><span class="line">  <span class="comment">// æ‰€ä»¥æ–°å»ºä¸€ä¸ª state pair ç„¶åå­˜å‚¨å®ƒ</span></span><br><span class="line">  pair = [initialState, setState];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">setState</span>(<span class="params">nextState</span>) &#123;</span><br><span class="line">    <span class="comment">// å½“ç”¨æˆ·å‘èµ· state çš„å˜æ›´ï¼Œ</span></span><br><span class="line">    <span class="comment">// æŠŠæ–°çš„å€¼æ”¾å…¥ pair ä¸­</span></span><br><span class="line">    pair[<span class="number">0</span>] = nextState;</span><br><span class="line">    <span class="title function_">updateDOM</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å­˜å‚¨è¿™ä¸ª pair ç”¨äºå°†æ¥çš„æ¸²æŸ“</span></span><br><span class="line">  <span class="comment">// å¹¶ä¸”ä¸ºä¸‹ä¸€æ¬¡ hook çš„è°ƒç”¨åšå‡†å¤‡</span></span><br><span class="line">  componentHooks[currentHookIndex] = pair;</span><br><span class="line">  currentHookIndex++;</span><br><span class="line">  <span class="keyword">return</span> pair;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// æ¯æ¬¡è°ƒç”¨ useState() éƒ½ä¼šå¾—åˆ°æ–°çš„ pair</span></span><br><span class="line">  <span class="keyword">const</span> [index, setIndex] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [showMore, setShowMore] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleNextClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setIndex</span>(index + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleMoreClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setShowMore</span>(!showMore);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> sculpture = sculptureList[index];</span><br><span class="line">  <span class="comment">// è¿™ä¸ªä¾‹å­æ²¡æœ‰ä½¿ç”¨ Reactï¼Œæ‰€ä»¥</span></span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ JSX</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">onNextClick</span>: handleNextClick,</span><br><span class="line">    <span class="attr">onMoreClick</span>: handleMoreClick,</span><br><span class="line">    <span class="attr">header</span>: <span class="string">`<span class="subst">$&#123;sculpture.name&#125;</span> by <span class="subst">$&#123;sculpture.artist&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">counter</span>: <span class="string">`<span class="subst">$&#123;index + <span class="number">1</span>&#125;</span> of <span class="subst">$&#123;sculptureList.length&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">more</span>: <span class="string">`<span class="subst">$&#123;showMore ? <span class="string">&#x27;Hide&#x27;</span> : <span class="string">&#x27;Show&#x27;</span>&#125;</span> details`</span>,</span><br><span class="line">    <span class="attr">description</span>: showMore ? sculpture.<span class="property">description</span> : <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">imageSrc</span>: sculpture.<span class="property">url</span>,</span><br><span class="line">    <span class="attr">imageAlt</span>: sculpture.<span class="property">alt</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateDOM</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// åœ¨æ¸²æŸ“ç»„ä»¶ä¹‹å‰</span></span><br><span class="line">  <span class="comment">// é‡ç½®å½“å‰ Hook çš„ä¸‹æ ‡</span></span><br><span class="line">  currentHookIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> output = <span class="title class_">Gallery</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–° DOM ä»¥åŒ¹é…è¾“å‡ºç»“æœ</span></span><br><span class="line">  <span class="comment">// è¿™éƒ¨åˆ†å·¥ä½œç”± React ä¸ºä½ å®Œæˆ</span></span><br><span class="line">  nextButton.<span class="property">onclick</span> = output.<span class="property">onNextClick</span>;</span><br><span class="line">  header.<span class="property">textContent</span> = output.<span class="property">header</span>;</span><br><span class="line">  moreButton.<span class="property">onclick</span> = output.<span class="property">onMoreClick</span>;</span><br><span class="line">  moreButton.<span class="property">textContent</span> = output.<span class="property">more</span>;</span><br><span class="line">  image.<span class="property">src</span> = output.<span class="property">imageSrc</span>;</span><br><span class="line">  image.<span class="property">alt</span> = output.<span class="property">imageAlt</span>;</span><br><span class="line">  <span class="keyword">if</span> (output.<span class="property">description</span> !== <span class="literal">null</span>) &#123;</span><br><span class="line">    description.<span class="property">textContent</span> = output.<span class="property">description</span>;</span><br><span class="line">    description.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    description.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nextButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;nextButton&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> header = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;header&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> moreButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;moreButton&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> description = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;description&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> image = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;image&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> sculptureList = [&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Homenaje a la NeurocirugÃ­a&#x27;</span>,</span><br><span class="line">  <span class="attr">artist</span>: <span class="string">&#x27;Marta Colvin Andrade&#x27;</span>,</span><br><span class="line">  <span class="attr">description</span>: <span class="string">&#x27;Although Colvin is predominantly known for abstract themes that allude to pre-Hispanic symbols, this gigantic sculpture, an homage to neurosurgery, is one of her most recognizable public art pieces.&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://i.imgur.com/Mx7dA2Y.jpg&#x27;</span>,</span><br><span class="line">  <span class="attr">alt</span>: <span class="string">&#x27;A bronze statue of two crossed hands delicately holding a human brain in their fingertips.&#x27;</span>  </span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Floralis GenÃ©rica&#x27;</span>,</span><br><span class="line">  <span class="attr">artist</span>: <span class="string">&#x27;Eduardo Catalano&#x27;</span>,</span><br><span class="line">  <span class="attr">description</span>: <span class="string">&#x27;This enormous (75 ft. or 23m) silver flower is located in Buenos Aires. It is designed to move, closing its petals in the evening or when strong winds blow and opening them in the morning.&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://i.imgur.com/ZF6s192m.jpg&#x27;</span>,</span><br><span class="line">  <span class="attr">alt</span>: <span class="string">&#x27;A gigantic metallic flower sculpture with reflective mirror-like petals and strong stamens.&#x27;</span></span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ UI åŒ¹é…å½“å‰ state</span></span><br><span class="line"><span class="title function_">updateDOM</span>();</span><br></pre></td></tr></table></figure>

<p>ä½ ä¸å¿…ç†è§£å®ƒå°±å¯ä»¥ä½¿ç”¨ Reactï¼Œä½†ä½ å¯èƒ½ä¼šå‘ç°è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å¿ƒæ™ºæ¨¡å‹ã€‚</p>
</blockquote>
<h3 id="3-2-6-State-æ˜¯éš”ç¦»ä¸”ç§æœ‰çš„"><a href="#3-2-6-State-æ˜¯éš”ç¦»ä¸”ç§æœ‰çš„" class="headerlink" title="3.2.6 State æ˜¯éš”ç¦»ä¸”ç§æœ‰çš„"></a>3.2.6 State æ˜¯éš”ç¦»ä¸”ç§æœ‰çš„</h3><p><code>App.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Gallery</span> <span class="keyword">from</span> <span class="string">&#x27;./Gallery.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Page</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Page&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Gallery</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Gallery</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Gallery.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; sculptureList &#125; <span class="keyword">from</span> <span class="string">&#x27;./data.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [index, setIndex] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [showMore, setShowMore] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleNextClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setIndex</span>(index + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleMoreClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setShowMore</span>(!showMore);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> sculpture = sculptureList[index];</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleNextClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Next</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;sculpture.name&#125; <span class="tag">&lt;/<span class="name">i</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">        by &#123;sculpture.artist&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span>&gt;</span>  </span></span><br><span class="line"><span class="language-xml">        (&#123;index + 1&#125; of &#123;sculptureList.length&#125;)</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleMoreClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;showMore ? &#x27;Hide&#x27; : &#x27;Show&#x27;&#125; details</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;showMore &amp;&amp; <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;sculpture.description&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&#123;sculpture.url&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&#123;sculpture.alt&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>data.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> sculptureList = [&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Homenaje a la NeurocirugÃ­a&#x27;</span>,</span><br><span class="line">  <span class="attr">artist</span>: <span class="string">&#x27;Marta Colvin Andrade&#x27;</span>,</span><br><span class="line">  <span class="attr">description</span>: <span class="string">&#x27;Although Colvin is predominantly known for abstract themes that allude to pre-Hispanic symbols, this gigantic sculpture, an homage to neurosurgery, is one of her most recognizable public art pieces.&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://i.imgur.com/Mx7dA2Y.jpg&#x27;</span>,</span><br><span class="line">  <span class="attr">alt</span>: <span class="string">&#x27;A bronze statue of two crossed hands delicately holding a human brain in their fingertips.&#x27;</span>  </span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Floralis GenÃ©rica&#x27;</span>,</span><br><span class="line">  <span class="attr">artist</span>: <span class="string">&#x27;Eduardo Catalano&#x27;</span>,</span><br><span class="line">  <span class="attr">description</span>: <span class="string">&#x27;This enormous (75 ft. or 23m) silver flower is located in Buenos Aires. It is designed to move, closing its petals in the evening or when strong winds blow and opening them in the morning.&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;https://i.imgur.com/ZF6s192m.jpg&#x27;</span>,</span><br><span class="line">  <span class="attr">alt</span>: <span class="string">&#x27;A gigantic metallic flower sculpture with reflective mirror-like petals and strong stamens.&#x27;</span></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>

<p>è¿™å°±æ˜¯ state ä¸å£°æ˜åœ¨æ¨¡å—é¡¶éƒ¨çš„æ™®é€šå˜é‡ä¸åŒçš„åŸå› ã€‚ State ä¸ä¾èµ–äºç‰¹å®šçš„å‡½æ•°è°ƒç”¨æˆ–åœ¨ä»£ç ä¸­çš„ä½ç½®ï¼Œå®ƒçš„ä½œç”¨åŸŸâ€œåªé™äºâ€å±å¹•ä¸Šçš„æŸå—ç‰¹å®šåŒºåŸŸã€‚ä½ æ¸²æŸ“äº†ä¸¤ä¸ª <code>&lt;Gallery /&gt;</code> ç»„ä»¶ï¼Œæ‰€ä»¥å®ƒä»¬çš„ state æ˜¯åˆ†åˆ«å­˜å‚¨çš„ã€‚</p>
<p>è¿˜è¦æ³¨æ„ <code>Page</code> ç»„ä»¶â€œä¸çŸ¥é“â€å…³äº <code>Gallery</code> state çš„ä»»ä½•ä¿¡æ¯ï¼Œç”šè‡³ä¸çŸ¥é“å®ƒæ˜¯å¦æœ‰ä»»ä½• stateã€‚ä¸ props ä¸åŒï¼Œ<strong>state å®Œå…¨ç§æœ‰äºå£°æ˜å®ƒçš„ç»„ä»¶</strong>ã€‚çˆ¶ç»„ä»¶æ— æ³•æ›´æ”¹å®ƒã€‚è¿™ä½¿ä½ å¯ä»¥å‘ä»»ä½•ç»„ä»¶æ·»åŠ æˆ–åˆ é™¤ stateï¼Œè€Œä¸ä¼šå½±å“å…¶ä»–ç»„ä»¶ã€‚</p>
<p>å¦‚æœä½ å¸Œæœ›ä¸¤ä¸ªç”»å»Šä¿æŒå…¶ states åŒæ­¥æ€ä¹ˆåŠï¼Ÿåœ¨ React ä¸­æ‰§è¡Œæ­¤æ“ä½œçš„æ­£ç¡®æ–¹æ³•æ˜¯ä»å­ç»„ä»¶ä¸­<em>åˆ é™¤</em> state å¹¶å°†å…¶æ·»åŠ åˆ°ç¦»å®ƒä»¬æœ€è¿‘çš„å…±äº«çˆ¶ç»„ä»¶ä¸­ã€‚æ¥ä¸‹æ¥çš„å‡ èŠ‚å°†ä¸“æ³¨äºç»„ç»‡å•ä¸ªç»„ä»¶çš„ stateï¼Œä½†æˆ‘ä»¬å°†åœ¨<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/sharing-state-between-components">ç»„ä»¶é—´å…±äº« state</a> ä¸­å›åˆ°è¿™ä¸ªä¸»é¢˜ã€‚</p>
<h3 id="3-2-7-æ‘˜è¦"><a href="#3-2-7-æ‘˜è¦" class="headerlink" title="3.2.7 æ‘˜è¦"></a>3.2.7 æ‘˜è¦</h3><ul>
<li>å½“ä¸€ä¸ªç»„ä»¶éœ€è¦åœ¨å¤šæ¬¡æ¸²æŸ“é—´â€œè®°ä½â€æŸäº›ä¿¡æ¯æ—¶ä½¿ç”¨ state å˜é‡ã€‚</li>
<li>State å˜é‡æ˜¯é€šè¿‡è°ƒç”¨ <code>useState</code> Hook æ¥å£°æ˜çš„ã€‚</li>
<li>Hook æ˜¯ä»¥ <code>use</code> å¼€å¤´çš„ç‰¹æ®Šå‡½æ•°ã€‚å®ƒä»¬èƒ½è®©ä½  â€œhookâ€ åˆ°åƒ state è¿™æ ·çš„ React ç‰¹æ€§ä¸­ã€‚</li>
<li>Hook å¯èƒ½ä¼šè®©ä½ æƒ³èµ· importï¼šå®ƒä»¬éœ€è¦åœ¨éæ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ã€‚è°ƒç”¨ Hook æ—¶ï¼ŒåŒ…æ‹¬ <code>useState</code>ï¼Œä»…åœ¨ç»„ä»¶æˆ–å¦ä¸€ä¸ª Hook çš„é¡¶å±‚è¢«è°ƒç”¨æ‰æœ‰æ•ˆã€‚</li>
<li><code>useState</code> Hook è¿”å›ä¸€å¯¹å€¼ï¼šå½“å‰ state å’Œæ›´æ–°å®ƒçš„å‡½æ•°ã€‚</li>
<li>ä½ å¯ä»¥æ‹¥æœ‰å¤šä¸ª state å˜é‡ã€‚åœ¨å†…éƒ¨ï¼ŒReact æŒ‰é¡ºåºåŒ¹é…å®ƒä»¬ã€‚</li>
<li>State æ˜¯ç»„ä»¶ç§æœ‰çš„ã€‚å¦‚æœä½ åœ¨ä¸¤ä¸ªåœ°æ–¹æ¸²æŸ“å®ƒï¼Œåˆ™æ¯ä¸ªå‰¯æœ¬éƒ½æœ‰ç‹¬å±äºè‡ªå·±çš„ stateã€‚</li>
</ul>
<h2 id="3-3-æ¸²æŸ“å’Œæäº¤"><a href="#3-3-æ¸²æŸ“å’Œæäº¤" class="headerlink" title="3.3 æ¸²æŸ“å’Œæäº¤"></a>3.3 æ¸²æŸ“å’Œæäº¤</h2><p>ç»„ä»¶æ˜¾ç¤ºåˆ°å±å¹•ä¹‹å‰ï¼Œå…¶å¿…é¡»è¢« React æ¸²æŸ“ã€‚ç†è§£è¿™äº›å¤„ç†æ­¥éª¤å°†å¸®åŠ©ä½ æ€è€ƒä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¹¶èƒ½è§£é‡Šå…¶è¡Œä¸ºã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ çš„ç»„ä»¶æ˜¯å¨æˆ¿é‡Œçš„å¨å¸ˆï¼ŒæŠŠé£Ÿæçƒ¹åˆ¶æˆç¾å‘³çš„èœè‚´ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼ŒReact å°±æ˜¯ä¸€åæœåŠ¡å‘˜ï¼Œä»–ä¼šå¸®å®¢æˆ·ä»¬ä¸‹å•å¹¶ä¸ºä»–ä»¬é€æ¥æ‰€ç‚¹çš„èœå“ã€‚è¿™ç§è¯·æ±‚å’Œæä¾› UI çš„è¿‡ç¨‹æ€»å…±åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><strong>è§¦å‘</strong> ä¸€æ¬¡æ¸²æŸ“ï¼ˆæŠŠå®¢äººçš„ç‚¹å•åˆ†å‘åˆ°å¨æˆ¿ï¼‰</li>
<li><strong>æ¸²æŸ“</strong> ç»„ä»¶ï¼ˆåœ¨å¨æˆ¿å‡†å¤‡è®¢å•ï¼‰</li>
<li><strong>æäº¤</strong> åˆ° DOMï¼ˆå°†èœå“æ”¾åœ¨æ¡Œå­ä¸Šï¼‰</li>
</ol>
<h3 id="3-3-1-æ­¥éª¤-1-è§¦å‘ä¸€æ¬¡æ¸²æŸ“"><a href="#3-3-1-æ­¥éª¤-1-è§¦å‘ä¸€æ¬¡æ¸²æŸ“" class="headerlink" title="3.3.1 æ­¥éª¤ 1: è§¦å‘ä¸€æ¬¡æ¸²æŸ“"></a>3.3.1 æ­¥éª¤ 1: è§¦å‘ä¸€æ¬¡æ¸²æŸ“</h3><p>æœ‰ä¸¤ç§åŸå› ä¼šå¯¼è‡´ç»„ä»¶çš„æ¸²æŸ“:</p>
<ol>
<li>ç»„ä»¶çš„ <strong>åˆæ¬¡æ¸²æŸ“ã€‚</strong></li>
<li>ç»„ä»¶ï¼ˆæˆ–è€…å…¶ç¥–å…ˆä¹‹ä¸€ï¼‰çš„ <strong>çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ã€‚</strong></li>
</ol>
<p><strong>åˆæ¬¡æ¸²æŸ“</strong></p>
<p>å½“åº”ç”¨å¯åŠ¨æ—¶ï¼Œä¼šè§¦å‘åˆæ¬¡æ¸²æŸ“ã€‚æ¡†æ¶å’Œæ²™ç®±æœ‰æ—¶ä¼šéšè—è¿™éƒ¨åˆ†ä»£ç ï¼Œä½†å®ƒæ˜¯é€šè¿‡è°ƒç”¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react-dom/client/createRoot"><code>createRoot</code></a> æ–¹æ³•å¹¶ä¼ å…¥ç›®æ ‡ DOM èŠ‚ç‚¹ï¼Œç„¶åç”¨ä½ çš„ç»„ä»¶è°ƒç”¨ <code>render</code> å‡½æ•°å®Œæˆçš„ï¼š</p>
<p><code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Image</span> <span class="keyword">from</span> <span class="string">&#x27;./Image.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createRoot &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Image</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure>

<p><code>image.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Image</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/ZF6s192.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;&#x27;Floralis GenÃ©rica&#x27; by Eduardo Catalano: a gigantic metallic flower sculpture with reflective petals&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯•ç€æ³¨é‡Šæ‰ <code>root.render()</code>ï¼Œç„¶åä½ å°†ä¼šçœ‹åˆ°ç»„ä»¶æ¶ˆå¤±ã€‚</p>
<p><strong>çŠ¶æ€æ›´æ–°æ—¶é‡æ–°æ¸²æŸ“</strong></p>
<p>ä¸€æ—¦ç»„ä»¶è¢«åˆæ¬¡æ¸²æŸ“ï¼Œä½ å°±å¯ä»¥é€šè¿‡ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/useState#setstate"><code>set</code> å‡½æ•°</a> æ›´æ–°å…¶çŠ¶æ€æ¥è§¦å‘ä¹‹åçš„æ¸²æŸ“ã€‚æ›´æ–°ç»„ä»¶çš„çŠ¶æ€ä¼šè‡ªåŠ¨å°†ä¸€æ¬¡æ¸²æŸ“é€å…¥é˜Ÿåˆ—ã€‚ï¼ˆä½ å¯ä»¥æŠŠè¿™ç§æƒ…å†µæƒ³è±¡æˆé¤å…å®¢äººåœ¨ç¬¬ä¸€æ¬¡ä¸‹å•ä¹‹ååˆç‚¹äº†èŒ¶ã€ç‚¹å¿ƒå’Œå„ç§ä¸œè¥¿ï¼Œå…·ä½“å–å†³äºä»–ä»¬çš„èƒƒå£ã€‚ï¼‰</p>
<h3 id="3-3-2-æ­¥éª¤-2-React-æ¸²æŸ“ä½ çš„ç»„ä»¶"><a href="#3-3-2-æ­¥éª¤-2-React-æ¸²æŸ“ä½ çš„ç»„ä»¶" class="headerlink" title="3.3.2 æ­¥éª¤ 2: React æ¸²æŸ“ä½ çš„ç»„ä»¶"></a>3.3.2 æ­¥éª¤ 2: React æ¸²æŸ“ä½ çš„ç»„ä»¶</h3><p>åœ¨ä½ è§¦å‘æ¸²æŸ“åï¼ŒReact ä¼šè°ƒç”¨ä½ çš„ç»„ä»¶æ¥ç¡®å®šè¦åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„å†…å®¹ã€‚<strong>â€œæ¸²æŸ“ä¸­â€ å³ React åœ¨è°ƒç”¨ä½ çš„ç»„ä»¶ã€‚</strong></p>
<ul>
<li><strong>åœ¨è¿›è¡Œåˆæ¬¡æ¸²æŸ“æ—¶,</strong> React ä¼šè°ƒç”¨æ ¹ç»„ä»¶ã€‚</li>
<li><strong>å¯¹äºåç»­çš„æ¸²æŸ“,</strong> React ä¼šè°ƒç”¨å†…éƒ¨çŠ¶æ€æ›´æ–°è§¦å‘äº†æ¸²æŸ“çš„å‡½æ•°ç»„ä»¶ã€‚</li>
</ul>
<p>è¿™ä¸ªè¿‡ç¨‹æ˜¯é€’å½’çš„ï¼šå¦‚æœæ›´æ–°åçš„ç»„ä»¶ä¼šè¿”å›æŸä¸ªå¦å¤–çš„ç»„ä»¶ï¼Œé‚£ä¹ˆ React æ¥ä¸‹æ¥å°±ä¼šæ¸²æŸ“ <em>é‚£ä¸ª</em> ç»„ä»¶ï¼Œè€Œå¦‚æœé‚£ä¸ªç»„ä»¶åˆè¿”å›äº†æŸä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆ React æ¥ä¸‹æ¥å°±ä¼šæ¸²æŸ“ <em>é‚£ä¸ª</em> ç»„ä»¶ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šæŒç»­ä¸‹å»ï¼Œç›´åˆ°æ²¡æœ‰æ›´å¤šçš„åµŒå¥—ç»„ä»¶å¹¶ä¸” React ç¡®åˆ‡çŸ¥é“å“ªäº›ä¸œè¥¿åº”è¯¥æ˜¾ç¤ºåˆ°å±å¹•ä¸Šä¸ºæ­¢ã€‚</p>
<p>åœ¨æ¥ä¸‹æ¥çš„ä¾‹å­ä¸­ï¼ŒReact å°†ä¼šè°ƒç”¨ <code>Gallery()</code> å’Œ <code>Image()</code> è‹¥å¹²æ¬¡ï¼š</p>
<p><code>index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Gallery</span> <span class="keyword">from</span> <span class="string">&#x27;./Gallery.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createRoot &#125; <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line">root.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">Gallery</span> /&gt;</span></span>);</span><br></pre></td></tr></table></figure>

<p><code>Gallery.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Gallery</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¼“èˆäººå¿ƒçš„é›•å¡‘<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Image</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Image</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Image</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Image</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">src</span>=<span class="string">&quot;https://i.imgur.com/ZF6s192.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">alt</span>=<span class="string">&quot;&#x27;Floralis GenÃ©rica&#x27; by Eduardo Catalano: a gigantic metallic flower sculpture with reflective petals&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>åœ¨åˆæ¬¡æ¸²æŸ“ä¸­ï¼Œ</strong> React å°†ä¼šä¸º<code>&lt;section&gt;</code>ã€<code>&lt;h1&gt;</code> å’Œä¸‰ä¸ª <code>&lt;img&gt;</code> æ ‡ç­¾ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/API/Document/createElement">åˆ›å»º DOM èŠ‚ç‚¹</a>ã€‚</li>
<li><strong>åœ¨ä¸€æ¬¡é‡æ¸²æŸ“è¿‡ç¨‹ä¸­,</strong> React å°†è®¡ç®—å®ƒä»¬çš„å“ªäº›å±æ€§ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰è‡ªä¸Šæ¬¡æ¸²æŸ“ä»¥æ¥å·²æ›´æ”¹ã€‚åœ¨ä¸‹ä¸€æ­¥ï¼ˆæäº¤é˜¶æ®µï¼‰ä¹‹å‰ï¼Œå®ƒä¸ä¼šå¯¹è¿™äº›ä¿¡æ¯æ‰§è¡Œä»»ä½•æ“ä½œã€‚</li>
</ul>
<blockquote>
<p>æ¸²æŸ“å¿…é¡»å§‹ç»ˆæ˜¯ä¸€æ¬¡ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/keeping-components-pure">çº¯è®¡ç®—</a>:</p>
<ul>
<li><strong>è¾“å…¥ç›¸åŒï¼Œè¾“å‡ºç›¸åŒã€‚</strong> ç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œç»„ä»¶åº”å§‹ç»ˆè¿”å›ç›¸åŒçš„ JSXã€‚ï¼ˆå½“æœ‰äººç‚¹äº†è¥¿çº¢æŸ¿æ²™æ‹‰æ—¶ï¼Œä»–ä»¬ä¸åº”è¯¥æ”¶åˆ°æ´‹è‘±æ²™æ‹‰ï¼ï¼‰</li>
<li><strong>åªåšå®ƒè‡ªå·±çš„äº‹æƒ…ã€‚</strong> å®ƒä¸åº”æ›´æ”¹ä»»ä½•å­˜åœ¨äºæ¸²æŸ“ä¹‹å‰çš„å¯¹è±¡æˆ–å˜é‡ã€‚ï¼ˆä¸€ä¸ªè®¢å•ä¸åº”æ›´æ”¹å…¶ä»–ä»»ä½•äººçš„è®¢å•ã€‚ï¼‰</li>
</ul>
<p>å¦åˆ™ï¼Œéšç€ä»£ç åº“å¤æ‚æ€§çš„å¢åŠ ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä»¤äººå›°æƒ‘çš„é”™è¯¯å’Œä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚åœ¨ â€œä¸¥æ ¼æ¨¡å¼â€ ä¸‹å¼€å‘æ—¶ï¼ŒReact ä¼šè°ƒç”¨æ¯ä¸ªç»„ä»¶çš„å‡½æ•°ä¸¤æ¬¡ï¼Œè¿™å¯ä»¥å¸®åŠ©å‘ç°ç”±ä¸çº¯å‡½æ•°å¼•èµ·çš„é”™è¯¯ã€‚</p>
</blockquote>
<blockquote>
<h4 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h4><p>å¦‚æœæ›´æ–°çš„ç»„ä»¶åœ¨æ ‘ä¸­çš„ä½ç½®éå¸¸é«˜ï¼Œæ¸²æŸ“æ›´æ–°åçš„ç»„ä»¶å†…éƒ¨æ‰€æœ‰åµŒå¥—ç»„ä»¶çš„é»˜è®¤è¡Œä¸ºå°†ä¸ä¼šè·å¾—æœ€ä½³æ€§èƒ½ã€‚å¦‚æœä½ é‡åˆ°äº†æ€§èƒ½é—®é¢˜ï¼Œ<a target="_blank" rel="noopener" href="https://reactjs.org/docs/optimizing-performance.html">æ€§èƒ½</a> ç« èŠ‚æè¿°äº†å‡ ç§å¯é€‰çš„è§£å†³æ–¹æ¡ˆ ã€‚<strong>ä¸è¦è¿‡æ—©è¿›è¡Œä¼˜åŒ–ï¼</strong></p>
</blockquote>
<h3 id="3-3-3-æ­¥éª¤-3-React-æŠŠæ›´æ”¹æäº¤åˆ°-DOM-ä¸Š"><a href="#3-3-3-æ­¥éª¤-3-React-æŠŠæ›´æ”¹æäº¤åˆ°-DOM-ä¸Š" class="headerlink" title="3.3.3 æ­¥éª¤ 3: React æŠŠæ›´æ”¹æäº¤åˆ° DOM ä¸Š"></a>3.3.3 æ­¥éª¤ 3: React æŠŠæ›´æ”¹æäº¤åˆ° DOM ä¸Š</h3><p>åœ¨æ¸²æŸ“ï¼ˆè°ƒç”¨ï¼‰ä½ çš„ç»„ä»¶ä¹‹åï¼ŒReact å°†ä¼šä¿®æ”¹ DOMã€‚</p>
<ul>
<li><strong>å¯¹äºåˆæ¬¡æ¸²æŸ“ï¼Œ</strong> React ä¼šä½¿ç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/docs/Web/API/Node/appendChild"><code>appendChild()</code></a> DOM API å°†å…¶åˆ›å»ºçš„æ‰€æœ‰ DOM èŠ‚ç‚¹æ”¾åœ¨å±å¹•ä¸Šã€‚</li>
<li><strong>å¯¹äºé‡æ¸²æŸ“ï¼Œ</strong> React å°†åº”ç”¨æœ€å°‘çš„å¿…è¦æ“ä½œï¼ˆåœ¨æ¸²æŸ“æ—¶è®¡ç®—ï¼ï¼‰ï¼Œä»¥ä½¿å¾— DOM ä¸æœ€æ–°çš„æ¸²æŸ“è¾“å‡ºç›¸äº’åŒ¹é…ã€‚</li>
</ul>
<p><strong>React ä»…åœ¨æ¸²æŸ“ä¹‹é—´å­˜åœ¨å·®å¼‚æ—¶æ‰ä¼šæ›´æ”¹ DOM èŠ‚ç‚¹ã€‚</strong> ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæ¯ç§’ä½¿ç”¨ä»çˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥çš„ä¸åŒå±æ€§é‡æ–°æ¸²æŸ“ä¸€æ¬¡ã€‚æ³¨æ„ï¼Œä½ å¯ä»¥æ·»åŠ ä¸€äº›æ–‡æœ¬åˆ° <code>&lt;input&gt;</code> æ ‡ç­¾ï¼Œæ›´æ–°å®ƒçš„ <code>value</code>ï¼Œä½†æ˜¯æ–‡æœ¬ä¸ä¼šåœ¨ç»„ä»¶é‡æ¸²æŸ“æ—¶æ¶ˆå¤±ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Clock</span>(<span class="params">&#123; time &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;time&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ä¹‹æ‰€ä»¥ä¼šæ­£å¸¸è¿è¡Œï¼Œæ˜¯å› ä¸ºåœ¨æœ€åä¸€æ­¥ä¸­ï¼ŒReact åªä¼šä½¿ç”¨æœ€æ–°çš„ <code>time</code> æ›´æ–° <code>&lt;h1&gt;</code> æ ‡ç­¾çš„å†…å®¹ã€‚å®ƒçœ‹åˆ° <code>&lt;input&gt;</code> æ ‡ç­¾å‡ºç°åœ¨ JSX ä¸­ä¸ä¸Šæ¬¡ç›¸åŒçš„ä½ç½®ï¼Œå› æ­¤ React ä¸ä¼šä¿®æ”¹ <code>&lt;input&gt;</code> æ ‡ç­¾æˆ–å®ƒçš„ <code>value</code>ï¼</p>
<h3 id="3-3-4-å°¾å£°ï¼šæµè§ˆå™¨ç»˜åˆ¶"><a href="#3-3-4-å°¾å£°ï¼šæµè§ˆå™¨ç»˜åˆ¶" class="headerlink" title="3.3.4 å°¾å£°ï¼šæµè§ˆå™¨ç»˜åˆ¶"></a>3.3.4 å°¾å£°ï¼šæµè§ˆå™¨ç»˜åˆ¶</h3><p>åœ¨æ¸²æŸ“å®Œæˆå¹¶ä¸” React æ›´æ–° DOM ä¹‹åï¼Œæµè§ˆå™¨å°±ä¼šé‡æ–°ç»˜åˆ¶å±å¹•ã€‚å°½ç®¡è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºâ€œæµè§ˆå™¨æ¸²æŸ“â€ï¼ˆâ€œbrowser renderingâ€ï¼‰ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å°†å®ƒç§°ä¸ºâ€œç»˜åˆ¶â€ï¼ˆâ€œpaintingâ€ï¼‰ï¼Œä»¥é¿å…åœ¨è¿™äº›æ–‡æ¡£çš„å…¶ä½™éƒ¨åˆ†ä¸­å‡ºç°æ··æ·†ã€‚</p>
<h3 id="3-3-5-æ‘˜è¦"><a href="#3-3-5-æ‘˜è¦" class="headerlink" title="3.3.5 æ‘˜è¦"></a>3.3.5 æ‘˜è¦</h3><ul>
<li>åœ¨ä¸€ä¸ª React åº”ç”¨ä¸­ä¸€æ¬¡å±å¹•æ›´æ–°éƒ½ä¼šå‘ç”Ÿä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š<ol>
<li>è§¦å‘</li>
<li>æ¸²æŸ“</li>
<li>æäº¤</li>
</ol>
</li>
<li>ä½ å¯ä»¥ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼å»æ‰¾åˆ°ç»„ä»¶ä¸­çš„é”™è¯¯</li>
<li>å¦‚æœæ¸²æŸ“ç»“æœä¸ä¸Šæ¬¡ä¸€æ ·ï¼Œé‚£ä¹ˆ React å°†ä¸ä¼šä¿®æ”¹ DOM</li>
</ul>
<h2 id="3-4-state-å¦‚åŒä¸€å¼ å¿«ç…§"><a href="#3-4-state-å¦‚åŒä¸€å¼ å¿«ç…§" class="headerlink" title="3.4 state å¦‚åŒä¸€å¼ å¿«ç…§"></a>3.4 state å¦‚åŒä¸€å¼ å¿«ç…§</h2><p>ä¹Ÿè®¸ state å˜é‡çœ‹èµ·æ¥å’Œä¸€èˆ¬çš„å¯è¯»å†™çš„ JavaScript å˜é‡ç±»ä¼¼ã€‚ä½† state åœ¨å…¶è¡¨ç°å‡ºçš„ç‰¹æ€§ä¸Šæ›´åƒæ˜¯ä¸€å¼ å¿«ç…§ã€‚è®¾ç½®å®ƒä¸ä¼šæ›´æ”¹ä½ å·²æœ‰çš„ state å˜é‡ï¼Œä½†ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p>
<h3 id="3-4-1-è®¾ç½®-state-ä¼šè§¦å‘æ¸²æŸ“"><a href="#3-4-1-è®¾ç½®-state-ä¼šè§¦å‘æ¸²æŸ“" class="headerlink" title="3.4.1 è®¾ç½® state ä¼šè§¦å‘æ¸²æŸ“"></a>3.4.1 è®¾ç½® state ä¼šè§¦å‘æ¸²æŸ“</h3><p>ä½ å¯èƒ½ä¼šè®¤ä¸ºä½ çš„ç”¨æˆ·ç•Œé¢ä¼šç›´æ¥å¯¹ç‚¹å‡»ä¹‹ç±»çš„ç”¨æˆ·è¾“å…¥åšå‡ºå“åº”å¹¶å‘ç”Ÿå˜åŒ–ã€‚åœ¨ React ä¸­ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼ä¸è¿™ç§æ€ç»´æ¨¡å‹ç•¥æœ‰ä¸åŒã€‚åœ¨ä¸Šä¸€é¡µä¸­ï¼Œä½ çœ‹åˆ°äº†æ¥è‡ª React çš„<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/render-and-commit#step-1-trigger-a-render">é‡æ–°æ¸²æŸ“å’Œæäº¤</a>ã€‚è¿™æ„å‘³ç€è¦ä½¿ç•Œé¢å¯¹è¾“å…¥åšå‡ºååº”ï¼Œä½ éœ€è¦è®¾ç½®å…¶ stateã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“ä½ æŒ‰ä¸‹ â€œsendâ€ æ—¶ï¼Œ<code>setIsSent(true)</code> ä¼šé€šçŸ¥ React é‡æ–°æ¸²æŸ“ UIï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [isSent, setIsSent] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">const</span> [message, setMessage] = <span class="title function_">useState</span>(<span class="string">&#x27;Hi!&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (isSent) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Your message is on its way!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">      e.preventDefault();</span></span><br><span class="line"><span class="language-xml">      setIsSent(true);</span></span><br><span class="line"><span class="language-xml">      sendMessage(message);</span></span><br><span class="line"><span class="language-xml">    &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">textarea</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">placeholder</span>=<span class="string">&quot;Message&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;message&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setMessage(e.target.value)&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Send<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendMessage</span>(<span class="params">message</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ä½ å•å‡»æŒ‰é’®æ—¶ä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼š</p>
<ol>
<li>æ‰§è¡Œ <code>onSubmit</code> äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
<li><code>setIsSent(true)</code> å°† <code>isSent</code> è®¾ç½®ä¸º <code>true</code> å¹¶æ’åˆ—ä¸€ä¸ªæ–°çš„æ¸²æŸ“ã€‚</li>
<li>React æ ¹æ®æ–°çš„ <code>isSent</code> å€¼é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</li>
</ol>
<p>è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹ state å’Œæ¸²æŸ“ä¹‹é—´çš„å…³ç³»ã€‚</p>
<h3 id="3-4-2-æ¸²æŸ“ä¼šåŠæ—¶ç”Ÿæˆä¸€å¼ å¿«ç…§"><a href="#3-4-2-æ¸²æŸ“ä¼šåŠæ—¶ç”Ÿæˆä¸€å¼ å¿«ç…§" class="headerlink" title="3.4.2 æ¸²æŸ“ä¼šåŠæ—¶ç”Ÿæˆä¸€å¼ å¿«ç…§"></a>3.4.2 æ¸²æŸ“ä¼šåŠæ—¶ç”Ÿæˆä¸€å¼ å¿«ç…§</h3><p><a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/render-and-commit#step-2-react-renders-your-components">â€œæ­£åœ¨æ¸²æŸ“â€</a> å°±æ„å‘³ç€ React æ­£åœ¨è°ƒç”¨ä½ çš„ç»„ä»¶â€”â€”ä¸€ä¸ªå‡½æ•°ã€‚ä½ ä»è¯¥å‡½æ•°è¿”å›çš„ JSX å°±åƒæ˜¯åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Š UI çš„å¿«ç…§ã€‚å®ƒçš„ propsã€äº‹ä»¶å¤„ç†å‡½æ•°å’Œå†…éƒ¨å˜é‡éƒ½æ˜¯ <strong>æ ¹æ®å½“å‰æ¸²æŸ“æ—¶çš„ state</strong> è¢«è®¡ç®—å‡ºæ¥çš„ã€‚</p>
<p>ä¸ç…§ç‰‡æˆ–ç”µå½±ç”»é¢ä¸åŒï¼Œä½ è¿”å›çš„ UI â€œå¿«ç…§â€æ˜¯å¯äº¤äº’çš„ã€‚å®ƒå…¶ä¸­åŒ…æ‹¬ç±»ä¼¼äº‹ä»¶å¤„ç†å‡½æ•°çš„é€»è¾‘ï¼Œè¿™äº›é€»è¾‘ç”¨äºæŒ‡å®šå¦‚ä½•å¯¹è¾“å…¥ä½œå‡ºå“åº”ã€‚React éšåä¼šæ›´æ–°å±å¹•æ¥åŒ¹é…è¿™å¼ å¿«ç…§ï¼Œå¹¶ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°ã€‚å› æ­¤ï¼ŒæŒ‰ä¸‹æŒ‰é’®å°±ä¼šè§¦å‘ä½  JSX ä¸­çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>
<p>å½“ React é‡æ–°æ¸²æŸ“ä¸€ä¸ªç»„ä»¶æ—¶ï¼š</p>
<ol>
<li>React ä¼šå†æ¬¡è°ƒç”¨ä½ çš„å‡½æ•°</li>
<li>å‡½æ•°ä¼šè¿”å›æ–°çš„ JSX å¿«ç…§</li>
<li>React ä¼šæ›´æ–°ç•Œé¢ä»¥åŒ¹é…è¿”å›çš„å¿«ç…§</li>
</ol>
<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240930092131.png"></p>
<p>ä½œä¸ºä¸€ä¸ªç»„ä»¶çš„è®°å¿†ï¼Œstate ä¸åŒäºåœ¨ä½ çš„å‡½æ•°è¿”å›ä¹‹åå°±ä¼šæ¶ˆå¤±çš„æ™®é€šå˜é‡ã€‚state å®é™…ä¸Šâ€œæ´»â€åœ¨ React æœ¬èº«ä¸­â€”â€”å°±åƒè¢«æ‘†åœ¨ä¸€ä¸ªæ¶å­ä¸Šï¼â€”â€”ä½äºä½ çš„å‡½æ•°ä¹‹å¤–ã€‚å½“ React è°ƒç”¨ä½ çš„ç»„ä»¶æ—¶ï¼Œå®ƒä¼šä¸ºç‰¹å®šçš„é‚£ä¸€æ¬¡æ¸²æŸ“æä¾›ä¸€å¼  state å¿«ç…§ã€‚ä½ çš„ç»„ä»¶ä¼šåœ¨å…¶ JSX ä¸­è¿”å›ä¸€å¼ åŒ…å«ä¸€æ•´å¥—æ–°çš„ props å’Œäº‹ä»¶å¤„ç†å‡½æ•°çš„ UI å¿«ç…§ ï¼Œå…¶ä¸­æ‰€æœ‰çš„å€¼éƒ½æ˜¯ <strong>æ ¹æ®é‚£ä¸€æ¬¡æ¸²æŸ“ä¸­ state çš„å€¼</strong> è¢«è®¡ç®—å‡ºæ¥çš„ï¼</p>
<p><img src="https://raw.githubusercontent.com/lianyutian/tuchuang1/main/img/mysql20240930092229.png"></p>
<p>è¿™é‡Œæœ‰ä¸ªå‘ä½ å±•ç¤ºå…¶è¿è¡ŒåŸç†çš„å°ä¾‹å­ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å¯èƒ½ä¼šä»¥ä¸ºç‚¹å‡»â€œ+3â€æŒ‰é’®ä¼šè°ƒç”¨ <code>setNumber(number + 1)</code> ä¸‰æ¬¡ä»è€Œä½¿è®¡æ•°å™¨é€’å¢ä¸‰æ¬¡ã€‚</p>
<p>çœ‹çœ‹ä½ ç‚¹å‡»â€œ+3â€æŒ‰é’®æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [number, setNumber] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;number&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setNumber(number + 1);</span></span><br><span class="line"><span class="language-xml">        setNumber(number + 1);</span></span><br><span class="line"><span class="language-xml">        setNumber(number + 1);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;+3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¯æ¬¡ç‚¹å‡»åªä¼š+1</span></span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ï¼Œæ¯æ¬¡ç‚¹å‡»åªä¼šè®© <code>number</code> é€’å¢ä¸€æ¬¡ï¼</p>
<p><strong>è®¾ç½® state åªä¼šä¸ºä¸‹ä¸€æ¬¡æ¸²æŸ“å˜æ›´ state çš„å€¼</strong>ã€‚åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æœŸé—´ï¼Œ<code>number</code> ä¸º <code>0</code>ã€‚è¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨ <strong>é‚£æ¬¡æ¸²æŸ“ä¸­çš„</strong> <code>onClick</code> å¤„ç†å‡½æ•°ä¸­ï¼Œå³ä¾¿åœ¨è°ƒç”¨äº† <code>setNumber(number + 1)</code> ä¹‹åï¼Œ<code>number</code> çš„å€¼ä¹Ÿä»ç„¶æ˜¯ <code>0</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setNumber</span>(number + <span class="number">1</span>);</span><br><span class="line">  <span class="title function_">setNumber</span>(number + <span class="number">1</span>);</span><br><span class="line">  <span class="title function_">setNumber</span>(number + <span class="number">1</span>);</span><br><span class="line">&#125;&#125;&gt;+<span class="number">3</span>&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯è¿™ä¸ªæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°é€šçŸ¥ React è¦åšçš„äº‹æƒ…ï¼š</p>
<ol>
<li><code>setNumber(number + 1)</code>ï¼š<code>number</code> æ˜¯ <code>0</code> æ‰€ä»¥ <code>setNumber(0 + 1)</code>ã€‚<ul>
<li>React å‡†å¤‡åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶å°† <code>number</code> æ›´æ”¹ä¸º <code>1</code>ã€‚</li>
</ul>
</li>
<li><code>setNumber(number + 1)</code>ï¼š<code>number</code> æ˜¯<code>0</code> æ‰€ä»¥ <code>setNumber(0 + 1)</code>ã€‚<ul>
<li>React å‡†å¤‡åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶å°† <code>number</code> æ›´æ”¹ä¸º <code>1</code>ã€‚</li>
</ul>
</li>
<li><code>setNumber(number + 1)</code>ï¼š<code>number</code> æ˜¯<code>0</code> æ‰€ä»¥ <code>setNumber(0 + 1)</code>ã€‚<ul>
<li>React å‡†å¤‡åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶å°† <code>number</code> æ›´æ”¹ä¸º <code>1</code>ã€‚</li>
</ul>
</li>
</ol>
<p>å°½ç®¡ä½ è°ƒç”¨äº†ä¸‰æ¬¡ <code>setNumber(number + 1)</code>ï¼Œä½†åœ¨ <strong>è¿™æ¬¡æ¸²æŸ“çš„</strong> äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ <code>number</code> ä¼šä¸€ç›´æ˜¯ <code>0</code>ï¼Œæ‰€ä»¥ä½ ä¼šä¸‰æ¬¡å°† state è®¾ç½®æˆ <code>1</code>ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ä½ çš„äº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œå®Œä»¥åï¼ŒReact é‡æ–°æ¸²æŸ“çš„ç»„ä»¶ä¸­çš„ <code>number</code> ç­‰äº <code>1</code> è€Œä¸æ˜¯ <code>3</code>ã€‚</p>
<p>ä½ è¿˜å¯ä»¥é€šè¿‡åœ¨å¿ƒé‡ŒæŠŠ state å˜é‡æ›¿æ¢æˆå®ƒä»¬åœ¨ä½ ä»£ç ä¸­çš„å€¼æ¥æƒ³è±¡è¿™ä¸ªè¿‡ç¨‹ã€‚ç”±äº <strong>è¿™æ¬¡æ¸²æŸ“</strong> ä¸­çš„ state å˜é‡ <code>number</code> æ˜¯ <code>0</code>ï¼Œå…¶äº‹ä»¶å¤„ç†å‡½æ•°çœ‹èµ·æ¥ä¼šåƒè¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setNumber</span>(<span class="number">0</span> + <span class="number">1</span>);</span><br><span class="line">  <span class="title function_">setNumber</span>(<span class="number">0</span> + <span class="number">1</span>);</span><br><span class="line">  <span class="title function_">setNumber</span>(<span class="number">0</span> + <span class="number">1</span>);</span><br><span class="line">&#125;&#125;&gt;+<span class="number">3</span>&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºä¸‹ä¸€æ¬¡æ¸²æŸ“æ¥è¯´ï¼Œ<code>number</code> æ˜¯ <code>1</code>ï¼Œå› æ­¤ <strong>é‚£æ¬¡æ¸²æŸ“ä¸­çš„</strong> ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°çœ‹èµ·æ¥ä¼šåƒè¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setNumber</span>(<span class="number">1</span> + <span class="number">1</span>);</span><br><span class="line">  <span class="title function_">setNumber</span>(<span class="number">1</span> + <span class="number">1</span>);</span><br><span class="line">  <span class="title function_">setNumber</span>(<span class="number">1</span> + <span class="number">1</span>);</span><br><span class="line">&#125;&#125;&gt;+<span class="number">3</span>&lt;/button&gt;</span><br></pre></td></tr></table></figure>

<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå†æ¬¡ç‚¹å‡»æŒ‰é’®ä¼šå°†è®¡æ•°å™¨è®¾ç½®ä¸º <code>2</code>ï¼Œä¸‹æ¬¡ç‚¹å‡»æ—¶ä¼šè®¾ä¸º <code>3</code>ï¼Œä¾æ­¤ç±»æ¨ã€‚</p>
<h3 id="3-4-4-éšæ—¶é—´å˜åŒ–çš„-state"><a href="#3-4-4-éšæ—¶é—´å˜åŒ–çš„-state" class="headerlink" title="3.4.4 éšæ—¶é—´å˜åŒ–çš„ state"></a>3.4.4 éšæ—¶é—´å˜åŒ–çš„ state</h3><p>å¥½çš„ï¼Œåˆšæ‰é‚£äº›å¾ˆæœ‰æ„æ€ã€‚è¯•ç€çŒœçŒœç‚¹å‡»è¿™ä¸ªæŒ‰é’®ä¼šå‘å‡ºä»€ä¹ˆè­¦å‘Šï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [number, setNumber] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;number&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setNumber(number + 5);</span></span><br><span class="line"><span class="language-xml">        alert(number);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;+5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// alertæ˜¾ç¤º0, numberæ¸²æŸ“ä¸º5</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ä½¿ç”¨ä¹‹å‰æ›¿æ¢çš„æ–¹æ³•ï¼Œä½ å°±èƒ½çŒœåˆ°è¿™ä¸ªæç¤ºæ¡†å°†ä¼šæ˜¾ç¤º â€œ0â€ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setNumber</span>(<span class="number">0</span> + <span class="number">5</span>);</span><br><span class="line"><span class="title function_">alert</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>ä½†å¦‚æœä½ åœ¨è¿™ä¸ªæç¤ºæ¡†ä¸ŠåŠ ä¸Šä¸€ä¸ªå®šæ—¶å™¨ï¼Œ ä½¿å¾—å®ƒåœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“ <strong>ä¹‹å</strong> æ‰è§¦å‘ï¼Œåˆä¼šæ€æ ·å‘¢ï¼Ÿæ˜¯ä¼šæ˜¾ç¤º â€œ0â€ è¿˜æ˜¯ â€œ5â€ ï¼ŸçŒœä¸€çŒœï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [number, setNumber] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;number&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setNumber(number + 5);</span></span><br><span class="line"><span class="language-xml">        setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          alert(number);</span></span><br><span class="line"><span class="language-xml">        &#125;, 3000);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;+5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ°æç¤ºæ¡†è¿è¡Œæ—¶ï¼ŒReact ä¸­å­˜å‚¨çš„ state å¯èƒ½å·²ç»å‘ç”Ÿäº†æ›´æ”¹ï¼Œä½†å®ƒæ˜¯ä½¿ç”¨ç”¨æˆ·ä¸ä¹‹äº¤äº’æ—¶çŠ¶æ€çš„å¿«ç…§è¿›è¡Œè°ƒåº¦çš„ï¼</p>
<p><strong>ä¸€ä¸ª state å˜é‡çš„å€¼æ°¸è¿œä¸ä¼šåœ¨ä¸€æ¬¡æ¸²æŸ“çš„å†…éƒ¨å‘ç”Ÿå˜åŒ–ï¼Œ</strong> å³ä½¿å…¶äº‹ä»¶å¤„ç†å‡½æ•°çš„ä»£ç æ˜¯å¼‚æ­¥çš„ã€‚åœ¨ <strong>é‚£æ¬¡æ¸²æŸ“çš„</strong> <code>onClick</code> å†…éƒ¨ï¼Œ<code>number</code> çš„å€¼å³ä½¿åœ¨è°ƒç”¨ <code>setNumber(number + 5)</code> ä¹‹åä¹Ÿè¿˜æ˜¯ <code>0</code>ã€‚å®ƒçš„å€¼åœ¨ React é€šè¿‡è°ƒç”¨ä½ çš„ç»„ä»¶â€œè·å– UI çš„å¿«ç…§â€æ—¶å°±è¢«â€œå›ºå®šâ€äº†ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªç¤ºä¾‹èƒ½å¤Ÿè¯´æ˜ä¸Šè¿°ç‰¹æ€§ä¼šä½¿ä½ çš„äº‹ä»¶å¤„ç†å‡½æ•°æ›´ä¸å®¹æ˜“å‡ºç°è®¡æ—¶é”™è¯¯ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¼šåœ¨äº”ç§’å»¶è¿Ÿä¹‹åå‘é€ä¸€æ¡æ¶ˆæ¯çš„è¡¨å•ã€‚æƒ³è±¡ä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li>ä½ æŒ‰ä¸‹â€œå‘é€â€æŒ‰é’®ï¼Œå‘ Alice å‘é€â€œä½ å¥½â€ã€‚</li>
<li>åœ¨äº”ç§’å»¶è¿Ÿç»“æŸä¹‹å‰ï¼Œå°†â€œToâ€å­—æ®µçš„å€¼æ›´æ”¹ä¸ºâ€œBobâ€ã€‚</li>
</ol>
<p>ä½ è§‰å¾— <code>alert</code> ä¼šæ˜¾ç¤ºä»€ä¹ˆï¼Ÿå®ƒæ˜¯ä¼šæ˜¾ç¤ºâ€œä½ å‘ Alice è¯´äº†ä½ å¥½â€œè¿˜æ˜¯ä¼šæ˜¾ç¤ºâ€œä½ å‘ Bob è¯´äº†ä½ å¥½â€ï¼Ÿæ ¹æ®ä½ å·²ç»å­¦åˆ°çš„çŸ¥è¯†çŒœä¸€çŒœï¼Œç„¶ååŠ¨æ‰‹è¯•ä¸€è¯•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [to, setTo] = <span class="title function_">useState</span>(<span class="string">&#x27;Alice&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [message, setMessage] = <span class="title function_">useState</span>(<span class="string">&#x27;ä½ å¥½&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleSubmit</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">`ä½ å‘ <span class="subst">$&#123;to&#125;</span> è¯´äº†<span class="subst">$&#123;message&#125;</span>`</span>);</span><br><span class="line">    &#125;, <span class="number">5000</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;handleSubmit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        To:&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;to&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setTo(e.target.value)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;Alice&quot;</span>&gt;</span>Alice<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;Bob&quot;</span>&gt;</span>Bob<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">textarea</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">placeholder</span>=<span class="string">&quot;Message&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;message&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setMessage(e.target.value)&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>å‘é€<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>React ä¼šä½¿ state çš„å€¼å§‹ç»ˆâ€œå›ºå®šâ€åœ¨ä¸€æ¬¡æ¸²æŸ“çš„å„ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°å†…éƒ¨</strong>ã€‚ä½ æ— éœ€æ‹…å¿ƒä»£ç è¿è¡Œæ—¶ state æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<p>ä½†æ˜¯ï¼Œä¸‡ä¸€ä½ æƒ³åœ¨é‡æ–°æ¸²æŸ“ä¹‹å‰è¯»å–æœ€æ–°çš„ state æ€ä¹ˆåŠï¼Ÿä½ åº”è¯¥ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/queueing-a-series-of-state-updates">çŠ¶æ€æ›´æ–°å‡½æ•°</a>ï¼</p>
<h3 id="3-4-5-æ‘˜è¦"><a href="#3-4-5-æ‘˜è¦" class="headerlink" title="3.4.5 æ‘˜è¦"></a>3.4.5 æ‘˜è¦</h3><ul>
<li>è®¾ç½® state è¯·æ±‚ä¸€æ¬¡æ–°çš„æ¸²æŸ“ã€‚</li>
<li>React å°† state å­˜å‚¨åœ¨ç»„ä»¶ä¹‹å¤–ï¼Œå°±åƒåœ¨æ¶å­ä¸Šä¸€æ ·ã€‚</li>
<li>å½“ä½ è°ƒç”¨ <code>useState</code> æ—¶ï¼ŒReact ä¼šä¸ºä½ æä¾›<strong>è¯¥æ¬¡æ¸²æŸ“</strong> çš„ä¸€å¼  state å¿«ç…§ã€‚</li>
<li>å˜é‡å’Œäº‹ä»¶å¤„ç†å‡½æ•°ä¸ä¼šåœ¨é‡æ¸²æŸ“ä¸­â€œå­˜æ´»â€ã€‚æ¯ä¸ªæ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
<li>æ¯ä¸ªæ¸²æŸ“ï¼ˆä»¥åŠå…¶ä¸­çš„å‡½æ•°ï¼‰å§‹ç»ˆâ€œçœ‹åˆ°â€çš„æ˜¯ React æä¾›ç»™<strong>è¿™ä¸ª</strong> æ¸²æŸ“çš„ state å¿«ç…§ã€‚</li>
<li>ä½ å¯ä»¥åœ¨å¿ƒä¸­æ›¿æ¢äº‹ä»¶å¤„ç†å‡½æ•°ä¸­çš„ stateï¼Œç±»ä¼¼äºæ›¿æ¢æ¸²æŸ“çš„ JSXã€‚</li>
<li>è¿‡å»åˆ›å»ºçš„äº‹ä»¶å¤„ç†å‡½æ•°æ‹¥æœ‰çš„æ˜¯åˆ›å»ºå®ƒä»¬çš„é‚£æ¬¡æ¸²æŸ“ä¸­çš„ state å€¼ã€‚</li>
</ul>
<h2 id="3-5-æŠŠä¸€ç³»åˆ—-state-æ›´æ–°åŠ å…¥é˜Ÿåˆ—"><a href="#3-5-æŠŠä¸€ç³»åˆ—-state-æ›´æ–°åŠ å…¥é˜Ÿåˆ—" class="headerlink" title="3.5 æŠŠä¸€ç³»åˆ— state æ›´æ–°åŠ å…¥é˜Ÿåˆ—"></a>3.5 æŠŠä¸€ç³»åˆ— state æ›´æ–°åŠ å…¥é˜Ÿåˆ—</h2><p>è®¾ç½®ç»„ä»¶ state ä¼šæŠŠä¸€æ¬¡é‡æ–°æ¸²æŸ“åŠ å…¥é˜Ÿåˆ—ã€‚ä½†æœ‰æ—¶ä½ å¯èƒ½ä¼šå¸Œæœ›åœ¨ä¸‹æ¬¡æ¸²æŸ“åŠ å…¥é˜Ÿåˆ—ä¹‹å‰å¯¹ state çš„å€¼æ‰§è¡Œå¤šæ¬¡æ“ä½œã€‚ä¸ºæ­¤ï¼Œäº†è§£ React å¦‚ä½•æ‰¹é‡æ›´æ–° state ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚</p>
<h3 id="3-5-1-React-ä¼šå¯¹-state-æ›´æ–°è¿›è¡Œæ‰¹å¤„ç†"><a href="#3-5-1-React-ä¼šå¯¹-state-æ›´æ–°è¿›è¡Œæ‰¹å¤„ç†" class="headerlink" title="3.5.1 React ä¼šå¯¹ state æ›´æ–°è¿›è¡Œæ‰¹å¤„ç†"></a>3.5.1 React ä¼šå¯¹ state æ›´æ–°è¿›è¡Œæ‰¹å¤„ç†</h3><p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºç‚¹å‡» â€œ+3â€ æŒ‰é’®ä¼šä½¿è®¡æ•°å™¨é€’å¢ä¸‰æ¬¡ï¼Œå› ä¸ºå®ƒè°ƒç”¨äº† <code>setNumber(number + 1)</code> ä¸‰æ¬¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [number, setNumber] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;number&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setNumber(number + 1);</span></span><br><span class="line"><span class="language-xml">        setNumber(number + 1);</span></span><br><span class="line"><span class="language-xml">        setNumber(number + 1);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;+3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œä½ å¯èƒ½è¿˜è®°å¾—ä¸Šä¸€èŠ‚ä¸­çš„å†…å®¹ï¼Œ<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-as-a-snapshot#rendering-takes-a-snapshot-in-time">æ¯ä¸€æ¬¡æ¸²æŸ“çš„ state å€¼éƒ½æ˜¯å›ºå®šçš„</a>ï¼Œå› æ­¤æ— è®ºä½ è°ƒç”¨å¤šå°‘æ¬¡ <code>setNumber(1)</code>ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„äº‹ä»¶å¤„ç†å‡½æ•°å†…éƒ¨çš„ <code>number</code> å€¼æ€»æ˜¯ <code>0</code> ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setNumber</span>(<span class="number">0</span> + <span class="number">1</span>);</span><br><span class="line"><span class="title function_">setNumber</span>(<span class="number">0</span> + <span class="number">1</span>);</span><br><span class="line"><span class="title function_">setNumber</span>(<span class="number">0</span> + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯è¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªå½±å“å› ç´ éœ€è¦è®¨è®ºã€‚<strong>React ä¼šç­‰åˆ°äº‹ä»¶å¤„ç†å‡½æ•°ä¸­çš„</strong> æ‰€æœ‰ <strong>ä»£ç éƒ½è¿è¡Œå®Œæ¯•å†å¤„ç†ä½ çš„ state æ›´æ–°ã€‚</strong> è¿™å°±æ˜¯é‡æ–°æ¸²æŸ“åªä¼šå‘ç”Ÿåœ¨æ‰€æœ‰è¿™äº› <code>setNumber()</code> è°ƒç”¨ <strong>ä¹‹å</strong> çš„åŸå› ã€‚</p>
<p>è¿™å¯èƒ½ä¼šè®©ä½ æƒ³èµ·é¤å…é‡Œå¸®ä½ ç‚¹èœçš„æœåŠ¡å‘˜ã€‚æœåŠ¡å‘˜ä¸ä¼šåœ¨ä½ è¯´ç¬¬ä¸€é“èœçš„æ—¶å€™å°±è·‘åˆ°å¨æˆ¿ï¼ç›¸åï¼Œä»–ä»¬ä¼šè®©ä½ æŠŠèœç‚¹å®Œï¼Œè®©ä½ ä¿®æ”¹èœå“ï¼Œç”šè‡³ä¼šå¸®æ¡Œä¸Šçš„å…¶ä»–äººç‚¹èœã€‚</p>
<p>è¿™è®©ä½ å¯ä»¥æ›´æ–°å¤šä¸ª state å˜é‡â€”â€”ç”šè‡³æ¥è‡ªå¤šä¸ªç»„ä»¶çš„ state å˜é‡â€”â€”è€Œä¸ä¼šè§¦å‘å¤ªå¤šçš„ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/render-and-commit#re-renders-when-state-updates">é‡æ–°æ¸²æŸ“</a>ã€‚ä½†è¿™ä¹Ÿæ„å‘³ç€åªæœ‰åœ¨ä½ çš„äº‹ä»¶å¤„ç†å‡½æ•°åŠå…¶ä¸­ä»»ä½•ä»£ç æ‰§è¡Œå®Œæˆ <strong>ä¹‹å</strong>ï¼ŒUI æ‰ä¼šæ›´æ–°ã€‚è¿™ç§ç‰¹æ€§ä¹Ÿå°±æ˜¯ <strong>æ‰¹å¤„ç†</strong>ï¼Œå®ƒä¼šä½¿ä½ çš„ React åº”ç”¨è¿è¡Œå¾—æ›´å¿«ã€‚å®ƒè¿˜ä¼šå¸®ä½ é¿å…å¤„ç†åªæ›´æ–°äº†ä¸€éƒ¨åˆ† state å˜é‡çš„ä»¤äººå›°æƒ‘çš„â€œåŠæˆå“â€æ¸²æŸ“ã€‚</p>
<p><strong>React ä¸ä¼šè·¨ <em>å¤šä¸ª</em> éœ€è¦åˆ»æ„è§¦å‘çš„äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»ï¼‰è¿›è¡Œæ‰¹å¤„ç†</strong>â€”â€”æ¯æ¬¡ç‚¹å‡»éƒ½æ˜¯å•ç‹¬å¤„ç†çš„ã€‚è¯·æ”¾å¿ƒï¼ŒReact åªä¼šåœ¨ä¸€èˆ¬æ¥è¯´å®‰å…¨çš„æƒ…å†µä¸‹æ‰è¿›è¡Œæ‰¹å¤„ç†ã€‚è¿™å¯ä»¥ç¡®ä¿ï¼Œä¾‹å¦‚ï¼Œå¦‚æœç¬¬ä¸€æ¬¡ç‚¹å‡»æŒ‰é’®ä¼šç¦ç”¨è¡¨å•ï¼Œé‚£ä¹ˆç¬¬äºŒæ¬¡ç‚¹å‡»å°±ä¸ä¼šå†æ¬¡æäº¤å®ƒã€‚</p>
<h3 id="3-5-2-åœ¨ä¸‹æ¬¡æ¸²æŸ“å‰å¤šæ¬¡æ›´æ–°åŒä¸€ä¸ª-state"><a href="#3-5-2-åœ¨ä¸‹æ¬¡æ¸²æŸ“å‰å¤šæ¬¡æ›´æ–°åŒä¸€ä¸ª-state" class="headerlink" title="3.5.2 åœ¨ä¸‹æ¬¡æ¸²æŸ“å‰å¤šæ¬¡æ›´æ–°åŒä¸€ä¸ª state"></a>3.5.2 åœ¨ä¸‹æ¬¡æ¸²æŸ“å‰å¤šæ¬¡æ›´æ–°åŒä¸€ä¸ª state</h3><p>è¿™æ˜¯ä¸€ä¸ªä¸å¸¸è§çš„ç”¨ä¾‹ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³åœ¨ä¸‹æ¬¡æ¸²æŸ“ä¹‹å‰å¤šæ¬¡æ›´æ–°åŒä¸€ä¸ª stateï¼Œä½ å¯ä»¥åƒ <code>setNumber(n =&gt; n + 1)</code> è¿™æ ·ä¼ å…¥ä¸€ä¸ªæ ¹æ®é˜Ÿåˆ—ä¸­çš„å‰ä¸€ä¸ª state è®¡ç®—ä¸‹ä¸€ä¸ª state çš„ <strong>å‡½æ•°</strong>ï¼Œè€Œä¸æ˜¯åƒ <code>setNumber(number + 1)</code> è¿™æ ·ä¼ å…¥ <strong>ä¸‹ä¸€ä¸ª state å€¼</strong>ã€‚è¿™æ˜¯ä¸€ç§å‘Šè¯‰ React â€œç”¨ state å€¼åšæŸäº‹â€è€Œä¸æ˜¯ä»…ä»…æ›¿æ¢å®ƒçš„æ–¹æ³•ã€‚</p>
<p>ç°åœ¨å°è¯•é€’å¢è®¡æ•°å™¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [number, setNumber] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;number&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setNumber(n =&gt; n + 1);</span></span><br><span class="line"><span class="language-xml">        setNumber(n =&gt; n + 1);</span></span><br><span class="line"><span class="language-xml">        setNumber(n =&gt; n + 1);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;+3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™é‡Œï¼Œ<code>n =&gt; n + 1</code> è¢«ç§°ä¸º <strong>æ›´æ–°å‡½æ•°</strong>ã€‚å½“ä½ å°†å®ƒä¼ é€’ç»™ä¸€ä¸ª state è®¾ç½®å‡½æ•°æ—¶ï¼š</p>
<ol>
<li>React ä¼šå°†æ­¤å‡½æ•°åŠ å…¥é˜Ÿåˆ—ï¼Œä»¥ä¾¿åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­çš„æ‰€æœ‰å…¶ä»–ä»£ç è¿è¡Œåè¿›è¡Œå¤„ç†ã€‚</li>
<li>åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æœŸé—´ï¼ŒReact ä¼šéå†é˜Ÿåˆ—å¹¶ç»™ä½ æ›´æ–°ä¹‹åçš„æœ€ç»ˆ stateã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setNumber</span>(<span class="function"><span class="params">n</span> =&gt;</span> n + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">setNumber</span>(<span class="function"><span class="params">n</span> =&gt;</span> n + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">setNumber</span>(<span class="function"><span class="params">n</span> =&gt;</span> n + <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æ˜¯ React åœ¨æ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°æ—¶å¤„ç†è¿™å‡ è¡Œä»£ç çš„è¿‡ç¨‹ï¼š</p>
<ol>
<li><code>setNumber(n =&gt; n + 1)</code>ï¼š<code>n =&gt; n + 1</code> æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚React å°†å®ƒåŠ å…¥é˜Ÿåˆ—ã€‚</li>
<li><code>setNumber(n =&gt; n + 1)</code>ï¼š<code>n =&gt; n + 1</code> æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚React å°†å®ƒåŠ å…¥é˜Ÿåˆ—ã€‚</li>
<li><code>setNumber(n =&gt; n + 1)</code>ï¼š<code>n =&gt; n + 1</code> æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚React å°†å®ƒåŠ å…¥é˜Ÿåˆ—ã€‚</li>
</ol>
<p>å½“ä½ åœ¨ä¸‹æ¬¡æ¸²æŸ“æœŸé—´è°ƒç”¨ <code>useState</code> æ—¶ï¼ŒReact ä¼šéå†é˜Ÿåˆ—ã€‚ä¹‹å‰çš„ <code>number</code> state çš„å€¼æ˜¯ <code>0</code>ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ React ä½œä¸ºå‚æ•° <code>n</code> ä¼ é€’ç»™ç¬¬ä¸€ä¸ªæ›´æ–°å‡½æ•°çš„å€¼ã€‚ç„¶å React ä¼šè·å–ä½ ä¸Šä¸€ä¸ªæ›´æ–°å‡½æ•°çš„è¿”å›å€¼ï¼Œå¹¶å°†å…¶ä½œä¸º <code>n</code> ä¼ é€’ç»™ä¸‹ä¸€ä¸ªæ›´æ–°å‡½æ•°ï¼Œä»¥æ­¤ç±»æ¨ï¼š</p>
<table>
<thead>
<tr>
<th>æ›´æ–°é˜Ÿåˆ—</th>
<th><code>n</code></th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody><tr>
<td><code>n =&gt; n + 1</code></td>
<td><code>0</code></td>
<td><code>0 + 1 = 1</code></td>
</tr>
<tr>
<td><code>n =&gt; n + 1</code></td>
<td><code>1</code></td>
<td><code>1 + 1 = 2</code></td>
</tr>
<tr>
<td><code>n =&gt; n + 1</code></td>
<td><code>2</code></td>
<td><code>2 + 1 = 3</code></td>
</tr>
</tbody></table>
<p>React ä¼šä¿å­˜ <code>3</code> ä¸ºæœ€ç»ˆç»“æœå¹¶ä» <code>useState</code> ä¸­è¿”å›ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ç‚¹å‡»â€œ+3â€æ­£ç¡®åœ°å°†å€¼å¢åŠ â€œ+3â€ã€‚</p>
<h3 id="3-5-3-å¦‚æœä½ åœ¨æ›¿æ¢-state-åæ›´æ–°-state-ä¼šå‘ç”Ÿä»€ä¹ˆ"><a href="#3-5-3-å¦‚æœä½ åœ¨æ›¿æ¢-state-åæ›´æ–°-state-ä¼šå‘ç”Ÿä»€ä¹ˆ" class="headerlink" title="3.5.3 å¦‚æœä½ åœ¨æ›¿æ¢ state åæ›´æ–° state ä¼šå‘ç”Ÿä»€ä¹ˆ?"></a>3.5.3 å¦‚æœä½ åœ¨æ›¿æ¢ state åæ›´æ–° state ä¼šå‘ç”Ÿä»€ä¹ˆ?</h3><p>è¿™ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ä¼šæ€ä¹ˆæ ·ï¼Ÿä½ è®¤ä¸º <code>number</code> åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“ä¸­çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setNumber</span>(number + <span class="number">5</span>);</span><br><span class="line">  <span class="title function_">setNumber</span>(<span class="function"><span class="params">n</span> =&gt;</span> n + <span class="number">1</span>);</span><br><span class="line">&#125;&#125;&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [number, setNumber] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;number&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setNumber(number + 5);</span></span><br><span class="line"><span class="language-xml">        setNumber(n =&gt; n + 1);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;å¢åŠ æ•°å­—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯äº‹ä»¶å¤„ç†å‡½æ•°å‘Šè¯‰ React è¦åšçš„äº‹æƒ…ï¼š</p>
<ol>
<li><code>setNumber(number + 5)</code>ï¼š<code>number</code> ä¸º <code>0</code>ï¼Œæ‰€ä»¥ <code>setNumber(0 + 5)</code>ã€‚React å°† <em>â€œæ›¿æ¢ä¸º <code>5</code>â€</em> æ·»åŠ åˆ°å…¶é˜Ÿåˆ—ä¸­ã€‚</li>
<li><code>setNumber(n =&gt; n + 1)</code>ï¼š<code>n =&gt; n + 1</code> æ˜¯ä¸€ä¸ªæ›´æ–°å‡½æ•°ã€‚ React å°† <strong>è¯¥å‡½æ•°</strong> æ·»åŠ åˆ°å…¶é˜Ÿåˆ—ä¸­ã€‚</li>
</ol>
<p>åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æœŸé—´ï¼ŒReact ä¼šéå† state é˜Ÿåˆ—ï¼š</p>
<table>
<thead>
<tr>
<th>æ›´æ–°é˜Ÿåˆ—</th>
<th><code>n</code></th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>â€œæ›¿æ¢ä¸º <code>5</code>â€</td>
<td><code>0</code>ï¼ˆæœªä½¿ç”¨ï¼‰</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>n =&gt; n + 1</code></td>
<td><code>5</code></td>
<td><code>5 + 1 = 6</code></td>
</tr>
</tbody></table>
<p>React ä¼šä¿å­˜ <code>6</code> ä¸ºæœ€ç»ˆç»“æœå¹¶ä» <code>useState</code> ä¸­è¿”å›ã€‚</p>
<blockquote>
<p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œ<code>setState(x)</code> å®é™…ä¸Šä¼šåƒ <code>setState(n =&gt; x)</code> ä¸€æ ·è¿è¡Œï¼Œåªæ˜¯æ²¡æœ‰ä½¿ç”¨ <code>n</code>ï¼</p>
</blockquote>
<h3 id="3-5-4-å¦‚æœä½ åœ¨æ›´æ–°-state-åæ›¿æ¢-state-ä¼šå‘ç”Ÿä»€ä¹ˆ"><a href="#3-5-4-å¦‚æœä½ åœ¨æ›´æ–°-state-åæ›¿æ¢-state-ä¼šå‘ç”Ÿä»€ä¹ˆ" class="headerlink" title="3.5.4 å¦‚æœä½ åœ¨æ›´æ–° state åæ›¿æ¢ state ä¼šå‘ç”Ÿä»€ä¹ˆ ?"></a>3.5.4 å¦‚æœä½ åœ¨æ›´æ–° state åæ›¿æ¢ state ä¼šå‘ç”Ÿä»€ä¹ˆ ?</h3><p>è®©æˆ‘ä»¬å†çœ‹ä¸€ä¸ªä¾‹å­ã€‚ä½ è®¤ä¸º <code>number</code> åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“ä¸­çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setNumber</span>(number + <span class="number">5</span>);</span><br><span class="line">  <span class="title function_">setNumber</span>(<span class="function"><span class="params">n</span> =&gt;</span> n + <span class="number">1</span>);</span><br><span class="line">  <span class="title function_">setNumber</span>(<span class="number">42</span>);</span><br><span class="line">&#125;&#125;&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [number, setNumber] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;number&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setNumber(number + 5);</span></span><br><span class="line"><span class="language-xml">        setNumber(n =&gt; n + 1);</span></span><br><span class="line"><span class="language-xml">        setNumber(42);</span></span><br><span class="line"><span class="language-xml">        alert(number)</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;å¢åŠ æ•°å­—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯ React åœ¨æ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°æ—¶å¤„ç†è¿™å‡ è¡Œä»£ç çš„è¿‡ç¨‹ï¼š</p>
<ol>
<li><code>setNumber(number + 5)</code>ï¼š<code>number</code> ä¸º <code>0</code>ï¼Œæ‰€ä»¥ <code>setNumber(0 + 5)</code>ã€‚React å°† <em>â€œæ›¿æ¢ä¸º <code>5</code>â€</em> æ·»åŠ åˆ°å…¶é˜Ÿåˆ—ä¸­ã€‚</li>
<li><code>setNumber(n =&gt; n + 1)</code>ï¼š<code>n =&gt; n + 1</code> æ˜¯ä¸€ä¸ªæ›´æ–°å‡½æ•°ã€‚React å°†è¯¥å‡½æ•°æ·»åŠ åˆ°å…¶é˜Ÿåˆ—ä¸­ã€‚</li>
<li><code>setNumber(42)</code>ï¼šReact å°† <em>â€œæ›¿æ¢ä¸º <code>42</code>â€</em> æ·»åŠ åˆ°å…¶é˜Ÿåˆ—ä¸­ã€‚</li>
</ol>
<p>åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æœŸé—´ï¼ŒReact ä¼šéå† state é˜Ÿåˆ—ï¼š</p>
<table>
<thead>
<tr>
<th>æ›´æ–°é˜Ÿåˆ—</th>
<th><code>n</code></th>
<th>è¿”å›å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>â€œæ›¿æ¢ä¸º <code>5</code>â€</td>
<td><code>0</code>ï¼ˆæœªä½¿ç”¨ï¼‰</td>
<td><code>5</code></td>
</tr>
<tr>
<td><code>n =&gt; n + 1</code></td>
<td><code>5</code></td>
<td><code>5 + 1 = 6</code></td>
</tr>
<tr>
<td>â€œæ›¿æ¢ä¸º <code>42</code>â€</td>
<td><code>6</code>ï¼ˆæœªä½¿ç”¨ï¼‰</td>
<td><code>42</code></td>
</tr>
</tbody></table>
<p>ç„¶å React ä¼šä¿å­˜ <code>42</code> ä¸ºæœ€ç»ˆç»“æœå¹¶ä» <code>useState</code> ä¸­è¿”å›ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œä»¥ä¸‹æ˜¯ä½ å¯ä»¥è€ƒè™‘ä¼ é€’ç»™ <code>setNumber</code> state è®¾ç½®å‡½æ•°çš„å†…å®¹ï¼š</p>
<ul>
<li><strong>ä¸€ä¸ªæ›´æ–°å‡½æ•°</strong>ï¼ˆä¾‹å¦‚ï¼š<code>n =&gt; n + 1</code>ï¼‰ä¼šè¢«æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ã€‚</li>
<li><strong>ä»»ä½•å…¶ä»–çš„å€¼</strong>ï¼ˆä¾‹å¦‚ï¼šæ•°å­— <code>5</code>ï¼‰ä¼šå¯¼è‡´â€œæ›¿æ¢ä¸º <code>5</code>â€è¢«æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œå·²ç»åœ¨é˜Ÿåˆ—ä¸­çš„å†…å®¹ä¼šè¢«å¿½ç•¥ã€‚</li>
</ul>
<p>äº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œå®Œæˆåï¼ŒReact å°†è§¦å‘é‡æ–°æ¸²æŸ“ã€‚åœ¨é‡æ–°æ¸²æŸ“æœŸé—´ï¼ŒReact å°†å¤„ç†é˜Ÿåˆ—ã€‚æ›´æ–°å‡½æ•°ä¼šåœ¨æ¸²æŸ“æœŸé—´æ‰§è¡Œï¼Œå› æ­¤ <strong>æ›´æ–°å‡½æ•°å¿…é¡»æ˜¯ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/keeping-components-pure">çº¯å‡½æ•°</a></strong> å¹¶ä¸”åª <strong>è¿”å›</strong> ç»“æœã€‚ä¸è¦å°è¯•ä»å®ƒä»¬å†…éƒ¨è®¾ç½® state æˆ–è€…æ‰§è¡Œå…¶ä»–å‰¯ä½œç”¨ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒReact ä¼šæ‰§è¡Œæ¯ä¸ªæ›´æ–°å‡½æ•°ä¸¤æ¬¡ï¼ˆä½†æ˜¯ä¸¢å¼ƒç¬¬äºŒä¸ªç»“æœï¼‰ä»¥ä¾¿å¸®åŠ©ä½ å‘ç°é”™è¯¯ã€‚</p>
<h3 id="3-5-5-å‘½åæƒ¯ä¾‹"><a href="#3-5-5-å‘½åæƒ¯ä¾‹" class="headerlink" title="3.5.5 å‘½åæƒ¯ä¾‹"></a>3.5.5 å‘½åæƒ¯ä¾‹</h3><p>é€šå¸¸å¯ä»¥é€šè¿‡ç›¸åº” state å˜é‡çš„ç¬¬ä¸€ä¸ªå­—æ¯æ¥å‘½åæ›´æ–°å‡½æ•°çš„å‚æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setEnabled</span>(<span class="function"><span class="params">e</span> =&gt;</span> !e);</span><br><span class="line"><span class="title function_">setLastName</span>(<span class="function"><span class="params">ln</span> =&gt;</span> ln.<span class="title function_">reverse</span>());</span><br><span class="line"><span class="title function_">setFriendCount</span>(<span class="function"><span class="params">fc</span> =&gt;</span> fc * <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ å–œæ¬¢æ›´å†—é•¿çš„ä»£ç ï¼Œå¦ä¸€ä¸ªå¸¸è§çš„æƒ¯ä¾‹æ˜¯é‡å¤ä½¿ç”¨å®Œæ•´çš„ state å˜é‡åç§°ï¼Œå¦‚ <code>setEnabled(enabled =&gt; !enabled)</code>ï¼Œæˆ–ä½¿ç”¨å‰ç¼€ï¼Œå¦‚ <code>setEnabled(prevEnabled =&gt; !prevEnabled)</code>ã€‚</p>
<h3 id="3-5-6-æ‘˜è¦"><a href="#3-5-6-æ‘˜è¦" class="headerlink" title="3.5.6 æ‘˜è¦"></a>3.5.6 æ‘˜è¦</h3><ul>
<li>è®¾ç½® state ä¸ä¼šæ›´æ”¹ç°æœ‰æ¸²æŸ“ä¸­çš„å˜é‡ï¼Œä½†ä¼šè¯·æ±‚ä¸€æ¬¡æ–°çš„æ¸²æŸ“ã€‚</li>
<li>React ä¼šåœ¨äº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œå®Œæˆä¹‹åå¤„ç† state æ›´æ–°ã€‚è¿™è¢«ç§°ä¸ºæ‰¹å¤„ç†ã€‚</li>
<li>è¦åœ¨ä¸€ä¸ªäº‹ä»¶ä¸­å¤šæ¬¡æ›´æ–°æŸäº› stateï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>setNumber(n =&gt; n + 1)</code> æ›´æ–°å‡½æ•°ã€‚</li>
</ul>
<h2 id="3-6-æ›´æ–°-state-ä¸­çš„å¯¹è±¡"><a href="#3-6-æ›´æ–°-state-ä¸­çš„å¯¹è±¡" class="headerlink" title="3.6 æ›´æ–° state ä¸­çš„å¯¹è±¡"></a>3.6 æ›´æ–° state ä¸­çš„å¯¹è±¡</h2><p>state ä¸­å¯ä»¥ä¿å­˜ä»»æ„ç±»å‹çš„ JavaScript å€¼ï¼ŒåŒ…æ‹¬å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä½ ä¸åº”è¯¥ç›´æ¥ä¿®æ”¹å­˜æ”¾åœ¨ React state ä¸­çš„å¯¹è±¡ã€‚ç›¸åï¼Œå½“ä½ æƒ³è¦æ›´æ–°ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆæˆ–è€…å°†å…¶æ‹·è´ä¸€ä»½ï¼‰ï¼Œç„¶åå°† state æ›´æ–°ä¸ºæ­¤å¯¹è±¡ã€‚</p>
<h3 id="3-6-1-ä»€ä¹ˆæ˜¯-mutationï¼Ÿ"><a href="#3-6-1-ä»€ä¹ˆæ˜¯-mutationï¼Ÿ" class="headerlink" title="3.6.1 ä»€ä¹ˆæ˜¯ mutationï¼Ÿ"></a>3.6.1 ä»€ä¹ˆæ˜¯ mutationï¼Ÿ</h3><p>ä½ å¯ä»¥åœ¨ state ä¸­å­˜æ”¾ä»»æ„ç±»å‹çš„ JavaScript å€¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [x, setX] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å°è¯•è¿‡åœ¨ state ä¸­å­˜æ”¾æ•°å­—ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œè¿™äº›ç±»å‹çš„å€¼åœ¨ JavaScript ä¸­æ˜¯ä¸å¯å˜ï¼ˆimmutableï¼‰çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¸èƒ½è¢«æ”¹å˜æˆ–æ˜¯åªè¯»çš„ã€‚ä½ å¯ä»¥é€šè¿‡æ›¿æ¢å®ƒä»¬çš„å€¼ä»¥è§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setX</span>(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<p>state <code>x</code> ä» <code>0</code> å˜ä¸º <code>5</code>ï¼Œä½†æ˜¯æ•°å­— <code>0</code> æœ¬èº«å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚åœ¨ JavaScript ä¸­ï¼Œæ— æ³•å¯¹å†…ç½®çš„åŸå§‹å€¼ï¼Œå¦‚æ•°å­—ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œè¿›è¡Œä»»ä½•æ›´æ”¹ã€‚</p>
<p>ç°åœ¨è€ƒè™‘ state ä¸­å­˜æ”¾å¯¹è±¡çš„æƒ…å†µï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [position, setPosition] = <span class="title function_">useState</span>(&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;);</span><br></pre></td></tr></table></figure>

<p>ä»æŠ€æœ¯ä¸Šæ¥è®²ï¼Œå¯ä»¥æ”¹å˜å¯¹è±¡è‡ªèº«çš„å†…å®¹ã€‚<strong>å½“ä½ è¿™æ ·åšæ—¶ï¼Œå°±åˆ¶é€ äº†ä¸€ä¸ª mutation</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">position.<span class="property">x</span> = <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œï¼Œè™½ç„¶ä¸¥æ ¼æ¥è¯´ React state ä¸­å­˜æ”¾çš„å¯¹è±¡æ˜¯å¯å˜çš„ï¼Œä½†ä½ åº”è¯¥åƒå¤„ç†æ•°å­—ã€å¸ƒå°”å€¼ã€å­—ç¬¦ä¸²ä¸€æ ·å°†å®ƒä»¬è§†ä¸ºä¸å¯å˜çš„ã€‚å› æ­¤ä½ åº”è¯¥æ›¿æ¢å®ƒä»¬çš„å€¼ï¼Œè€Œä¸æ˜¯å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹ã€‚</p>
<h3 id="3-6-2-å°†-state-è§†ä¸ºåªè¯»çš„"><a href="#3-6-2-å°†-state-è§†ä¸ºåªè¯»çš„" class="headerlink" title="3.6.2 å°† state è§†ä¸ºåªè¯»çš„"></a>3.6.2 å°† state è§†ä¸ºåªè¯»çš„</h3><p>æ¢å¥è¯è¯´ï¼Œä½ åº”è¯¥ <strong>æŠŠæ‰€æœ‰å­˜æ”¾åœ¨ state ä¸­çš„ JavaScript å¯¹è±¡éƒ½è§†ä¸ºåªè¯»çš„</strong>ã€‚</p>
<p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå­˜æ”¾åœ¨ state ä¸­çš„å¯¹è±¡æ¥è¡¨ç¤ºæŒ‡é’ˆå½“å‰çš„ä½ç½®ã€‚å½“ä½ åœ¨é¢„è§ˆåŒºè§¦æ‘¸æˆ–ç§»åŠ¨å…‰æ ‡æ—¶ï¼Œçº¢è‰²çš„ç‚¹æœ¬åº”ç§»åŠ¨ã€‚ä½†æ˜¯å®é™…ä¸Šçº¢ç‚¹ä»åœç•™åœ¨åŸå¤„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">MovingDot</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [position, setPosition] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onPointerMove</span>=<span class="string">&#123;e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        position.x = e.clientX;</span></span><br><span class="line"><span class="language-xml">        position.y = e.clientY;</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      style=&#123;&#123;</span></span><br><span class="line"><span class="language-xml">        position: &#x27;relative&#x27;,</span></span><br><span class="line"><span class="language-xml">        width: &#x27;100vw&#x27;,</span></span><br><span class="line"><span class="language-xml">        height: &#x27;100vh&#x27;,</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">position:</span> &#x27;<span class="attr">absolute</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">backgroundColor:</span> &#x27;<span class="attr">red</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">borderRadius:</span> &#x27;<span class="attr">50</span>%&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">transform:</span> `<span class="attr">translate</span>($&#123;<span class="attr">position.x</span>&#125;<span class="attr">px</span>, $&#123;<span class="attr">position.y</span>&#125;<span class="attr">px</span>)`,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">left:</span> <span class="attr">-10</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">top:</span> <span class="attr">-10</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">width:</span> <span class="attr">20</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">height:</span> <span class="attr">20</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#125;&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜å‡ºåœ¨ä¸‹é¢è¿™æ®µä»£ç ä¸­ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onPointerMove=&#123;<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  position.<span class="property">x</span> = e.<span class="property">clientX</span>;</span><br><span class="line">  position.<span class="property">y</span> = e.<span class="property">clientY</span>;</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç ç›´æ¥ä¿®æ”¹äº† <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-as-a-snapshot#rendering-takes-a-snapshot-in-time">ä¸Šä¸€æ¬¡æ¸²æŸ“ä¸­</a> åˆ†é…ç»™ <code>position</code> çš„å¯¹è±¡ã€‚ä½†æ˜¯å› ä¸ºå¹¶æ²¡æœ‰ä½¿ç”¨ state çš„è®¾ç½®å‡½æ•°ï¼ŒReact å¹¶ä¸çŸ¥é“å¯¹è±¡å·²æ›´æ”¹ã€‚æ‰€ä»¥ React æ²¡æœ‰åšå‡ºä»»ä½•å“åº”ã€‚è¿™å°±åƒåœ¨åƒå®Œé¥­ä¹‹åæ‰å°è¯•å»æ”¹å˜è¦ç‚¹çš„èœä¸€æ ·ã€‚è™½ç„¶åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œç›´æ¥ä¿®æ”¹ state å¯èƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æˆ‘ä»¬å¹¶ä¸æ¨èè¿™ä¹ˆåšã€‚ä½ åº”è¯¥æŠŠåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­å¯ä»¥è®¿é—®åˆ°çš„ state è§†ä¸ºåªè¯»çš„ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†çœŸæ­£åœ° <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-as-a-snapshot#setting-state-triggers-renders">è§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“</a>ï¼Œ<strong>ä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡å¹¶æŠŠå®ƒä¼ é€’ç»™ state çš„è®¾ç½®å‡½æ•°</strong>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onPointerMove=&#123;<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setPosition</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: e.<span class="property">clientX</span>,</span><br><span class="line">    <span class="attr">y</span>: e.<span class="property">clientY</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä½¿ç”¨ <code>setPosition</code>ï¼Œä½ åœ¨å‘Šè¯‰ Reactï¼š</p>
<ul>
<li>ä½¿ç”¨è¿™ä¸ªæ–°çš„å¯¹è±¡æ›¿æ¢ <code>position</code> çš„å€¼</li>
<li>ç„¶åå†æ¬¡æ¸²æŸ“è¿™ä¸ªç»„ä»¶</li>
</ul>
<p>ç°åœ¨ä½ å¯ä»¥çœ‹åˆ°ï¼Œå½“ä½ åœ¨é¢„è§ˆåŒºè§¦æ‘¸æˆ–ç§»åŠ¨å…‰æ ‡æ—¶ï¼Œçº¢ç‚¹ä¼šè·Ÿéšç€ä½ çš„æŒ‡é’ˆç§»åŠ¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">MovingDot</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [position, setPosition] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">0</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onPointerMove</span>=<span class="string">&#123;e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setPosition(&#123;</span></span><br><span class="line"><span class="language-xml">          x: e.clientX,</span></span><br><span class="line"><span class="language-xml">          y: e.clientY</span></span><br><span class="line"><span class="language-xml">        &#125;);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      style=&#123;&#123;</span></span><br><span class="line"><span class="language-xml">        position: &#x27;relative&#x27;,</span></span><br><span class="line"><span class="language-xml">        width: &#x27;100vw&#x27;,</span></span><br><span class="line"><span class="language-xml">        height: &#x27;100vh&#x27;,</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">position:</span> &#x27;<span class="attr">absolute</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">backgroundColor:</span> &#x27;<span class="attr">red</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">borderRadius:</span> &#x27;<span class="attr">50</span>%&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">transform:</span> `<span class="attr">translate</span>($&#123;<span class="attr">position.x</span>&#125;<span class="attr">px</span>, $&#123;<span class="attr">position.y</span>&#125;<span class="attr">px</span>)`,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">left:</span> <span class="attr">-10</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">top:</span> <span class="attr">-10</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">width:</span> <span class="attr">20</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">height:</span> <span class="attr">20</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &#125;&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<h4 id="å±€éƒ¨-mutation-æ˜¯å¯ä»¥æ¥å—çš„"><a href="#å±€éƒ¨-mutation-æ˜¯å¯ä»¥æ¥å—çš„" class="headerlink" title="å±€éƒ¨ mutation æ˜¯å¯ä»¥æ¥å—çš„"></a>å±€éƒ¨ mutation æ˜¯å¯ä»¥æ¥å—çš„</h4><p>åƒè¿™æ ·çš„ä»£ç æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå®ƒæ”¹å˜äº† state ä¸­ç°æœ‰çš„å¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">position.<span class="property">x</span> = e.<span class="property">clientX</span>;</span><br><span class="line">position.<span class="property">y</span> = e.<span class="property">clientY</span>;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯åƒè¿™æ ·çš„ä»£ç å°± <strong>æ²¡æœ‰ä»»ä½•é—®é¢˜</strong>ï¼Œå› ä¸ºä½ æ”¹å˜çš„æ˜¯ä½ åˆšåˆšåˆ›å»ºçš„ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nextPosition = &#123;&#125;;</span><br><span class="line">nextPosition.<span class="property">x</span> = e.<span class="property">clientX</span>;</span><br><span class="line">nextPosition.<span class="property">y</span> = e.<span class="property">clientY</span>;</span><br><span class="line"><span class="title function_">setPosition</span>(nextPosition);</span><br></pre></td></tr></table></figure>

<p>äº‹å®ä¸Šï¼Œå®ƒå®Œå…¨ç­‰åŒäºä¸‹é¢è¿™ç§å†™æ³•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setPosition</span>(&#123;</span><br><span class="line">  <span class="attr">x</span>: e.<span class="property">clientX</span>,</span><br><span class="line">  <span class="attr">y</span>: e.<span class="property">clientY</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åªæœ‰å½“ä½ æ”¹å˜å·²ç»å¤„äº state ä¸­çš„ <strong>ç°æœ‰</strong> å¯¹è±¡æ—¶ï¼Œmutation æ‰ä¼šæˆä¸ºé—®é¢˜ã€‚è€Œä¿®æ”¹ä¸€ä¸ªä½ åˆšåˆšåˆ›å»ºçš„å¯¹è±¡å°±ä¸ä¼šå‡ºç°ä»»ä½•é—®é¢˜ï¼Œå› ä¸º <strong>è¿˜æ²¡æœ‰å…¶ä»–çš„ä»£ç å¼•ç”¨å®ƒ</strong>ã€‚æ”¹å˜å®ƒå¹¶ä¸ä¼šæ„å¤–åœ°å½±å“åˆ°ä¾èµ–å®ƒçš„ä¸œè¥¿ã€‚è¿™å«åšâ€œå±€éƒ¨ mutationâ€ã€‚ä½ ç”šè‡³å¯ä»¥ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/keeping-components-pure#local-mutation-your-components-little-secret">åœ¨æ¸²æŸ“çš„è¿‡ç¨‹ä¸­</a> è¿›è¡Œâ€œå±€éƒ¨ mutationâ€çš„æ“ä½œã€‚è¿™ç§æ“ä½œæ—¢ä¾¿æ·åˆæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼</p>
</blockquote>
<h3 id="3-6-3-ä½¿ç”¨å±•å¼€è¯­æ³•å¤åˆ¶å¯¹è±¡"><a href="#3-6-3-ä½¿ç”¨å±•å¼€è¯­æ³•å¤åˆ¶å¯¹è±¡" class="headerlink" title="3.6.3 ä½¿ç”¨å±•å¼€è¯­æ³•å¤åˆ¶å¯¹è±¡"></a>3.6.3 ä½¿ç”¨å±•å¼€è¯­æ³•å¤åˆ¶å¯¹è±¡</h3><p>åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œå§‹ç»ˆä¼šæ ¹æ®å½“å‰æŒ‡é’ˆçš„ä½ç½®åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„ <code>position</code> å¯¹è±¡ã€‚ä½†æ˜¯é€šå¸¸ï¼Œä½ ä¼šå¸Œæœ›æŠŠ <strong>ç°æœ‰</strong> æ•°æ®ä½œä¸ºä½ æ‰€åˆ›å»ºçš„æ–°å¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½åªæƒ³è¦æ›´æ–°è¡¨å•ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œå…¶ä»–çš„å­—æ®µä»ç„¶ä½¿ç”¨ä¹‹å‰çš„å€¼ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç ä¸­ï¼Œè¾“å…¥æ¡†å¹¶ä¸ä¼šæ­£å¸¸è¿è¡Œï¼Œå› ä¸º <code>onChange</code> ç›´æ¥ä¿®æ”¹äº† state ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [person, setPerson] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Barbara&#x27;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&#x27;Hepworth&#x27;</span>,</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&#x27;bhepworth@sculpture.com&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleFirstNameChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    person.<span class="property">firstName</span> = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleLastNameChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    person.<span class="property">lastName</span> = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleEmailChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    person.<span class="property">email</span> = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        First name:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.firstName&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleFirstNameChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Last name:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.lastName&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleLastNameChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Email:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.email&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleEmailChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;person.firstName&#125;&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;person.lastName&#125;&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        (&#123;person.email&#125;)</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼Œä¸‹é¢è¿™è¡Œä»£ç ä¿®æ”¹äº†ä¸Šä¸€æ¬¡æ¸²æŸ“ä¸­çš„ stateï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person.<span class="property">firstName</span> = e.<span class="property">target</span>.<span class="property">value</span>;</span><br></pre></td></tr></table></figure>

<p>æƒ³è¦å®ç°ä½ çš„éœ€æ±‚ï¼Œæœ€å¯é çš„åŠæ³•å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å¹¶å°†å®ƒä¼ é€’ç»™ <code>setPerson</code>ã€‚ä½†æ˜¯åœ¨è¿™é‡Œï¼Œä½ è¿˜éœ€è¦ <strong>æŠŠå½“å‰çš„æ•°æ®å¤åˆ¶åˆ°æ–°å¯¹è±¡ä¸­</strong>ï¼Œå› ä¸ºä½ åªæ”¹å˜äº†å…¶ä¸­ä¸€ä¸ªå­—æ®µï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setPerson</span>(&#123;</span><br><span class="line">  <span class="attr">firstName</span>: e.<span class="property">target</span>.<span class="property">value</span>, <span class="comment">// ä» input ä¸­è·å–æ–°çš„ first name</span></span><br><span class="line">  <span class="attr">lastName</span>: person.<span class="property">lastName</span>,</span><br><span class="line">  <span class="attr">email</span>: person.<span class="property">email</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥ä½¿ç”¨ <code>...</code> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Spread_syntax#spread_in_object_literals">å¯¹è±¡å±•å¼€</a> è¯­æ³•ï¼Œè¿™æ ·ä½ å°±ä¸éœ€è¦å•ç‹¬å¤åˆ¶æ¯ä¸ªå±æ€§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setPerson</span>(&#123;</span><br><span class="line">  ...person, <span class="comment">// å¤åˆ¶ä¸Šä¸€ä¸ª person ä¸­çš„æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">  <span class="attr">firstName</span>: e.<span class="property">target</span>.<span class="property">value</span> <span class="comment">// ä½†æ˜¯è¦†ç›– firstName å­—æ®µ </span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨è¡¨å•å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä½ å¹¶æ²¡æœ‰ä¸ºæ¯ä¸ªè¾“å…¥æ¡†å•ç‹¬å£°æ˜ä¸€ä¸ª stateã€‚å¯¹äºå¤§å‹è¡¨å•ï¼Œå°†æ‰€æœ‰æ•°æ®éƒ½å­˜æ”¾åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸­æ˜¯éå¸¸æ–¹ä¾¿çš„â€”â€”å‰ææ˜¯ä½ èƒ½å¤Ÿæ­£ç¡®åœ°æ›´æ–°å®ƒï¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [person, setPerson] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Barbara&#x27;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&#x27;Hepworth&#x27;</span>,</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&#x27;bhepworth@sculpture.com&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleFirstNameChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">setPerson</span>(&#123;</span><br><span class="line">      ...person,</span><br><span class="line">      <span class="attr">firstName</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleLastNameChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">setPerson</span>(&#123;</span><br><span class="line">      ...person,</span><br><span class="line">      <span class="attr">lastName</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleEmailChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">setPerson</span>(&#123;</span><br><span class="line">      ...person,</span><br><span class="line">      <span class="attr">email</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        First name:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.firstName&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleFirstNameChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Last name:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.lastName&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleLastNameChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Email:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.email&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleEmailChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;person.firstName&#125;&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;person.lastName&#125;&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        (&#123;person.email&#125;)</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ <code>...</code> å±•å¼€è¯­æ³•æœ¬è´¨æ˜¯æ˜¯â€œæµ…æ‹·è´â€â€”â€”å®ƒåªä¼šå¤åˆ¶ä¸€å±‚ã€‚è¿™ä½¿å¾—å®ƒçš„æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯ä¹Ÿæ„å‘³ç€å½“ä½ æƒ³è¦æ›´æ–°ä¸€ä¸ªåµŒå¥—å±æ€§æ—¶ï¼Œä½ å¿…é¡»å¾—å¤šæ¬¡ä½¿ç”¨å±•å¼€è¯­æ³•ã€‚</p>
<blockquote>
<h4 id="ä½¿ç”¨ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ¥æ›´æ–°å¤šä¸ªå­—æ®µ"><a href="#ä½¿ç”¨ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ¥æ›´æ–°å¤šä¸ªå­—æ®µ" class="headerlink" title="ä½¿ç”¨ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ¥æ›´æ–°å¤šä¸ªå­—æ®µ"></a>ä½¿ç”¨ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ¥æ›´æ–°å¤šä¸ªå­—æ®µ</h4><p>ä½ ä¹Ÿå¯ä»¥åœ¨å¯¹è±¡çš„å®šä¹‰ä¸­ä½¿ç”¨ <code>[</code> å’Œ <code>]</code> æ‹¬å·æ¥å®ç°å±æ€§çš„åŠ¨æ€å‘½åã€‚ä¸‹é¢æ˜¯åŒä¸€ä¸ªä¾‹å­ï¼Œä½†å®ƒä½¿ç”¨äº†ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°è€Œä¸æ˜¯ä¸‰ä¸ªï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [person, setPerson] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="string">&#x27;Barbara&#x27;</span>,</span><br><span class="line">    <span class="attr">lastName</span>: <span class="string">&#x27;Hepworth&#x27;</span>,</span><br><span class="line">    <span class="attr">email</span>: <span class="string">&#x27;bhepworth@sculpture.com&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">setPerson</span>(&#123;</span><br><span class="line">      ...person,</span><br><span class="line">      [e.<span class="property">target</span>.<span class="property">name</span>]: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        First name:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;firstName&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.firstName&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Last name:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.lastName&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Email:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">name</span>=<span class="string">&quot;email&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.email&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;person.firstName&#125;&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;person.lastName&#125;&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        (&#123;person.email&#125;)</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™é‡Œï¼Œ<code>e.target.name</code> å¼•ç”¨äº† <code>&lt;input&gt;</code> è¿™ä¸ª DOM å…ƒç´ çš„ <code>name</code> å±æ€§ã€‚</p>
</blockquote>
<h3 id="3-6-4-æ›´æ–°ä¸€ä¸ªåµŒå¥—å¯¹è±¡"><a href="#3-6-4-æ›´æ–°ä¸€ä¸ªåµŒå¥—å¯¹è±¡" class="headerlink" title="3.6.4 æ›´æ–°ä¸€ä¸ªåµŒå¥—å¯¹è±¡"></a>3.6.4 æ›´æ–°ä¸€ä¸ªåµŒå¥—å¯¹è±¡</h3><p>è€ƒè™‘ä¸‹é¢è¿™ç§ç»“æ„çš„åµŒå¥—å¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [person, setPerson] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Niki de Saint Phalle&#x27;</span>,</span><br><span class="line">  <span class="attr">artwork</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Blue Nana&#x27;</span>,</span><br><span class="line">    <span class="attr">city</span>: <span class="string">&#x27;Hamburg&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: <span class="string">&#x27;https://i.imgur.com/Sd1AgUOm.jpg&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ æƒ³è¦æ›´æ–° <code>person.artwork.city</code> çš„å€¼ï¼Œç”¨ mutation æ¥å®ç°çš„æ–¹æ³•éå¸¸å®¹æ˜“ç†è§£ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">person.<span class="property">artwork</span>.<span class="property">city</span> = <span class="string">&#x27;New Delhi&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯åœ¨ React ä¸­ï¼Œä½ éœ€è¦å°† state è§†ä¸ºä¸å¯å˜çš„ï¼ä¸ºäº†ä¿®æ”¹ <code>city</code> çš„å€¼ï¼Œä½ é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>artwork</code> å¯¹è±¡ï¼ˆå…¶ä¸­é¢„å…ˆå¡«å……äº†ä¸Šä¸€ä¸ª <code>artwork</code> å¯¹è±¡ä¸­çš„æ•°æ®ï¼‰ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°çš„ <code>person</code> å¯¹è±¡ï¼Œå¹¶ä½¿å¾—å…¶ä¸­çš„ <code>artwork</code> å±æ€§æŒ‡å‘æ–°åˆ›å»ºçš„ <code>artwork</code> å¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nextArtwork = &#123; ...person.<span class="property">artwork</span>, <span class="attr">city</span>: <span class="string">&#x27;New Delhi&#x27;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> nextPerson = &#123; ...person, <span class="attr">artwork</span>: nextArtwork &#125;;</span><br><span class="line"><span class="title function_">setPerson</span>(nextPerson);</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…ï¼Œå†™æˆä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setPerson</span>(&#123;</span><br><span class="line">  ...person, <span class="comment">// å¤åˆ¶å…¶å®ƒå­—æ®µçš„æ•°æ® </span></span><br><span class="line">  <span class="attr">artwork</span>: &#123; <span class="comment">// æ›¿æ¢ artwork å­—æ®µ </span></span><br><span class="line">    ...person.<span class="property">artwork</span>, <span class="comment">// å¤åˆ¶ä¹‹å‰ person.artwork ä¸­çš„æ•°æ®</span></span><br><span class="line">    <span class="attr">city</span>: <span class="string">&#x27;New Delhi&#x27;</span> <span class="comment">// ä½†æ˜¯å°† city çš„å€¼æ›¿æ¢ä¸º New Delhiï¼</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¿™è™½ç„¶çœ‹èµ·æ¥æœ‰ç‚¹å†—é•¿ï¼Œä½†å¯¹äºå¾ˆå¤šæƒ…å†µéƒ½èƒ½æœ‰æ•ˆåœ°è§£å†³é—®é¢˜ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [person, setPerson] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Niki de Saint Phalle&#x27;</span>,</span><br><span class="line">    <span class="attr">artwork</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Blue Nana&#x27;</span>,</span><br><span class="line">      <span class="attr">city</span>: <span class="string">&#x27;Hamburg&#x27;</span>,</span><br><span class="line">      <span class="attr">image</span>: <span class="string">&#x27;https://i.imgur.com/Sd1AgUOm.jpg&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleNameChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">setPerson</span>(&#123;</span><br><span class="line">      ...person,</span><br><span class="line">      <span class="attr">name</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleTitleChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">setPerson</span>(&#123;</span><br><span class="line">      ...person,</span><br><span class="line">      <span class="attr">artwork</span>: &#123;</span><br><span class="line">        ...person.<span class="property">artwork</span>,</span><br><span class="line">        <span class="attr">title</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleCityChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">setPerson</span>(&#123;</span><br><span class="line">      ...person,</span><br><span class="line">      <span class="attr">artwork</span>: &#123;</span><br><span class="line">        ...person.<span class="property">artwork</span>,</span><br><span class="line">        <span class="attr">city</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleImageChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">setPerson</span>(&#123;</span><br><span class="line">      ...person,</span><br><span class="line">      <span class="attr">artwork</span>: &#123;</span><br><span class="line">        ...person.<span class="property">artwork</span>,</span><br><span class="line">        <span class="attr">image</span>: e.<span class="property">target</span>.<span class="property">value</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Name:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleNameChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Title:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.artwork.title&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleTitleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        City:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.artwork.city&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleCityChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Image:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.artwork.image&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleImageChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;person.artwork.title&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#x27; by &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;person.name&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        (located in &#123;person.artwork.city&#125;)</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&#123;person.artwork.image&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&#123;person.artwork.title&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<h4 id="å¯¹è±¡å¹¶éæ˜¯çœŸæ­£åµŒå¥—çš„"><a href="#å¯¹è±¡å¹¶éæ˜¯çœŸæ­£åµŒå¥—çš„" class="headerlink" title="å¯¹è±¡å¹¶éæ˜¯çœŸæ­£åµŒå¥—çš„"></a>å¯¹è±¡å¹¶éæ˜¯çœŸæ­£åµŒå¥—çš„</h4><p>ä¸‹é¢è¿™ä¸ªå¯¹è±¡ä»ä»£ç ä¸Šæ¥çœ‹æ˜¯â€œåµŒå¥—â€çš„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Niki de Saint Phalle&#x27;</span>,</span><br><span class="line">  <span class="attr">artwork</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;Blue Nana&#x27;</span>,</span><br><span class="line">    <span class="attr">city</span>: <span class="string">&#x27;Hamburg&#x27;</span>,</span><br><span class="line">    <span class="attr">image</span>: <span class="string">&#x27;https://i.imgur.com/Sd1AgUOm.jpg&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œï¼Œå½“æˆ‘ä»¬æ€è€ƒå¯¹è±¡çš„ç‰¹æ€§æ—¶ï¼Œâ€œåµŒå¥—â€å¹¶ä¸æ˜¯ä¸€ä¸ªéå¸¸å‡†ç¡®çš„æ–¹å¼ã€‚å½“è¿™æ®µä»£ç è¿è¡Œçš„æ—¶å€™ï¼Œä¸å­˜åœ¨â€œåµŒå¥—â€çš„å¯¹è±¡ã€‚ä½ å®é™…ä¸Šçœ‹åˆ°çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;Blue Nana&#x27;</span>,</span><br><span class="line">  <span class="attr">city</span>: <span class="string">&#x27;Hamburg&#x27;</span>,</span><br><span class="line">  <span class="attr">image</span>: <span class="string">&#x27;https://i.imgur.com/Sd1AgUOm.jpg&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Niki de Saint Phalle&#x27;</span>,</span><br><span class="line">  <span class="attr">artwork</span>: obj1</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å¯¹è±¡ <code>obj1</code> å¹¶ä¸å¤„äº <code>obj2</code> çš„â€œå†…éƒ¨â€ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ä¸­ï¼Œ<code>obj3</code> ä¸­çš„å±æ€§ä¹Ÿå¯ä»¥æŒ‡å‘ <code>obj1</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;Blue Nana&#x27;</span>,</span><br><span class="line">  <span class="attr">city</span>: <span class="string">&#x27;Hamburg&#x27;</span>,</span><br><span class="line">  <span class="attr">image</span>: <span class="string">&#x27;https://i.imgur.com/Sd1AgUOm.jpg&#x27;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj2 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Niki de Saint Phalle&#x27;</span>,</span><br><span class="line">  <span class="attr">artwork</span>: obj1</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj3 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Copycat&#x27;</span>,</span><br><span class="line">  <span class="attr">artwork</span>: obj1</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ç›´æ¥ä¿®æ”¹ <code>obj3.artwork.city</code>ï¼Œå°±ä¼šåŒæ—¶å½±å“ <code>obj2.artwork.city</code> å’Œ <code>obj1.city</code>ã€‚è¿™æ˜¯å› ä¸º <code>obj3.artwork</code>ã€<code>obj2.artwork</code> å’Œ <code>obj1</code> éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚å½“ä½ ç”¨â€œåµŒå¥—â€çš„æ–¹å¼çœ‹å¾…å¯¹è±¡æ—¶ï¼Œå¾ˆéš¾çœ‹å‡ºè¿™ä¸€ç‚¹ã€‚ç›¸åï¼Œå®ƒä»¬æ˜¯ç›¸äº’ç‹¬ç«‹çš„å¯¹è±¡ï¼Œåªä¸è¿‡æ˜¯ç”¨å±æ€§â€œæŒ‡å‘â€å½¼æ­¤è€Œå·²ã€‚</p>
</blockquote>
<h3 id="3-6-5-ä½¿ç”¨-Immer-ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘"><a href="#3-6-5-ä½¿ç”¨-Immer-ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘" class="headerlink" title="3.6.5 ä½¿ç”¨ Immer ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘"></a>3.6.5 ä½¿ç”¨ Immer ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘</h3><p>å¦‚æœä½ çš„ state æœ‰å¤šå±‚çš„åµŒå¥—ï¼Œä½ æˆ–è®¸åº”è¯¥è€ƒè™‘ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/choosing-the-state-structure#avoid-deeply-nested-state">å°†å…¶æ‰å¹³åŒ–</a>ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸æƒ³æ”¹å˜ state çš„æ•°æ®ç»“æ„ï¼Œä½ å¯èƒ½æ›´å–œæ¬¢ç”¨ä¸€ç§æ›´ä¾¿æ·çš„æ–¹å¼æ¥å®ç°åµŒå¥—å±•å¼€çš„æ•ˆæœã€‚<a target="_blank" rel="noopener" href="https://github.com/immerjs/use-immer">Immer</a> æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„åº“ï¼Œå®ƒå¯ä»¥è®©ä½ ä½¿ç”¨ç®€ä¾¿ä½†å¯ä»¥ç›´æ¥ä¿®æ”¹çš„è¯­æ³•ç¼–å†™ä»£ç ï¼Œå¹¶ä¼šå¸®ä½ å¤„ç†å¥½å¤åˆ¶çš„è¿‡ç¨‹ã€‚é€šè¿‡ä½¿ç”¨ Immerï¼Œä½ å†™å‡ºçš„ä»£ç çœ‹èµ·æ¥å°±åƒæ˜¯ä½ â€œæ‰“ç ´äº†è§„åˆ™â€è€Œç›´æ¥ä¿®æ”¹äº†å¯¹è±¡ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">updatePerson</span>(<span class="function"><span class="params">draft</span> =&gt;</span> &#123;</span><br><span class="line">  draft.<span class="property">artwork</span>.<span class="property">city</span> = <span class="string">&#x27;Lagos&#x27;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ä¸åŒäºä¸€èˆ¬çš„ mutationï¼Œå®ƒå¹¶ä¸ä¼šè¦†ç›–ä¹‹å‰çš„ stateï¼</p>
<blockquote>
<h4 id="Immer-æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ"><a href="#Immer-æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ" class="headerlink" title="Immer æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ"></a>Immer æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ</h4><p>ç”± Immer æä¾›çš„ <code>draft</code> æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å¯¹è±¡ï¼Œè¢«ç§°ä¸º <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy">Proxy</a>ï¼Œå®ƒä¼šè®°å½•ä½ ç”¨å®ƒæ‰€è¿›è¡Œçš„æ“ä½œã€‚è¿™å°±æ˜¯ä½ èƒ½å¤Ÿéšå¿ƒæ‰€æ¬²åœ°ç›´æ¥ä¿®æ”¹å¯¹è±¡çš„åŸå› æ‰€åœ¨ï¼ä»åŸç†ä¸Šè¯´ï¼ŒImmer ä¼šå¼„æ¸…æ¥š <code>draft</code> å¯¹è±¡çš„å“ªäº›éƒ¨åˆ†è¢«æ”¹å˜äº†ï¼Œå¹¶ä¼šä¾ç…§ä½ çš„ä¿®æ”¹åˆ›å»ºå‡ºä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚</p>
</blockquote>
<p>å°è¯•ä½¿ç”¨ Immer:</p>
<ol>
<li>è¿è¡Œ <code>npm install use-immer</code> æ·»åŠ  Immer ä¾èµ–</li>
<li>ç”¨ <code>import &#123; useImmer &#125; from &#39;use-immer&#39;</code> æ›¿æ¢æ‰ <code>import &#123; useState &#125; from &#39;react&#39;</code></li>
</ol>
<p>ä¸‹é¢æˆ‘ä»¬æŠŠä¸Šé¢çš„ä¾‹å­ç”¨ Immer å®ç°ä¸€ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useImmer &#125; <span class="keyword">from</span> <span class="string">&#x27;use-immer&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Form</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [person, updatePerson] = <span class="title function_">useImmer</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Niki de Saint Phalle&#x27;</span>,</span><br><span class="line">    <span class="attr">artwork</span>: &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;Blue Nana&#x27;</span>,</span><br><span class="line">      <span class="attr">city</span>: <span class="string">&#x27;Hamburg&#x27;</span>,</span><br><span class="line">      <span class="attr">image</span>: <span class="string">&#x27;https://i.imgur.com/Sd1AgUOm.jpg&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleNameChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">updatePerson</span>(<span class="function"><span class="params">draft</span> =&gt;</span> &#123;</span><br><span class="line">      draft.<span class="property">name</span> = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleTitleChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">updatePerson</span>(<span class="function"><span class="params">draft</span> =&gt;</span> &#123;</span><br><span class="line">      draft.<span class="property">artwork</span>.<span class="property">title</span> = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleCityChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">updatePerson</span>(<span class="function"><span class="params">draft</span> =&gt;</span> &#123;</span><br><span class="line">      draft.<span class="property">artwork</span>.<span class="property">city</span> = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleImageChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="title function_">updatePerson</span>(<span class="function"><span class="params">draft</span> =&gt;</span> &#123;</span><br><span class="line">      draft.<span class="property">artwork</span>.<span class="property">image</span> = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Name:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleNameChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Title:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.artwork.title&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleTitleChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        City:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.artwork.city&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleCityChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Image:</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;person.artwork.image&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;handleImageChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">i</span>&gt;</span>&#123;person.artwork.title&#125;<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#x27; by &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;person.name&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        (located in &#123;person.artwork.city&#125;)</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&#123;person.artwork.image&#125;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">alt</span>=<span class="string">&#123;person.artwork.title&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°å˜å¾—æ›´ç®€æ´äº†ã€‚ä½ å¯ä»¥éšæ„åœ¨ä¸€ä¸ªç»„ä»¶ä¸­åŒæ—¶ä½¿ç”¨ <code>useState</code> å’Œ <code>useImmer</code>ã€‚å¦‚æœä½ æƒ³è¦å†™å‡ºæ›´ç®€æ´çš„æ›´æ–°å¤„ç†å‡½æ•°ï¼ŒImmer ä¼šæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå°¤å…¶æ˜¯å½“ä½ çš„ state ä¸­æœ‰åµŒå¥—ï¼Œå¹¶ä¸”å¤åˆ¶å¯¹è±¡ä¼šå¸¦æ¥é‡å¤çš„ä»£ç æ—¶ã€‚</p>
<blockquote>
<h4 id="ä¸ºä»€ä¹ˆåœ¨-React-ä¸­ä¸æ¨èç›´æ¥ä¿®æ”¹-stateï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆåœ¨-React-ä¸­ä¸æ¨èç›´æ¥ä¿®æ”¹-stateï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆåœ¨ React ä¸­ä¸æ¨èç›´æ¥ä¿®æ”¹ stateï¼Ÿ"></a>ä¸ºä»€ä¹ˆåœ¨ React ä¸­ä¸æ¨èç›´æ¥ä¿®æ”¹ stateï¼Ÿ</h4><p>æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š</p>
<ul>
<li><strong>è°ƒè¯•</strong>ï¼šå¦‚æœä½ ä½¿ç”¨ <code>console.log</code> å¹¶ä¸”ä¸ç›´æ¥ä¿®æ”¹ stateï¼Œä½ ä¹‹å‰æ—¥å¿—ä¸­çš„ state çš„å€¼å°±ä¸ä¼šè¢«æ–°çš„ state å˜åŒ–æ‰€å½±å“ã€‚è¿™æ ·ä½ å°±å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ä¸¤æ¬¡æ¸²æŸ“ä¹‹é—´ state çš„å€¼å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–</li>
<li><strong>ä¼˜åŒ–</strong>ï¼šReact å¸¸è§çš„ <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/reference/react/memo">ä¼˜åŒ–ç­–ç•¥</a> ä¾èµ–äºå¦‚æœä¹‹å‰çš„ props æˆ–è€… state çš„å€¼å’Œä¸‹ä¸€æ¬¡ç›¸åŒå°±è·³è¿‡æ¸²æŸ“ã€‚å¦‚æœä½ ä»æœªç›´æ¥ä¿®æ”¹ state ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥å¾ˆå¿«çœ‹åˆ° state æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚å¦‚æœ <code>prevObj === obj</code>ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥è‚¯å®šè¿™ä¸ªå¯¹è±¡å†…éƒ¨å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚</li>
<li><strong>æ–°åŠŸèƒ½</strong>ï¼šæˆ‘ä»¬æ­£åœ¨æ„å»ºçš„ React çš„æ–°åŠŸèƒ½ä¾èµ–äº state è¢« <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/state-as-a-snapshot">åƒå¿«ç…§ä¸€æ ·çœ‹å¾…</a> çš„ç†å¿µã€‚å¦‚æœä½ ç›´æ¥ä¿®æ”¹ state çš„å†å²ç‰ˆæœ¬ï¼Œå¯èƒ½ä¼šå½±å“ä½ ä½¿ç”¨è¿™äº›æ–°åŠŸèƒ½ã€‚</li>
<li><strong>éœ€æ±‚å˜æ›´</strong>ï¼šæœ‰äº›åº”ç”¨åŠŸèƒ½åœ¨ä¸å‡ºç°ä»»ä½•ä¿®æ”¹çš„æƒ…å†µä¸‹ä¼šæ›´å®¹æ˜“å®ç°ï¼Œæ¯”å¦‚å®ç°æ’¤é”€&#x2F;æ¢å¤ã€å±•ç¤ºä¿®æ”¹å†å²ï¼Œæˆ–æ˜¯å…è®¸ç”¨æˆ·æŠŠè¡¨å•é‡ç½®æˆæŸä¸ªä¹‹å‰çš„å€¼ã€‚è¿™æ˜¯å› ä¸ºä½ å¯ä»¥æŠŠ state ä¹‹å‰çš„æ‹·è´ä¿å­˜åˆ°å†…å­˜ä¸­ï¼Œå¹¶é€‚æ—¶å¯¹å…¶è¿›è¡Œå†æ¬¡ä½¿ç”¨ã€‚å¦‚æœä¸€å¼€å§‹å°±ç”¨äº†ç›´æ¥ä¿®æ”¹ state çš„æ–¹å¼ï¼Œé‚£ä¹ˆåé¢è¦å®ç°è¿™æ ·çš„åŠŸèƒ½å°±ä¼šå˜å¾—éå¸¸å›°éš¾ã€‚</li>
<li><strong>æ›´ç®€å•çš„å®ç°</strong>ï¼šReact å¹¶ä¸ä¾èµ–äº mutation ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦å¯¹å¯¹è±¡è¿›è¡Œä»»ä½•ç‰¹æ®Šæ“ä½œã€‚å®ƒä¸éœ€è¦åƒå¾ˆå¤šâ€œå“åº”å¼â€çš„è§£å†³æ–¹æ¡ˆä¸€æ ·å»åŠ«æŒå¯¹è±¡çš„å±æ€§ã€æ€»æ˜¯ç”¨ä»£ç†æŠŠå¯¹è±¡åŒ…è£¹èµ·æ¥ï¼Œæˆ–è€…åœ¨åˆå§‹åŒ–æ—¶åšå…¶ä»–å·¥ä½œã€‚è¿™ä¹Ÿæ˜¯ React å…è®¸ä½ æŠŠä»»ä½•å¯¹è±¡å­˜æ”¾åœ¨ state ä¸­â€”â€”ä¸ç®¡å¯¹è±¡æœ‰å¤šå¤§â€”â€”è€Œä¸ä¼šé€ æˆæœ‰ä»»ä½•é¢å¤–çš„æ€§èƒ½æˆ–æ­£ç¡®æ€§é—®é¢˜çš„åŸå› ã€‚</li>
</ul>
<p>åœ¨å®è·µä¸­ï¼Œä½ ç»å¸¸å¯ä»¥â€œä¾¥å¹¸â€ç›´æ¥ä¿®æ”¹ state è€Œä¸å‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ä¸è¦è¿™æ ·åšï¼Œè¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬ç§‰æ‰¿ç€è¿™ç§ç†å¿µå¼€å‘çš„ React æ–°åŠŸèƒ½ã€‚æœªæ¥çš„è´¡çŒ®è€…ç”šè‡³æ˜¯ä½ æœªæ¥çš„è‡ªå·±éƒ½ä¼šæ„Ÿè°¢ä½ çš„ï¼</p>
</blockquote>
<h3 id="3-6-6-æ‘˜è¦"><a href="#3-6-6-æ‘˜è¦" class="headerlink" title="3.6.6 æ‘˜è¦"></a>3.6.6 æ‘˜è¦</h3><ul>
<li>å°† React ä¸­æ‰€æœ‰çš„ state éƒ½è§†ä¸ºä¸å¯ç›´æ¥ä¿®æ”¹çš„ã€‚</li>
<li>å½“ä½ åœ¨ state ä¸­å­˜æ”¾å¯¹è±¡æ—¶ï¼Œç›´æ¥ä¿®æ”¹å¯¹è±¡å¹¶ä¸ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œå¹¶ä¼šæ”¹å˜å‰ä¸€æ¬¡æ¸²æŸ“â€œå¿«ç…§â€ä¸­ state çš„å€¼ã€‚</li>
<li>ä¸è¦ç›´æ¥ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¦ä¸ºå®ƒåˆ›å»ºä¸€ä¸ª <strong>æ–°</strong> ç‰ˆæœ¬ï¼Œå¹¶é€šè¿‡æŠŠ state è®¾ç½®æˆè¿™ä¸ªæ–°ç‰ˆæœ¬æ¥è§¦å‘é‡æ–°æ¸²æŸ“ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨è¿™æ ·çš„ <code>&#123;...obj, something: &#39;newValue&#39;&#125;</code> å¯¹è±¡å±•å¼€è¯­æ³•æ¥åˆ›å»ºå¯¹è±¡çš„æ‹·è´ã€‚</li>
<li>å¯¹è±¡çš„å±•å¼€è¯­æ³•æ˜¯æµ…å±‚çš„ï¼šå®ƒçš„å¤åˆ¶æ·±åº¦åªæœ‰ä¸€å±‚ã€‚</li>
<li>æƒ³è¦æ›´æ–°åµŒå¥—å¯¹è±¡ï¼Œä½ éœ€è¦ä»ä½ æ›´æ–°çš„ä½ç½®å¼€å§‹è‡ªåº•å‘ä¸Šä¸ºæ¯ä¸€å±‚éƒ½åˆ›å»ºæ–°çš„æ‹·è´ã€‚</li>
<li>æƒ³è¦å‡å°‘é‡å¤çš„æ‹·è´ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ Immerã€‚</li>
</ul>
<h2 id="3-7-æ›´æ–°-state-ä¸­çš„æ•°ç»„"><a href="#3-7-æ›´æ–°-state-ä¸­çš„æ•°ç»„" class="headerlink" title="3.7 æ›´æ–° state ä¸­çš„æ•°ç»„"></a>3.7 æ›´æ–° state ä¸­çš„æ•°ç»„</h2><p>æ•°ç»„æ˜¯å¦å¤–ä¸€ç§å¯ä»¥å­˜å‚¨åœ¨ state ä¸­çš„ JavaScript å¯¹è±¡ï¼Œå®ƒè™½ç„¶æ˜¯å¯å˜çš„ï¼Œä½†æ˜¯å´åº”è¯¥è¢«è§†ä¸ºä¸å¯å˜ã€‚åŒå¯¹è±¡ä¸€æ ·ï¼Œå½“ä½ æƒ³è¦æ›´æ–°å­˜å‚¨äº state ä¸­çš„æ•°ç»„æ—¶ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼ˆæˆ–è€…åˆ›å»ºä¸€ä»½å·²æœ‰æ•°ç»„çš„æ‹·è´å€¼ï¼‰ï¼Œå¹¶ä½¿ç”¨æ–°æ•°ç»„è®¾ç½® stateã€‚</p>
<h3 id="3-7-1-åœ¨æ²¡æœ‰-mutation-çš„å‰æä¸‹æ›´æ–°æ•°ç»„"><a href="#3-7-1-åœ¨æ²¡æœ‰-mutation-çš„å‰æä¸‹æ›´æ–°æ•°ç»„" class="headerlink" title="3.7.1 åœ¨æ²¡æœ‰ mutation çš„å‰æä¸‹æ›´æ–°æ•°ç»„"></a>3.7.1 åœ¨æ²¡æœ‰ mutation çš„å‰æä¸‹æ›´æ–°æ•°ç»„</h3><p>åœ¨ JavaScript ä¸­ï¼Œæ•°ç»„åªæ˜¯å¦ä¸€ç§å¯¹è±¡ã€‚<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-objects-in-state">åŒå¯¹è±¡ä¸€æ ·</a>ï¼Œ<strong>ä½ éœ€è¦å°† React state ä¸­çš„æ•°ç»„è§†ä¸ºåªè¯»çš„</strong>ã€‚è¿™æ„å‘³ç€ä½ ä¸åº”è¯¥ä½¿ç”¨ç±»ä¼¼äº <code>arr[0] = &#39;bird&#39;</code> è¿™æ ·çš„æ–¹å¼æ¥é‡æ–°åˆ†é…æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œä¹Ÿä¸åº”è¯¥ä½¿ç”¨ä¼šç›´æ¥ä¿®æ”¹åŸå§‹æ•°ç»„çš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>push()</code> å’Œ <code>pop()</code>ã€‚</p>
<p>ç›¸åï¼Œæ¯æ¬¡è¦æ›´æ–°ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œä½ éœ€è¦æŠŠä¸€ä¸ª<strong>æ–°</strong>çš„æ•°ç»„ä¼ å…¥ state çš„ setting æ–¹æ³•ä¸­ã€‚ä¸ºæ­¤ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨åƒ <code>filter()</code> å’Œ <code>map()</code> è¿™æ ·ä¸ä¼šç›´æ¥ä¿®æ”¹åŸå§‹å€¼çš„æ–¹æ³•ï¼Œä»åŸå§‹æ•°ç»„ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚ç„¶åä½ å°±å¯ä»¥å°† state è®¾ç½®ä¸ºè¿™ä¸ªæ–°ç”Ÿæˆçš„æ•°ç»„ã€‚</p>
<p>ä¸‹é¢æ˜¯å¸¸è§æ•°ç»„æ“ä½œçš„å‚è€ƒè¡¨ã€‚å½“ä½ æ“ä½œ React state ä¸­çš„æ•°ç»„æ—¶ï¼Œä½ éœ€è¦é¿å…ä½¿ç”¨å·¦åˆ—çš„æ–¹æ³•ï¼Œè€Œé¦–é€‰å³åˆ—çš„æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>é¿å…ä½¿ç”¨ (ä¼šæ”¹å˜åŸå§‹æ•°ç»„)</th>
<th>æ¨èä½¿ç”¨ (ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>æ·»åŠ å…ƒç´ </td>
<td><code>push</code>ï¼Œ<code>unshift</code></td>
<td><code>concat</code>ï¼Œ<code>[...arr]</code> å±•å¼€è¯­æ³•ï¼ˆ<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-arrays-in-state#adding-to-an-array">ä¾‹å­</a>ï¼‰</td>
</tr>
<tr>
<td>åˆ é™¤å…ƒç´ </td>
<td><code>pop</code>ï¼Œ<code>shift</code>ï¼Œ<code>splice</code></td>
<td><code>filter</code>ï¼Œ<code>slice</code>ï¼ˆ<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-arrays-in-state#removing-from-an-array">ä¾‹å­</a>ï¼‰</td>
</tr>
<tr>
<td>æ›¿æ¢å…ƒç´ </td>
<td><code>splice</code>ï¼Œ<code>arr[i] = ...</code> èµ‹å€¼</td>
<td><code>map</code>ï¼ˆ<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-arrays-in-state#replacing-items-in-an-array">ä¾‹å­</a>ï¼‰</td>
</tr>
<tr>
<td>æ’åº</td>
<td><code>reverse</code>ï¼Œ<code>sort</code></td>
<td>å…ˆå°†æ•°ç»„å¤åˆ¶ä¸€ä»½ï¼ˆ<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-arrays-in-state#making-other-changes-to-an-array">ä¾‹å­</a>ï¼‰</td>
</tr>
</tbody></table>
<p>æˆ–è€…ï¼Œä½ å¯ä»¥<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-arrays-in-state#write-concise-update-logic-with-immer">ä½¿ç”¨ Immer</a> ï¼Œè¿™æ ·ä½ ä¾¿å¯ä»¥ä½¿ç”¨è¡¨æ ¼ä¸­çš„æ‰€æœ‰æ–¹æ³•äº†ã€‚</p>
<blockquote>
<p>ä¸å¹¸çš„æ˜¯ï¼Œè™½ç„¶ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice"><code>slice</code></a> å’Œ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice"><code>splice</code></a> çš„åå­—ç›¸ä¼¼ï¼Œä½†ä½œç”¨å´è¿¥ç„¶ä¸åŒï¼š</p>
<ul>
<li><code>slice</code> è®©ä½ å¯ä»¥æ‹·è´æ•°ç»„æˆ–æ˜¯æ•°ç»„çš„ä¸€éƒ¨åˆ†ã€‚</li>
<li><code>splice</code> <strong>ä¼šç›´æ¥ä¿®æ”¹</strong> åŸå§‹æ•°ç»„ï¼ˆæ’å…¥æˆ–è€…åˆ é™¤å…ƒç´ ï¼‰ã€‚</li>
</ul>
<p>åœ¨ React ä¸­ï¼Œæ›´å¤šæƒ…å†µä¸‹ä½ ä¼šä½¿ç”¨ <code>slice</code>ï¼ˆæ²¡æœ‰ <code>p</code> ï¼ï¼‰ï¼Œå› ä¸ºä½ ä¸æƒ³æ”¹å˜ state ä¸­çš„å¯¹è±¡æˆ–æ•°ç»„ã€‚<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-objects-in-state">æ›´æ–°å¯¹è±¡</a>è¿™ä¸€ç« èŠ‚è§£é‡Šäº†ä»€ä¹ˆæ˜¯ mutationï¼Œä»¥åŠä¸ºä»€ä¹ˆä¸æ¨èåœ¨ state é‡Œè¿™æ ·åšã€‚</p>
</blockquote>
<h3 id="3-7-2-å‘æ•°ç»„ä¸­æ·»åŠ å…ƒç´ "><a href="#3-7-2-å‘æ•°ç»„ä¸­æ·»åŠ å…ƒç´ " class="headerlink" title="3.7.2 å‘æ•°ç»„ä¸­æ·»åŠ å…ƒç´ "></a>3.7.2 å‘æ•°ç»„ä¸­æ·»åŠ å…ƒç´ </h3><p><code>push()</code> ä¼šç›´æ¥ä¿®æ”¹åŸå§‹æ•°ç»„ï¼Œè€Œä½ ä¸å¸Œæœ›è¿™æ ·ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nextId = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">List</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [name, setName] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [artists, setArtists] = <span class="title function_">useState</span>([]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æŒ¯å¥‹äººå¿ƒçš„é›•å¡‘å®¶ä»¬ï¼š<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setName(e.target.value)&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        artists.push(&#123;</span></span><br><span class="line"><span class="language-xml">          id: nextId++,</span></span><br><span class="line"><span class="language-xml">          name: name,</span></span><br><span class="line"><span class="language-xml">        &#125;);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;æ·»åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;artists.map(artist =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;artist.id&#125;</span>&gt;</span>&#123;artist.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸åï¼Œä½ åº”è¯¥åˆ›å»ºä¸€ä¸ª <strong>æ–°</strong> æ•°ç»„ï¼Œå…¶åŒ…å«äº†åŸå§‹æ•°ç»„çš„æ‰€æœ‰å…ƒç´  <strong>ä»¥åŠ</strong> ä¸€ä¸ªåœ¨æœ«å°¾çš„æ–°å…ƒç´ ã€‚è¿™å¯ä»¥é€šè¿‡å¾ˆå¤šç§æ–¹æ³•å®ç°ï¼Œæœ€ç®€å•çš„ä¸€ç§å°±æ˜¯ä½¿ç”¨ <code>...</code> <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/a-javascript-refresher#array-spread">æ•°ç»„å±•å¼€</a> è¯­æ³•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setArtists</span>( <span class="comment">// æ›¿æ¢ state</span></span><br><span class="line">  [ <span class="comment">// æ˜¯é€šè¿‡ä¼ å…¥ä¸€ä¸ªæ–°æ•°ç»„å®ç°çš„</span></span><br><span class="line">    ...artists, <span class="comment">// æ–°æ•°ç»„åŒ…å«åŸæ•°ç»„çš„æ‰€æœ‰å…ƒç´ </span></span><br><span class="line">    &#123; <span class="attr">id</span>: nextId++, <span class="attr">name</span>: name &#125; <span class="comment">// å¹¶åœ¨æœ«å°¾æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å…ƒç´ </span></span><br><span class="line">  ]</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nextId = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">List</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [name, setName] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [artists, setArtists] = <span class="title function_">useState</span>([]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æŒ¯å¥‹äººå¿ƒçš„é›•å¡‘å®¶ä»¬ï¼š<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setName(e.target.value)&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">        setArtists([</span></span><br><span class="line"><span class="language-xml">          ...artists,</span></span><br><span class="line"><span class="language-xml">          &#123; id: nextId++, name: name &#125;</span></span><br><span class="line"><span class="language-xml">        ]);</span></span><br><span class="line"><span class="language-xml">      &#125;&#125;&gt;æ·»åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;artists.map(artist =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;artist.id&#125;</span>&gt;</span>&#123;artist.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•°ç»„å±•å¼€è¿ç®—ç¬¦è¿˜å…è®¸ä½ æŠŠæ–°æ·»åŠ çš„å…ƒç´ æ”¾åœ¨åŸå§‹çš„ <code>...artists</code> ä¹‹å‰ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setArtists</span>([</span><br><span class="line">  &#123; <span class="attr">id</span>: nextId++, <span class="attr">name</span>: name &#125;,</span><br><span class="line">  ...artists <span class="comment">// å°†åŸæ•°ç»„ä¸­çš„å…ƒç´ æ”¾åœ¨æœ«å°¾</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¸€æ¥ï¼Œå±•å¼€æ“ä½œå°±å¯ä»¥å®Œæˆ <code>push()</code> å’Œ <code>unshift()</code> çš„å·¥ä½œï¼Œå°†æ–°å…ƒç´ æ·»åŠ åˆ°æ•°ç»„çš„æœ«å°¾å’Œå¼€å¤´ã€‚</p>
<h3 id="3-7-3-ä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ "><a href="#3-7-3-ä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ " class="headerlink" title="3.7.3 ä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ "></a>3.7.3 ä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ </h3><p>ä»æ•°ç»„ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å°†å®ƒ<strong>è¿‡æ»¤å‡ºå»</strong>ã€‚æ¢å¥è¯è¯´ï¼Œä½ éœ€è¦ç”Ÿæˆä¸€ä¸ªä¸åŒ…å«è¯¥å…ƒç´ çš„æ–°æ•°ç»„ã€‚è¿™å¯ä»¥é€šè¿‡ <code>filter</code> æ–¹æ³•å®ç°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> initialArtists = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">name</span>: <span class="string">&#x27;Marta Colvin Andrade&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;Lamidi Olonade Fakeye&#x27;</span>&#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;Louise Nevelson&#x27;</span>&#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">List</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [artists, setArtists] = <span class="title function_">useState</span>(</span><br><span class="line">    initialArtists</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æŒ¯å¥‹äººå¿ƒçš„é›•å¡‘å®¶ä»¬ï¼š<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;artists.map(artist =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;artist.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;artist.name&#125;&#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">              setArtists(</span></span><br><span class="line"><span class="language-xml">                artists.filter(a =&gt;</span></span><br><span class="line"><span class="language-xml">                  a.id !== artist.id</span></span><br><span class="line"><span class="language-xml">                )</span></span><br><span class="line"><span class="language-xml">              );</span></span><br><span class="line"><span class="language-xml">            &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">              åˆ é™¤</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç‚¹å‡»â€œåˆ é™¤â€æŒ‰é’®å‡ æ¬¡ï¼Œå¹¶ä¸”æŸ¥çœ‹æŒ‰é’®å¤„ç†ç‚¹å‡»äº‹ä»¶çš„ä»£ç ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setArtists</span>(</span><br><span class="line">  artists.<span class="title function_">filter</span>(<span class="function"><span class="params">a</span> =&gt;</span> a.<span class="property">id</span> !== artist.<span class="property">id</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œï¼Œ<code>artists.filter(s =&gt; s.id !== artist.id)</code> è¡¨ç¤ºâ€œåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè¯¥æ•°ç»„ç”±é‚£äº› ID ä¸ <code>artists.id</code> ä¸åŒçš„ <code>artists</code> ç»„æˆâ€ã€‚æ¢å¥è¯è¯´ï¼Œæ¯ä¸ª artist çš„â€œåˆ é™¤â€æŒ‰é’®ä¼šæŠŠ <em>é‚£ä¸€ä¸ª</em> artist ä»åŸå§‹æ•°ç»„ä¸­è¿‡æ»¤æ‰ï¼Œå¹¶ä½¿ç”¨è¿‡æ»¤åçš„æ•°ç»„å†æ¬¡è¿›è¡Œæ¸²æŸ“ã€‚æ³¨æ„ï¼Œ<code>filter</code> å¹¶ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„ã€‚</p>
<h3 id="3-7-4-è½¬æ¢æ•°ç»„"><a href="#3-7-4-è½¬æ¢æ•°ç»„" class="headerlink" title="3.7.4 è½¬æ¢æ•°ç»„"></a>3.7.4 è½¬æ¢æ•°ç»„</h3><p>å¦‚æœä½ æƒ³æ”¹å˜æ•°ç»„ä¸­çš„æŸäº›æˆ–å…¨éƒ¨å…ƒç´ ï¼Œä½ å¯ä»¥ç”¨ <code>map()</code> åˆ›å»ºä¸€ä¸ª<strong>æ–°</strong>æ•°ç»„ã€‚ä½ ä¼ å…¥ <code>map</code> çš„å‡½æ•°å†³å®šäº†è¦æ ¹æ®æ¯ä¸ªå…ƒç´ çš„å€¼æˆ–ç´¢å¼•ï¼ˆæˆ–äºŒè€…éƒ½è¦ï¼‰å¯¹å…ƒç´ åšä½•å¤„ç†ã€‚</p>
<p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä¸€ä¸ªæ•°ç»„è®°å½•äº†ä¸¤ä¸ªåœ†å½¢å’Œä¸€ä¸ªæ­£æ–¹å½¢çš„åæ ‡ã€‚å½“ä½ ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œä»…æœ‰ä¸¤ä¸ªåœ†å½¢ä¼šå‘ä¸‹ç§»åŠ¨ 100 åƒç´ ã€‚è¿™æ˜¯é€šè¿‡ä½¿ç”¨ <code>map()</code> ç”Ÿæˆä¸€ä¸ªæ–°æ•°ç»„å®ç°çš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> initialShapes = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">type</span>: <span class="string">&#x27;circle&#x27;</span>, <span class="attr">x</span>: <span class="number">50</span>, <span class="attr">y</span>: <span class="number">100</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">type</span>: <span class="string">&#x27;square&#x27;</span>, <span class="attr">x</span>: <span class="number">150</span>, <span class="attr">y</span>: <span class="number">100</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">type</span>: <span class="string">&#x27;circle&#x27;</span>, <span class="attr">x</span>: <span class="number">250</span>, <span class="attr">y</span>: <span class="number">100</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">ShapeEditor</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [shapes, setShapes] = <span class="title function_">useState</span>(</span><br><span class="line">    initialShapes</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> nextShapes = shapes.<span class="title function_">map</span>(<span class="function"><span class="params">shape</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (shape.<span class="property">type</span> === <span class="string">&#x27;square&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// ä¸ä½œæ”¹å˜</span></span><br><span class="line">        <span class="keyword">return</span> shape;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// è¿”å›ä¸€ä¸ªæ–°çš„åœ†å½¢ï¼Œä½ç½®åœ¨ä¸‹æ–¹ 50px å¤„</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          ...shape,</span><br><span class="line">          <span class="attr">y</span>: shape.<span class="property">y</span> + <span class="number">50</span>,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ–°çš„æ•°ç»„è¿›è¡Œé‡æ¸²æŸ“</span></span><br><span class="line">    <span class="title function_">setShapes</span>(nextShapes);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        æ‰€æœ‰åœ†å½¢å‘ä¸‹ç§»åŠ¨ï¼</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;shapes.map(shape =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">key</span>=<span class="string">&#123;shape.id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">background:</span> &#x27;<span class="attr">purple</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">position:</span> &#x27;<span class="attr">absolute</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">left:</span> <span class="attr">shape.x</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">top:</span> <span class="attr">shape.y</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">borderRadius:</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">shape.type</span> === <span class="string">&#x27;circle&#x27;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              ? &#x27;<span class="attr">50</span>%&#x27; <span class="attr">:</span> &#x27;&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">width:</span> <span class="attr">20</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">height:</span> <span class="attr">20</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-7-5-æ›¿æ¢æ•°ç»„ä¸­çš„å…ƒç´ "><a href="#3-7-5-æ›¿æ¢æ•°ç»„ä¸­çš„å…ƒç´ " class="headerlink" title="3.7.5 æ›¿æ¢æ•°ç»„ä¸­çš„å…ƒç´ "></a>3.7.5 æ›¿æ¢æ•°ç»„ä¸­çš„å…ƒç´ </h3><p>æƒ³è¦æ›¿æ¢æ•°ç»„ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æ˜¯éå¸¸å¸¸è§çš„ã€‚ç±»ä¼¼ <code>arr[0] = &#39;bird&#39;</code> è¿™æ ·çš„èµ‹å€¼è¯­å¥ä¼šç›´æ¥ä¿®æ”¹åŸå§‹æ•°ç»„ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¹Ÿåº”è¯¥ä½¿ç”¨ <code>map</code>ã€‚</p>
<p>è¦æ›¿æ¢ä¸€ä¸ªå…ƒç´ ï¼Œè¯·ä½¿ç”¨ <code>map</code> åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ã€‚åœ¨ä½ çš„ <code>map</code> å›è°ƒé‡Œï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å…ƒç´ çš„ç´¢å¼•ã€‚ä½¿ç”¨ç´¢å¼•æ¥åˆ¤æ–­æœ€ç»ˆæ˜¯è¿”å›åŸå§‹çš„å…ƒç´ ï¼ˆå³å›è°ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰è¿˜æ˜¯æ›¿æ¢æˆå…¶ä»–å€¼ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> initialCounters = [</span><br><span class="line">  <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">CounterList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [counters, setCounters] = <span class="title function_">useState</span>(</span><br><span class="line">    initialCounters</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleIncrementClick</span>(<span class="params">index</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> nextCounters = counters.<span class="title function_">map</span>(<span class="function">(<span class="params">c, i</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (i === index) &#123;</span><br><span class="line">        <span class="comment">// é€’å¢è¢«ç‚¹å‡»çš„è®¡æ•°å™¨æ•°å€¼</span></span><br><span class="line">        <span class="keyword">return</span> c + <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å…¶ä½™éƒ¨åˆ†ä¸å‘ç”Ÿå˜åŒ–</span></span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="title function_">setCounters</span>(nextCounters);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;counters.map((counter, i) =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;counter&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">            handleIncrementClick(i);</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-7-6-å‘æ•°ç»„ä¸­æ’å…¥å…ƒç´ "><a href="#3-7-6-å‘æ•°ç»„ä¸­æ’å…¥å…ƒç´ " class="headerlink" title="3.7.6 å‘æ•°ç»„ä¸­æ’å…¥å…ƒç´ "></a>3.7.6 å‘æ•°ç»„ä¸­æ’å…¥å…ƒç´ </h3><p>æœ‰æ—¶ï¼Œä½ ä¹Ÿè®¸æƒ³å‘æ•°ç»„ç‰¹å®šä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªä½ç½®æ—¢ä¸åœ¨æ•°ç»„å¼€å¤´ï¼Œä¹Ÿä¸åœ¨æœ«å°¾ã€‚ä¸ºæ­¤ï¼Œä½ å¯ä»¥å°†æ•°ç»„å±•å¼€è¿ç®—ç¬¦ <code>...</code> å’Œ <code>slice()</code> æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚<code>slice()</code> æ–¹æ³•è®©ä½ ä»æ•°ç»„ä¸­åˆ‡å‡ºâ€œä¸€ç‰‡â€ã€‚ä¸ºäº†å°†å…ƒç´ æ’å…¥æ•°ç»„ï¼Œä½ éœ€è¦å…ˆå±•å¼€åŸæ•°ç»„åœ¨æ’å…¥ç‚¹ä¹‹å‰çš„åˆ‡ç‰‡ï¼Œç„¶åæ’å…¥æ–°å…ƒç´ ï¼Œæœ€åå±•å¼€åŸæ•°ç»„ä¸­å‰©ä¸‹çš„éƒ¨åˆ†ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæ’å…¥æŒ‰é’®æ€»æ˜¯ä¼šå°†å…ƒç´ æ’å…¥åˆ°æ•°ç»„ä¸­ç´¢å¼•ä¸º <code>1</code> çš„ä½ç½®ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nextId = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> initialArtists = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">name</span>: <span class="string">&#x27;Marta Colvin Andrade&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;Lamidi Olonade Fakeye&#x27;</span>&#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;Louise Nevelson&#x27;</span>&#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">List</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [name, setName] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [artists, setArtists] = <span class="title function_">useState</span>(</span><br><span class="line">    initialArtists</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> insertAt = <span class="number">1</span>; <span class="comment">// å¯èƒ½æ˜¯ä»»ä½•ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">const</span> nextArtists = [</span><br><span class="line">      <span class="comment">// æ’å…¥ç‚¹ä¹‹å‰çš„å…ƒç´ ï¼š</span></span><br><span class="line">      ...artists.<span class="title function_">slice</span>(<span class="number">0</span>, insertAt),</span><br><span class="line">      <span class="comment">// æ–°çš„å…ƒç´ ï¼š</span></span><br><span class="line">      &#123; <span class="attr">id</span>: nextId++, <span class="attr">name</span>: name &#125;,</span><br><span class="line">      <span class="comment">// æ’å…¥ç‚¹ä¹‹åçš„å…ƒç´ ï¼š</span></span><br><span class="line">      ...artists.<span class="title function_">slice</span>(insertAt)</span><br><span class="line">    ];</span><br><span class="line">    <span class="title function_">setArtists</span>(nextArtists);</span><br><span class="line">    <span class="title function_">setName</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æŒ¯å¥‹äººå¿ƒçš„é›•å¡‘å®¶ä»¬ï¼š<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setName(e.target.value)&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        æ’å…¥</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;artists.map(artist =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;artist.id&#125;</span>&gt;</span>&#123;artist.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-7-7-å…¶ä»–æ”¹å˜æ•°ç»„çš„æƒ…å†µ"><a href="#3-7-7-å…¶ä»–æ”¹å˜æ•°ç»„çš„æƒ…å†µ" class="headerlink" title="3.7.7 å…¶ä»–æ”¹å˜æ•°ç»„çš„æƒ…å†µ"></a>3.7.7 å…¶ä»–æ”¹å˜æ•°ç»„çš„æƒ…å†µ</h3><p>æ€»ä¼šæœ‰ä¸€äº›äº‹ï¼Œæ˜¯ä½ ä»…ä»…ä¾é å±•å¼€è¿ç®—ç¬¦å’Œ <code>map()</code> æˆ–è€… <code>filter()</code> ç­‰ä¸ä¼šç›´æ¥ä¿®æ”¹åŸå€¼çš„æ–¹æ³•æ‰€æ— æ³•åšåˆ°çš„ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æƒ³ç¿»è½¬æ•°ç»„ï¼Œæˆ–æ˜¯å¯¹æ•°ç»„æ’åºã€‚è€Œ JavaScript ä¸­çš„ <code>reverse()</code> å’Œ <code>sort()</code> æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„ï¼Œæ‰€ä»¥ä½ æ— æ³•ç›´æ¥ä½¿ç”¨å®ƒä»¬ã€‚</p>
<p><strong>ç„¶è€Œï¼Œä½ å¯ä»¥å…ˆæ‹·è´è¿™ä¸ªæ•°ç»„ï¼Œå†æ”¹å˜è¿™ä¸ªæ‹·è´åçš„å€¼ã€‚</strong></p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialList = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">title</span>: <span class="string">&#x27;Big Bellies&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&#x27;Lunar Landscape&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&#x27;Terracotta Army&#x27;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">List</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [list, setList] = <span class="title function_">useState</span>(initialList);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> nextList = [...list];</span><br><span class="line">    nextList.<span class="title function_">reverse</span>();</span><br><span class="line">    <span class="title function_">setList</span>(nextList);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ç¿»è½¬</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;list.map(artwork =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;artwork.id&#125;</span>&gt;</span>&#123;artwork.title&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œä½ å…ˆä½¿ç”¨ <code>[...list]</code> å±•å¼€è¿ç®—ç¬¦åˆ›å»ºäº†ä¸€ä»½æ•°ç»„çš„æ‹·è´å€¼ã€‚å½“ä½ æœ‰äº†è¿™ä¸ªæ‹·è´å€¼åï¼Œä½ å°±å¯ä»¥ä½¿ç”¨åƒ <code>nextList.reverse()</code> æˆ– <code>nextList.sort()</code> è¿™æ ·ç›´æ¥ä¿®æ”¹åŸæ•°ç»„çš„æ–¹æ³•ã€‚ä½ ç”šè‡³å¯ä»¥é€šè¿‡ <code>nextList[0] = &quot;something&quot;</code> è¿™æ ·çš„æ–¹å¼å¯¹æ•°ç»„ä¸­çš„ç‰¹å®šå…ƒç´ è¿›è¡Œèµ‹å€¼ã€‚</p>
<p>ç„¶è€Œï¼Œ<strong>å³ä½¿ä½ æ‹·è´äº†æ•°ç»„ï¼Œä½ è¿˜æ˜¯ä¸èƒ½ç›´æ¥ä¿®æ”¹å…¶å†…éƒ¨çš„å…ƒç´ </strong>ã€‚è¿™æ˜¯å› ä¸ºæ•°ç»„çš„æ‹·è´æ˜¯æµ…æ‹·è´â€”â€”æ–°çš„æ•°ç»„ä¸­ä¾ç„¶ä¿ç•™äº†ä¸åŸå§‹æ•°ç»„ç›¸åŒçš„å…ƒç´ ã€‚å› æ­¤ï¼Œå¦‚æœä½ ä¿®æ”¹äº†æ‹·è´æ•°ç»„å†…éƒ¨çš„æŸä¸ªå¯¹è±¡ï¼Œå…¶å®ä½ æ­£åœ¨ç›´æ¥ä¿®æ”¹å½“å‰çš„ stateã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåƒä¸‹é¢çš„ä»£ç å°±ä¼šå¸¦æ¥é—®é¢˜ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nextList = [...list];</span><br><span class="line">nextList[<span class="number">0</span>].<span class="property">seen</span> = <span class="literal">true</span>; <span class="comment">// é—®é¢˜ï¼šç›´æ¥ä¿®æ”¹äº† list[0] çš„å€¼</span></span><br><span class="line"><span class="title function_">setList</span>(nextList);</span><br></pre></td></tr></table></figure>

<p>è™½ç„¶ <code>nextList</code> å’Œ <code>list</code> æ˜¯ä¸¤ä¸ªä¸åŒçš„æ•°ç»„ï¼Œ**<code>nextList[0]</code> å’Œ <code>list[0]</code> å´æŒ‡å‘äº†åŒä¸€ä¸ªå¯¹è±¡**ã€‚å› æ­¤ï¼Œé€šè¿‡æ”¹å˜ <code>nextList[0].seen</code>ï¼Œ<code>list[0].seen</code> çš„å€¼ä¹Ÿè¢«æ”¹å˜äº†ã€‚è¿™æ˜¯ä¸€ç§ state çš„ mutation æ“ä½œï¼Œä½ åº”è¯¥é¿å…è¿™ä¹ˆåšï¼ä½ å¯ä»¥ç”¨ç±»ä¼¼äº <a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-objects-in-state#updating-a-nested-object">æ›´æ–°åµŒå¥—çš„ JavaScript å¯¹è±¡</a> çš„æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”æ‹·è´æƒ³è¦ä¿®æ”¹çš„ç‰¹å®šå…ƒç´ ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹å®ƒã€‚ä¸‹é¢æ˜¯å…·ä½“çš„æ“ä½œã€‚</p>
<h3 id="3-7-8-æ›´æ–°æ•°ç»„å†…éƒ¨çš„å¯¹è±¡"><a href="#3-7-8-æ›´æ–°æ•°ç»„å†…éƒ¨çš„å¯¹è±¡" class="headerlink" title="3.7.8 æ›´æ–°æ•°ç»„å†…éƒ¨çš„å¯¹è±¡"></a>3.7.8 æ›´æ–°æ•°ç»„å†…éƒ¨çš„å¯¹è±¡</h3><p>å¯¹è±¡å¹¶ä¸æ˜¯ <em>çœŸçš„</em> ä½äºæ•°ç»„â€œå†…éƒ¨â€ã€‚å¯èƒ½ä»–ä»¬åœ¨ä»£ç ä¸­çœ‹èµ·æ¥åƒæ˜¯åœ¨æ•°ç»„â€œå†…éƒ¨â€ï¼Œä½†å…¶å®æ•°ç»„ä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯è¿™ä¸ªæ•°ç»„â€œæŒ‡å‘â€çš„ä¸€ä¸ªå­˜å‚¨äºå…¶å®ƒä½ç½®çš„å€¼ã€‚è¿™å°±æ˜¯å½“ä½ åœ¨å¤„ç†ç±»ä¼¼ <code>list[0]</code> è¿™æ ·çš„åµŒå¥—å­—æ®µæ—¶éœ€è¦æ ¼å¤–å°å¿ƒçš„åŸå› ã€‚å…¶ä»–äººçš„è‰ºæœ¯å“æ¸…å•å¯èƒ½æŒ‡å‘äº†æ•°ç»„çš„åŒä¸€ä¸ªå…ƒç´ ï¼</p>
<p><strong>å½“ä½ æ›´æ–°ä¸€ä¸ªåµŒå¥—çš„ state æ—¶ï¼Œä½ éœ€è¦ä»æƒ³è¦æ›´æ–°çš„åœ°æ–¹åˆ›å»ºæ‹·è´å€¼ï¼Œä¸€ç›´è¿™æ ·ï¼Œç›´åˆ°é¡¶å±‚ã€‚</strong> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™è¯¥æ€ä¹ˆåšã€‚</p>
<p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä¸¤ä¸ªä¸åŒçš„è‰ºæœ¯å“æ¸…å•æœ‰ç€ç›¸åŒçš„åˆå§‹ stateã€‚ä»–ä»¬æœ¬åº”è¯¥äº’ä¸å½±å“ï¼Œä½†æ˜¯å› ä¸ºä¸€æ¬¡ mutationï¼Œä»–ä»¬çš„ state è¢«æ„å¤–åœ°å…±äº«äº†ï¼Œå‹¾é€‰ä¸€ä¸ªæ¸…å•ä¸­çš„äº‹é¡¹ä¼šå½±å“å¦å¤–ä¸€ä¸ªæ¸…å•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nextId = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> initialList = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">title</span>: <span class="string">&#x27;Big Bellies&#x27;</span>, <span class="attr">seen</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&#x27;Lunar Landscape&#x27;</span>, <span class="attr">seen</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&#x27;Terracotta Army&#x27;</span>, <span class="attr">seen</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">BucketList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [myList, setMyList] = <span class="title function_">useState</span>(initialList);</span><br><span class="line">  <span class="keyword">const</span> [yourList, setYourList] = <span class="title function_">useState</span>(</span><br><span class="line">    initialList</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleToggleMyList</span>(<span class="params">artworkId, nextSeen</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> myNextList = [...myList];</span><br><span class="line">    <span class="keyword">const</span> artwork = myNextList.<span class="title function_">find</span>(</span><br><span class="line">      <span class="function"><span class="params">a</span> =&gt;</span> a.<span class="property">id</span> === artworkId</span><br><span class="line">    );</span><br><span class="line">    artwork.<span class="property">seen</span> = nextSeen;</span><br><span class="line">    <span class="title function_">setMyList</span>(myNextList);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleToggleYourList</span>(<span class="params">artworkId, nextSeen</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> yourNextList = [...yourList];</span><br><span class="line">    <span class="keyword">const</span> artwork = yourNextList.<span class="title function_">find</span>(</span><br><span class="line">      <span class="function"><span class="params">a</span> =&gt;</span> a.<span class="property">id</span> === artworkId</span><br><span class="line">    );</span><br><span class="line">    artwork.<span class="property">seen</span> = nextSeen;</span><br><span class="line">    <span class="title function_">setYourList</span>(yourNextList);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è‰ºæœ¯æ„¿æœ›æ¸…å•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æƒ³çœ‹çš„è‰ºæœ¯æ¸…å•ï¼š<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ItemList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">artworks</span>=<span class="string">&#123;myList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onToggle</span>=<span class="string">&#123;handleToggleMyList&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ä½ æƒ³çœ‹çš„è‰ºæœ¯æ¸…å•ï¼š<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ItemList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">artworks</span>=<span class="string">&#123;yourList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onToggle</span>=<span class="string">&#123;handleToggleYourList&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ItemList</span>(<span class="params">&#123; artworks, onToggle &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;artworks.map(artwork =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;artwork.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">checked</span>=<span class="string">&#123;artwork.seen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                onToggle(</span></span><br><span class="line"><span class="language-xml">                  artwork.id,</span></span><br><span class="line"><span class="language-xml">                  e.target.checked</span></span><br><span class="line"><span class="language-xml">                );</span></span><br><span class="line"><span class="language-xml">              &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            /&gt;</span></span><br><span class="line"><span class="language-xml">            &#123;artwork.title&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜å‡ºåœ¨ä¸‹é¢è¿™æ®µä»£ç ä¸­:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myNextList = [...myList];</span><br><span class="line"><span class="keyword">const</span> artwork = myNextList.<span class="title function_">find</span>(<span class="function"><span class="params">a</span> =&gt;</span> a.<span class="property">id</span> === artworkId);</span><br><span class="line">artwork.<span class="property">seen</span> = nextSeen; <span class="comment">// é—®é¢˜ï¼šç›´æ¥ä¿®æ”¹äº†å·²æœ‰çš„å…ƒç´ </span></span><br><span class="line"><span class="title function_">setMyList</span>(myNextList);</span><br></pre></td></tr></table></figure>

<p>è™½ç„¶ <code>myNextList</code> è¿™ä¸ªæ•°ç»„æ˜¯æ–°çš„ï¼Œä½†æ˜¯å…¶<strong>å†…éƒ¨çš„å…ƒç´ æœ¬èº«</strong>ä¸åŸæ•°ç»„ <code>myList</code> æ˜¯ç›¸åŒçš„ã€‚å› æ­¤ï¼Œä¿®æ”¹ <code>artwork.seen</code>ï¼Œå…¶å®æ˜¯åœ¨ä¿®æ”¹<strong>åŸå§‹çš„</strong> artwork å¯¹è±¡ã€‚è€Œè¿™ä¸ª artwork å¯¹è±¡ä¹Ÿè¢« <code>yourList</code> ä½¿ç”¨ï¼Œè¿™æ ·å°±å¸¦æ¥äº† bugã€‚è¿™æ ·çš„ bug å¯èƒ½éš¾ä»¥æƒ³åˆ°ï¼Œä½†å¥½åœ¨å¦‚æœä½ é¿å…ç›´æ¥ä¿®æ”¹ stateï¼Œå®ƒä»¬å°±ä¼šæ¶ˆå¤±ã€‚</p>
<p><strong>ä½ å¯ä»¥ä½¿ç”¨ <code>map</code> åœ¨æ²¡æœ‰ mutation çš„å‰æä¸‹å°†ä¸€ä¸ªæ—§çš„å…ƒç´ æ›¿æ¢æˆæ›´æ–°çš„ç‰ˆæœ¬ã€‚</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setMyList</span>(myList.<span class="title function_">map</span>(<span class="function"><span class="params">artwork</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (artwork.<span class="property">id</span> === artworkId) &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºåŒ…å«å˜æ›´çš„ æ–° å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> &#123; ...artwork, <span class="attr">seen</span>: nextSeen &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// æ²¡æœ‰å˜æ›´</span></span><br><span class="line">    <span class="keyword">return</span> artwork;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤„çš„ <code>...</code> æ˜¯ä¸€ä¸ªå¯¹è±¡å±•å¼€è¯­æ³•ï¼Œè¢«ç”¨æ¥<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-objects-in-state#copying-objects-with-the-spread-syntax">åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ‹·è´</a>.</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ²¡æœ‰ä»»ä½•ç°æœ‰çš„ state ä¸­çš„å…ƒç´ ä¼šè¢«æ”¹å˜ï¼Œbug ä¹Ÿå°±è¢«ä¿®å¤äº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nextId = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> initialList = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">title</span>: <span class="string">&#x27;Big Bellies&#x27;</span>, <span class="attr">seen</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&#x27;Lunar Landscape&#x27;</span>, <span class="attr">seen</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&#x27;Terracotta Army&#x27;</span>, <span class="attr">seen</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">BucketList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [myList, setMyList] = <span class="title function_">useState</span>(initialList);</span><br><span class="line">  <span class="keyword">const</span> [yourList, setYourList] = <span class="title function_">useState</span>(</span><br><span class="line">    initialList</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleToggleMyList</span>(<span class="params">artworkId, nextSeen</span>) &#123;</span><br><span class="line">    <span class="title function_">setMyList</span>(myList.<span class="title function_">map</span>(<span class="function"><span class="params">artwork</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (artwork.<span class="property">id</span> === artworkId) &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºåŒ…å«å˜æ›´çš„*æ–°*å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> &#123; ...artwork, <span class="attr">seen</span>: nextSeen &#125;;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æ²¡æœ‰å˜æ›´</span></span><br><span class="line">        <span class="keyword">return</span> artwork;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleToggleYourList</span>(<span class="params">artworkId, nextSeen</span>) &#123;</span><br><span class="line">    <span class="title function_">setYourList</span>(yourList.<span class="title function_">map</span>(<span class="function"><span class="params">artwork</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (artwork.<span class="property">id</span> === artworkId) &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºåŒ…å«å˜æ›´çš„*æ–°*å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> &#123; ...artwork, <span class="attr">seen</span>: nextSeen &#125;;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æ²¡æœ‰å˜æ›´</span></span><br><span class="line">        <span class="keyword">return</span> artwork;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è‰ºæœ¯æ„¿æœ›æ¸…å•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æƒ³çœ‹çš„è‰ºæœ¯æ¸…å•ï¼š<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ItemList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">artworks</span>=<span class="string">&#123;myList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onToggle</span>=<span class="string">&#123;handleToggleMyList&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ä½ æƒ³çœ‹çš„è‰ºæœ¯æ¸…å•ï¼š<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ItemList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">artworks</span>=<span class="string">&#123;yourList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onToggle</span>=<span class="string">&#123;handleToggleYourList&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ItemList</span>(<span class="params">&#123; artworks, onToggle &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;artworks.map(artwork =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;artwork.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">checked</span>=<span class="string">&#123;artwork.seen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                onToggle(</span></span><br><span class="line"><span class="language-xml">                  artwork.id,</span></span><br><span class="line"><span class="language-xml">                  e.target.checked</span></span><br><span class="line"><span class="language-xml">                );</span></span><br><span class="line"><span class="language-xml">              &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            /&gt;</span></span><br><span class="line"><span class="language-xml">            &#123;artwork.title&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸æ¥è®²ï¼Œ<strong>ä½ åº”è¯¥åªç›´æ¥ä¿®æ”¹ä½ åˆšåˆšåˆ›å»ºçš„å¯¹è±¡</strong>ã€‚å¦‚æœä½ æ­£åœ¨æ’å…¥ä¸€ä¸ª<strong>æ–°</strong>çš„ artworkï¼Œä½ å¯ä»¥ä¿®æ”¹å®ƒï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è¦æ”¹å˜çš„æ˜¯ state ä¸­å·²ç»å­˜åœ¨çš„ä¸œè¥¿ï¼Œä½ å°±éœ€è¦å…ˆæ‹·è´ä¸€ä»½äº†ã€‚</p>
<h3 id="3-7-9-ä½¿ç”¨-Immer-ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘"><a href="#3-7-9-ä½¿ç”¨-Immer-ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘" class="headerlink" title="3.7.9 ä½¿ç”¨ Immer ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘"></a>3.7.9 ä½¿ç”¨ Immer ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘</h3><p>åœ¨æ²¡æœ‰ mutation çš„å‰æä¸‹æ›´æ–°åµŒå¥—æ•°ç»„å¯èƒ½ä¼šå˜å¾—æœ‰ç‚¹é‡å¤ã€‚<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/updating-objects-in-state#write-concise-update-logic-with-immer">å°±åƒå¯¹å¯¹è±¡ä¸€æ ·</a>:</p>
<ul>
<li>é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥ä¸éœ€è¦æ›´æ–°å¤„äºéå¸¸æ·±å±‚çº§çš„ state ã€‚å¦‚æœä½ æœ‰æ­¤ç±»éœ€æ±‚ï¼Œä½ æˆ–è®¸éœ€è¦<a target="_blank" rel="noopener" href="https://zh-hans.react.dev/learn/choosing-the-state-structure#avoid-deeply-nested-state">è°ƒæ•´ä¸€ä¸‹æ•°æ®çš„ç»“æ„</a>ï¼Œè®©æ•°æ®å˜å¾—æ‰å¹³ä¸€äº›ã€‚</li>
<li>å¦‚æœä½ ä¸æƒ³æ”¹å˜ state çš„æ•°æ®ç»“æ„ï¼Œä½ ä¹Ÿè®¸ä¼šæ›´å–œæ¬¢ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/immerjs/use-immer">Immer</a> ï¼Œå®ƒè®©ä½ å¯ä»¥ç»§ç»­ä½¿ç”¨æ–¹ä¾¿çš„ï¼Œä½†ä¼šç›´æ¥ä¿®æ”¹åŸå€¼çš„è¯­æ³•ï¼Œå¹¶è´Ÿè´£ä¸ºä½ ç”Ÿæˆæ‹·è´å€¼ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬ç”¨ Immer æ¥é‡å†™çš„è‰ºæœ¯æ„¿æœ›æ¸…å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useImmer &#125; <span class="keyword">from</span> <span class="string">&#x27;use-immer&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nextId = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> initialList = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">0</span>, <span class="attr">title</span>: <span class="string">&#x27;Big Bellies&#x27;</span>, <span class="attr">seen</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">title</span>: <span class="string">&#x27;Lunar Landscape&#x27;</span>, <span class="attr">seen</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">title</span>: <span class="string">&#x27;Terracotta Army&#x27;</span>, <span class="attr">seen</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">BucketList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [myList, updateMyList] = <span class="title function_">useImmer</span>(</span><br><span class="line">    initialList</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> [yourList, updateYourList] = <span class="title function_">useImmer</span>(</span><br><span class="line">    initialList</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleToggleMyList</span>(<span class="params">id, nextSeen</span>) &#123;</span><br><span class="line">    <span class="title function_">updateMyList</span>(<span class="function"><span class="params">draft</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> artwork = draft.<span class="title function_">find</span>(<span class="function"><span class="params">a</span> =&gt;</span></span><br><span class="line">        a.<span class="property">id</span> === id</span><br><span class="line">      );</span><br><span class="line">      artwork.<span class="property">seen</span> = nextSeen;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleToggleYourList</span>(<span class="params">artworkId, nextSeen</span>) &#123;</span><br><span class="line">    <span class="title function_">updateYourList</span>(<span class="function"><span class="params">draft</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> artwork = draft.<span class="title function_">find</span>(<span class="function"><span class="params">a</span> =&gt;</span></span><br><span class="line">        a.<span class="property">id</span> === artworkId</span><br><span class="line">      );</span><br><span class="line">      artwork.<span class="property">seen</span> = nextSeen;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è‰ºæœ¯æ„¿æœ›æ¸…å•<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æˆ‘æƒ³çœ‹çš„è‰ºæœ¯æ¸…å•ï¼š<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ItemList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">artworks</span>=<span class="string">&#123;myList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onToggle</span>=<span class="string">&#123;handleToggleMyList&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ä½ æƒ³çœ‹çš„è‰ºæœ¯æ¸…å•ï¼š<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ItemList</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">artworks</span>=<span class="string">&#123;yourList&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onToggle</span>=<span class="string">&#123;handleToggleYourList&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ItemList</span>(<span class="params">&#123; artworks, onToggle &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;artworks.map(artwork =&gt; (</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;artwork.id&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">checked</span>=<span class="string">&#123;artwork.seen&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                onToggle(</span></span><br><span class="line"><span class="language-xml">                  artwork.id,</span></span><br><span class="line"><span class="language-xml">                  e.target.checked</span></span><br><span class="line"><span class="language-xml">                );</span></span><br><span class="line"><span class="language-xml">              &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            /&gt;</span></span><br><span class="line"><span class="language-xml">            &#123;artwork.title&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      ))&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„å½“ä½¿ç”¨ Immer æ—¶ï¼Œ<strong>ç±»ä¼¼ <code>artwork.seen = nextSeen</code> è¿™ç§ä¼šäº§ç”Ÿ mutation çš„è¯­æ³•ä¸ä¼šå†æœ‰ä»»ä½•é—®é¢˜äº†ï¼š</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">updateMyTodos</span>(<span class="function"><span class="params">draft</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> artwork = draft.<span class="title function_">find</span>(<span class="function"><span class="params">a</span> =&gt;</span> a.<span class="property">id</span> === artworkId);</span><br><span class="line">  artwork.<span class="property">seen</span> = nextSeen;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å› ä¸ºä½ å¹¶ä¸æ˜¯åœ¨ç›´æ¥ä¿®æ”¹åŸå§‹çš„ stateï¼Œè€Œæ˜¯åœ¨ä¿®æ”¹ Immer æä¾›çš„ä¸€ä¸ªç‰¹æ®Šçš„ <code>draft</code> å¯¹è±¡ã€‚åŒç†ï¼Œä½ ä¹Ÿå¯ä»¥ä¸º <code>draft</code> çš„å†…å®¹ä½¿ç”¨ <code>push()</code> å’Œ <code>pop()</code> è¿™äº›ä¼šç›´æ¥ä¿®æ”¹åŸå€¼çš„æ–¹æ³•ã€‚</p>
<p>åœ¨å¹•åï¼ŒImmer æ€»æ˜¯ä¼šæ ¹æ®ä½ å¯¹ <code>draft</code> çš„ä¿®æ”¹æ¥ä»å¤´å¼€å§‹æ„å»ºä¸‹ä¸€ä¸ª stateã€‚è¿™ä½¿å¾—ä½ çš„äº‹ä»¶å¤„ç†ç¨‹åºéå¸¸çš„ç®€æ´ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šç›´æ¥ä¿®æ”¹ stateã€‚</p>
<h3 id="3-7-10-æ‘˜è¦"><a href="#3-7-10-æ‘˜è¦" class="headerlink" title="3.7.10 æ‘˜è¦"></a>3.7.10 æ‘˜è¦</h3><ul>
<li>ä½ å¯ä»¥æŠŠæ•°ç»„æ”¾å…¥ state ä¸­ï¼Œä½†ä½ ä¸åº”è¯¥ç›´æ¥ä¿®æ”¹å®ƒã€‚</li>
<li>ä¸è¦ç›´æ¥ä¿®æ”¹æ•°ç»„ï¼Œè€Œæ˜¯åˆ›å»ºå®ƒçš„ä¸€ä»½ <strong>æ–°çš„</strong> æ‹·è´ï¼Œç„¶åä½¿ç”¨æ–°çš„æ•°ç»„æ¥æ›´æ–°å®ƒçš„çŠ¶æ€ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨ <code>[...arr, newItem]</code> è¿™æ ·çš„æ•°ç»„å±•å¼€è¯­æ³•æ¥å‘æ•°ç»„ä¸­æ·»åŠ å…ƒç´ ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨ <code>filter()</code> å’Œ <code>map()</code> æ¥åˆ›å»ºä¸€ä¸ªç»è¿‡è¿‡æ»¤æˆ–è€…å˜æ¢çš„æ•°ç»„ã€‚</li>
<li>ä½ å¯ä»¥ä½¿ç”¨ Immer æ¥ä¿æŒä»£ç ç®€æ´ã€‚</li>
</ul>
</article>
<div class="article-footer">
    <section id="license">
      <div class="header"><span>è®¸å¯åè®®</span></div>
      <div class="body"><p>æœ¬æ–‡é‡‡ç”¨ <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
</div>
    </section>
    

</div>

<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">è¾ƒæ–°æ–‡ç« </div><a href="/2024/11/26/cloud-mall-vue/">cloud-mall-vue</a></div><div class="item" id="next"><div class="note">è¾ƒæ—©æ–‡ç« </div><a href="/2024/09/06/rpc%E5%9F%BA%E7%A1%80/">rpcåŸºç¡€</a></div></section></div>






<footer class="page-footer footnote"><hr><div class="text"><div>
<span id="runtime_span"></span>
<script type="text/javascript">
function show_runtime() {
    window.setTimeout("show_runtime()", 1000);
    X = new Date("2023/11/20 17:00:00"); // ç½‘ç«™å¼€å§‹è¿è¡Œçš„æ—¥æœŸå’Œæ—¶é—´
    Y = new Date(); // å½“å‰æ—¥æœŸå’Œæ—¶é—´
    T = (Y.getTime() - X.getTime()); // ç½‘ç«™è¿è¡Œçš„æ€»æ¯«ç§’æ•°
    M = 24 * 60 * 60 * 1000; // ä¸€å¤©çš„æ¯«ç§’æ•°
    a = T / M; // æ€»å¤©æ•°
    A = Math.floor(a); // æ€»å¤©æ•°çš„æ•´æ•°éƒ¨åˆ†
    b = (a - A) * 24; // æ€»å°æ—¶æ•°
    B = Math.floor(b); // æ€»å°æ—¶æ•°çš„æ•´æ•°éƒ¨åˆ†
    c = (b - B) * 60; // æ€»åˆ†é’Ÿæ•°
    C = Math.floor((b - B) * 60); // æ€»åˆ†é’Ÿæ•°çš„æ•´æ•°éƒ¨åˆ†
    D = Math.floor((c - C) * 60); // æ€»ç§’æ•°
    runtime_span.innerHTML = "â±ï¸å°ç ´ç«™è‡³ä»Šè¿è¡Œ <span class='runtime'>" + A + "å¤©" + B + "å°æ—¶" + C + "åˆ†" + D + "ç§’</span>";
}
show_runtime();
</script> 
<img src="/assets/cat.gif" alt="" style="float: right; width: 30px;">
</div>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper toc" id="data-toc" collapse="false"><div class="widget-header dis-select"><span class="name">æœ¬æ–‡ç›®å½•</span><a class="cap-action" onclick="sidebar.toggleTOC()" ><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="toc-text">1. ç®€ä»‹</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E6%8F%8F%E8%BF%B0-UI"><span class="toc-text">2. æè¿° UI</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E7%BB%84%E4%BB%B6"><span class="toc-text">2.1 ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-UI%E6%9E%84%E6%88%90"><span class="toc-text">2.1.1 UIæ„æˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-text">2.1.2 å®šä¹‰ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">2.1.3 ä½¿ç”¨ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4-%E5%B5%8C%E5%A5%97%E5%92%8C%E7%BB%84%E7%BB%87%E7%BB%84%E4%BB%B6"><span class="toc-text">2.1.4 åµŒå¥—å’Œç»„ç»‡ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-5-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%AF%BC%E5%85%A5%E4%B8%8E%E5%AF%BC%E5%87%BA"><span class="toc-text">2.1.5 ç»„ä»¶çš„å¯¼å…¥ä¸å¯¼å‡º</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-5-1-%E6%A0%B9%E7%BB%84%E4%BB%B6"><span class="toc-text">2.1.5.1 æ ¹ç»„ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-5-2-%E5%AF%BC%E5%85%A5%E5%92%8C%E5%AF%BC%E5%87%BA%E7%BB%84%E4%BB%B6"><span class="toc-text">2.1.5.2 å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-5-3-%E4%BB%8E%E5%90%8C%E4%B8%80%E6%96%87%E4%BB%B6%E5%AF%BC%E5%87%BA%E5%92%8C%E5%AF%BC%E5%85%A5%E5%A4%9A%E4%B8%AA%E7%BB%84%E4%BB%B6"><span class="toc-text">2.1.5.3 ä»åŒä¸€æ–‡ä»¶å¯¼å‡ºå’Œå¯¼å…¥å¤šä¸ªç»„ä»¶</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-JSX%E6%A0%87%E7%AD%BE%E8%AF%AD%E8%A8%80"><span class="toc-text">2.2 JSXæ ‡ç­¾è¯­è¨€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E5%B0%86%E6%A0%87%E7%AD%BE%E5%BC%95%E5%85%A5-JavaScript"><span class="toc-text">2.2.1 å°†æ ‡ç­¾å¼•å…¥ JavaScript</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-JSX-%E8%A7%84%E5%88%99"><span class="toc-text">2.2.2 JSX è§„åˆ™</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-1-%E5%8F%AA%E8%83%BD%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%A0%B9%E5%85%83%E7%B4%A0"><span class="toc-text">2.2.2.1 åªèƒ½è¿”å›ä¸€ä¸ªæ ¹å…ƒç´ </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%A4%9A%E4%B8%AA-JSX-%E6%A0%87%E7%AD%BE%E9%9C%80%E8%A6%81%E8%A2%AB%E4%B8%80%E4%B8%AA%E7%88%B6%E5%85%83%E7%B4%A0%E5%8C%85%E8%A3%B9%EF%BC%9F"><span class="toc-text">ä¸ºä»€ä¹ˆå¤šä¸ª JSX æ ‡ç­¾éœ€è¦è¢«ä¸€ä¸ªçˆ¶å…ƒç´ åŒ…è£¹ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-2-%E6%A0%87%E7%AD%BE%E5%BF%85%E9%A1%BB%E9%97%AD%E5%90%88"><span class="toc-text">2.2.2.2 æ ‡ç­¾å¿…é¡»é—­åˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-3-%E4%BD%BF%E7%94%A8%E9%A9%BC%E5%B3%B0%E5%BC%8F%E5%91%BD%E5%90%8D%E6%B3%95"><span class="toc-text">2.2.2.3 ä½¿ç”¨é©¼å³°å¼å‘½åæ³•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E5%B0%86-HTML-%E8%BD%AC%E5%8C%96%E4%B8%BA-JSX"><span class="toc-text">2.2.3 å°† HTML è½¬åŒ–ä¸º JSX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-%E5%9C%A8-JSX-%E4%B8%AD%E9%80%9A%E8%BF%87%E5%A4%A7%E6%8B%AC%E5%8F%B7%E4%BD%BF%E7%94%A8-JavaScript"><span class="toc-text">2.2.4 åœ¨ JSX ä¸­é€šè¿‡å¤§æ‹¬å·ä½¿ç”¨ JavaScript</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-1-%E4%BD%BF%E7%94%A8%E5%BC%95%E5%8F%B7%E4%BC%A0%E9%80%92%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">2.2.4.1 ä½¿ç”¨å¼•å·ä¼ é€’å­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-2-%E4%BD%BF%E7%94%A8%E5%A4%A7%E6%8B%AC%E5%8F%B7%EF%BC%9A%E4%B8%80%E6%89%87%E8%BF%9B%E5%85%A5-JavaScript-%E4%B8%96%E7%95%8C%E7%9A%84%E7%AA%97%E6%88%B7"><span class="toc-text">2.2.4.2 ä½¿ç”¨å¤§æ‹¬å·ï¼šä¸€æ‰‡è¿›å…¥ JavaScript ä¸–ç•Œçš„çª—æˆ·</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-3-%E4%BD%BF%E7%94%A8-%E2%80%9C%E5%8F%8C%E5%A4%A7%E6%8B%AC%E5%8F%B7%E2%80%9D%EF%BC%9AJSX-%E4%B8%AD%E7%9A%84-CSS-%E5%92%8C-%E5%AF%B9%E8%B1%A1"><span class="toc-text">2.2.4.3 ä½¿ç”¨ â€œåŒå¤§æ‹¬å·â€ï¼šJSX ä¸­çš„ CSS å’Œ å¯¹è±¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-4-JavaScript-%E5%AF%B9%E8%B1%A1%E5%92%8C%E5%A4%A7%E6%8B%AC%E5%8F%B7%E7%9A%84%E6%9B%B4%E5%A4%9A%E5%8F%AF%E8%83%BD"><span class="toc-text">2.2.4.4 JavaScript å¯¹è±¡å’Œå¤§æ‹¬å·çš„æ›´å¤šå¯èƒ½</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E5%B1%9E%E6%80%A7%E4%BC%A0%E9%80%92"><span class="toc-text">2.3 çˆ¶å­ç»„ä»¶å±æ€§ä¼ é€’</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E7%AE%80%E4%BB%8B"><span class="toc-text">2.3.1 ç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E5%90%91%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92-props"><span class="toc-text">2.3.2 å‘ç»„ä»¶ä¼ é€’ props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-%E7%BB%99-prop-%E6%8C%87%E5%AE%9A%E4%B8%80%E4%B8%AA%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-text">2.3.3 ç»™ prop æŒ‡å®šä¸€ä¸ªé»˜è®¤å€¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-4-%E4%BD%BF%E7%94%A8-JSX-%E5%B1%95%E5%BC%80%E8%AF%AD%E6%B3%95%E4%BC%A0%E9%80%92-props"><span class="toc-text">2.3.4 ä½¿ç”¨ JSX å±•å¼€è¯­æ³•ä¼ é€’ props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-5-%E5%B0%86-JSX-%E4%BD%9C%E4%B8%BA%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92"><span class="toc-text">2.3.5 å°† JSX ä½œä¸ºå­ç»„ä»¶ä¼ é€’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-6-Props-%E5%A6%82%E4%BD%95%E9%9A%8F%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96"><span class="toc-text">2.3.6 Props å¦‚ä½•éšæ—¶é—´å˜åŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-text">2.4 æ¡ä»¶æ¸²æŸ“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-1-%E6%9D%A1%E4%BB%B6%E8%BF%94%E5%9B%9E-JSX"><span class="toc-text">2.4.1 æ¡ä»¶è¿”å› JSX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-2-%E9%80%89%E6%8B%A9%E6%80%A7%E8%BF%94%E5%9B%9E-null"><span class="toc-text">2.4.2 é€‰æ‹©æ€§è¿”å› null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-3-%E9%80%89%E6%8B%A9%E6%80%A7%E5%9C%B0%E5%8C%85%E5%90%AB-JSX"><span class="toc-text">2.4.3 é€‰æ‹©æ€§åœ°åŒ…å« JSX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-4-%E4%B8%8E%E8%BF%90%E7%AE%97%E7%AC%A6%EF%BC%88-%EF%BC%89"><span class="toc-text">2.4.4 ä¸è¿ç®—ç¬¦ï¼ˆ&amp;&amp;ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-5-%E9%80%89%E6%8B%A9%E6%80%A7%E5%9C%B0%E5%B0%86-JSX-%E8%B5%8B%E5%80%BC%E7%BB%99%E5%8F%98%E9%87%8F"><span class="toc-text">2.4.5 é€‰æ‹©æ€§åœ°å°† JSX èµ‹å€¼ç»™å˜é‡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E6%B8%B2%E6%9F%93%E5%88%97%E8%A1%A8"><span class="toc-text">2.5 æ¸²æŸ“åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-%E4%BB%8E%E6%95%B0%E7%BB%84%E4%B8%AD%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE"><span class="toc-text">2.5.1 ä»æ•°ç»„ä¸­æ¸²æŸ“æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-%E5%AF%B9%E6%95%B0%E7%BB%84%E9%A1%B9%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4"><span class="toc-text">2.5.2 å¯¹æ•°ç»„é¡¹è¿›è¡Œè¿‡æ»¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-3-%E7%94%A8-key-%E4%BF%9D%E6%8C%81%E5%88%97%E8%A1%A8%E9%A1%B9%E7%9A%84%E9%A1%BA%E5%BA%8F"><span class="toc-text">2.5.3 ç”¨ key ä¿æŒåˆ—è¡¨é¡¹çš„é¡ºåº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-4-%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE-key-%E5%80%BC"><span class="toc-text">2.5.4 å¦‚ä½•è®¾ç½® key å€¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E4%BF%9D%E6%8C%81%E7%BB%84%E4%BB%B6%E7%BA%AF%E7%B2%B9"><span class="toc-text">2.6 ä¿æŒç»„ä»¶çº¯ç²¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-1-%E7%BA%AF%E5%87%BD%E6%95%B0%EF%BC%9A%E7%BB%84%E4%BB%B6%E4%BD%9C%E4%B8%BA%E5%85%AC%E5%BC%8F"><span class="toc-text">2.6.1 çº¯å‡½æ•°ï¼šç»„ä»¶ä½œä¸ºå…¬å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-2-%E5%89%AF%E4%BD%9C%E7%94%A8%EF%BC%9A%EF%BC%88%E4%B8%8D%E7%AC%A6%E5%90%88%EF%BC%89%E9%A2%84%E6%9C%9F%E7%9A%84%E5%90%8E%E6%9E%9C"><span class="toc-text">2.6.2 å‰¯ä½œç”¨ï¼šï¼ˆä¸ç¬¦åˆï¼‰é¢„æœŸçš„åæœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-3-%E5%B1%80%E9%83%A8-mutation%EF%BC%9A%E7%BB%84%E4%BB%B6%E7%9A%84%E5%B0%8F%E7%A7%98%E5%AF%86"><span class="toc-text">2.6.3 å±€éƒ¨ mutationï¼šç»„ä»¶çš„å°ç§˜å¯†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-4-%E5%93%AA%E4%BA%9B%E5%9C%B0%E6%96%B9-%E5%8F%AF%E8%83%BD-%E5%BC%95%E5%8F%91%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="toc-text">2.6.4 å“ªäº›åœ°æ–¹ å¯èƒ½ å¼•å‘å‰¯ä½œç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#React-%E4%B8%BA%E4%BD%95%E4%BE%A7%E9%87%8D%E4%BA%8E%E7%BA%AF%E5%87%BD%E6%95%B0"><span class="toc-text">React ä¸ºä½•ä¾§é‡äºçº¯å‡½æ•°?</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-5-%E6%91%98%E8%A6%81"><span class="toc-text">2.6.5 æ‘˜è¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E5%B0%86-UI-%E8%A7%86%E4%B8%BA%E6%A0%91"><span class="toc-text">2.7 å°† UI è§†ä¸ºæ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-1-%E6%A0%91%E7%BB%93%E6%9E%84"><span class="toc-text">2.7.1 æ ‘ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-2-%E6%B8%B2%E6%9F%93%E6%A0%91"><span class="toc-text">2.7.2 æ¸²æŸ“æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%82%A3%E4%B9%88%E6%B8%B2%E6%9F%93%E6%A0%91%E4%B8%AD%E7%9A%84-HTML-%E6%A0%87%E7%AD%BE%E5%9C%A8%E5%93%AA%E9%87%8C%E5%91%A2%EF%BC%9F"><span class="toc-text">é‚£ä¹ˆæ¸²æŸ“æ ‘ä¸­çš„ HTML æ ‡ç­¾åœ¨å“ªé‡Œå‘¢ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-3-%E6%A8%A1%E5%9D%97%E4%BE%9D%E8%B5%96%E6%A0%91"><span class="toc-text">2.7.3 æ¨¡å—ä¾èµ–æ ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-4-%E6%91%98%E8%A6%81"><span class="toc-text">2.7.4 æ‘˜è¦</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E4%BA%A4%E4%BA%92"><span class="toc-text">3. äº¤äº’</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E5%93%8D%E5%BA%94%E4%BA%8B%E4%BB%B6"><span class="toc-text">3.1 å“åº”äº‹ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E6%B7%BB%E5%8A%A0%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-text">3.1.1 æ·»åŠ äº‹ä»¶å¤„ç†å‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-%E5%9C%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%B8%AD%E8%AF%BB%E5%8F%96-props"><span class="toc-text">3.1.2 åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è¯»å– props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-3-%E5%B0%86%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA-props-%E4%BC%A0%E9%80%92"><span class="toc-text">3.1.3 å°†äº‹ä»¶å¤„ç†å‡½æ•°ä½œä¸º props ä¼ é€’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-4-%E5%91%BD%E5%90%8D%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0-prop"><span class="toc-text">3.1.4 å‘½åäº‹ä»¶å¤„ç†å‡½æ•° prop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-5-%E4%BA%8B%E4%BB%B6%E4%BC%A0%E6%92%AD"><span class="toc-text">3.1.5 äº‹ä»¶ä¼ æ’­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-6-%E9%98%BB%E6%AD%A2%E4%BC%A0%E6%92%AD"><span class="toc-text">3.1.6 é˜»æ­¢ä¼ æ’­</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E9%98%B6%E6%AE%B5%E4%BA%8B%E4%BB%B6"><span class="toc-text">æ•è·é˜¶æ®µäº‹ä»¶</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-7-%E4%BC%A0%E9%80%92%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E4%BA%8B%E4%BB%B6%E4%BC%A0%E6%92%AD%E7%9A%84%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88"><span class="toc-text">3.1.7 ä¼ é€’å¤„ç†å‡½æ•°ä½œä¸ºäº‹ä»¶ä¼ æ’­çš„æ›¿ä»£æ–¹æ¡ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-8-%E9%98%BB%E6%AD%A2%E9%BB%98%E8%AE%A4%E8%A1%8C%E4%B8%BA"><span class="toc-text">3.1.8 é˜»æ­¢é»˜è®¤è¡Œä¸º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-9-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E5%8F%AF%E4%BB%A5%E5%8C%85%E5%90%AB%E5%89%AF%E4%BD%9C%E7%94%A8%E5%90%97%EF%BC%9F"><span class="toc-text">3.1.9 äº‹ä»¶å¤„ç†å‡½æ•°å¯ä»¥åŒ…å«å‰¯ä½œç”¨å—ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-10-%E6%91%98%E8%A6%81"><span class="toc-text">3.1.10 æ‘˜è¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-State%EF%BC%9A%E7%BB%84%E4%BB%B6%E7%9A%84%E8%AE%B0%E5%BF%86"><span class="toc-text">3.2 Stateï¼šç»„ä»¶çš„è®°å¿†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-%E5%BD%93%E6%99%AE%E9%80%9A%E7%9A%84%E5%8F%98%E9%87%8F%E6%97%A0%E6%B3%95%E6%BB%A1%E8%B6%B3%E6%97%B6"><span class="toc-text">3.2.1 å½“æ™®é€šçš„å˜é‡æ— æ³•æ»¡è¶³æ—¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA-state-%E5%8F%98%E9%87%8F"><span class="toc-text">3.2.2 æ·»åŠ ä¸€ä¸ª state å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-3-%E9%81%87%E8%A7%81%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA-Hook"><span class="toc-text">3.2.3 é‡è§ä½ çš„ç¬¬ä¸€ä¸ª Hook</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-4-%E5%89%96%E6%9E%90-useState"><span class="toc-text">3.2.4 å‰–æ useState</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-5-%E8%B5%8B%E4%BA%88%E4%B8%80%E4%B8%AA%E7%BB%84%E4%BB%B6%E5%A4%9A%E4%B8%AA-state-%E5%8F%98%E9%87%8F"><span class="toc-text">3.2.5 èµ‹äºˆä¸€ä¸ªç»„ä»¶å¤šä¸ª state å˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#React-%E5%A6%82%E4%BD%95%E7%9F%A5%E9%81%93%E8%BF%94%E5%9B%9E%E5%93%AA%E4%B8%AA-state"><span class="toc-text">React å¦‚ä½•çŸ¥é“è¿”å›å“ªä¸ª state</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-6-State-%E6%98%AF%E9%9A%94%E7%A6%BB%E4%B8%94%E7%A7%81%E6%9C%89%E7%9A%84"><span class="toc-text">3.2.6 State æ˜¯éš”ç¦»ä¸”ç§æœ‰çš„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-7-%E6%91%98%E8%A6%81"><span class="toc-text">3.2.7 æ‘˜è¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E6%B8%B2%E6%9F%93%E5%92%8C%E6%8F%90%E4%BA%A4"><span class="toc-text">3.3 æ¸²æŸ“å’Œæäº¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E6%AD%A5%E9%AA%A4-1-%E8%A7%A6%E5%8F%91%E4%B8%80%E6%AC%A1%E6%B8%B2%E6%9F%93"><span class="toc-text">3.3.1 æ­¥éª¤ 1: è§¦å‘ä¸€æ¬¡æ¸²æŸ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-%E6%AD%A5%E9%AA%A4-2-React-%E6%B8%B2%E6%9F%93%E4%BD%A0%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="toc-text">3.3.2 æ­¥éª¤ 2: React æ¸²æŸ“ä½ çš„ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-text">æ€§èƒ½ä¼˜åŒ–</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-%E6%AD%A5%E9%AA%A4-3-React-%E6%8A%8A%E6%9B%B4%E6%94%B9%E6%8F%90%E4%BA%A4%E5%88%B0-DOM-%E4%B8%8A"><span class="toc-text">3.3.3 æ­¥éª¤ 3: React æŠŠæ›´æ”¹æäº¤åˆ° DOM ä¸Š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-4-%E5%B0%BE%E5%A3%B0%EF%BC%9A%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BB%98%E5%88%B6"><span class="toc-text">3.3.4 å°¾å£°ï¼šæµè§ˆå™¨ç»˜åˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-5-%E6%91%98%E8%A6%81"><span class="toc-text">3.3.5 æ‘˜è¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-state-%E5%A6%82%E5%90%8C%E4%B8%80%E5%BC%A0%E5%BF%AB%E7%85%A7"><span class="toc-text">3.4 state å¦‚åŒä¸€å¼ å¿«ç…§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1-%E8%AE%BE%E7%BD%AE-state-%E4%BC%9A%E8%A7%A6%E5%8F%91%E6%B8%B2%E6%9F%93"><span class="toc-text">3.4.1 è®¾ç½® state ä¼šè§¦å‘æ¸²æŸ“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-%E6%B8%B2%E6%9F%93%E4%BC%9A%E5%8F%8A%E6%97%B6%E7%94%9F%E6%88%90%E4%B8%80%E5%BC%A0%E5%BF%AB%E7%85%A7"><span class="toc-text">3.4.2 æ¸²æŸ“ä¼šåŠæ—¶ç”Ÿæˆä¸€å¼ å¿«ç…§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-4-%E9%9A%8F%E6%97%B6%E9%97%B4%E5%8F%98%E5%8C%96%E7%9A%84-state"><span class="toc-text">3.4.4 éšæ—¶é—´å˜åŒ–çš„ state</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-5-%E6%91%98%E8%A6%81"><span class="toc-text">3.4.5 æ‘˜è¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E6%8A%8A%E4%B8%80%E7%B3%BB%E5%88%97-state-%E6%9B%B4%E6%96%B0%E5%8A%A0%E5%85%A5%E9%98%9F%E5%88%97"><span class="toc-text">3.5 æŠŠä¸€ç³»åˆ— state æ›´æ–°åŠ å…¥é˜Ÿåˆ—</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-1-React-%E4%BC%9A%E5%AF%B9-state-%E6%9B%B4%E6%96%B0%E8%BF%9B%E8%A1%8C%E6%89%B9%E5%A4%84%E7%90%86"><span class="toc-text">3.5.1 React ä¼šå¯¹ state æ›´æ–°è¿›è¡Œæ‰¹å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-2-%E5%9C%A8%E4%B8%8B%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%89%8D%E5%A4%9A%E6%AC%A1%E6%9B%B4%E6%96%B0%E5%90%8C%E4%B8%80%E4%B8%AA-state"><span class="toc-text">3.5.2 åœ¨ä¸‹æ¬¡æ¸²æŸ“å‰å¤šæ¬¡æ›´æ–°åŒä¸€ä¸ª state</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-3-%E5%A6%82%E6%9E%9C%E4%BD%A0%E5%9C%A8%E6%9B%BF%E6%8D%A2-state-%E5%90%8E%E6%9B%B4%E6%96%B0-state-%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88"><span class="toc-text">3.5.3 å¦‚æœä½ åœ¨æ›¿æ¢ state åæ›´æ–° state ä¼šå‘ç”Ÿä»€ä¹ˆ?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-4-%E5%A6%82%E6%9E%9C%E4%BD%A0%E5%9C%A8%E6%9B%B4%E6%96%B0-state-%E5%90%8E%E6%9B%BF%E6%8D%A2-state-%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88"><span class="toc-text">3.5.4 å¦‚æœä½ åœ¨æ›´æ–° state åæ›¿æ¢ state ä¼šå‘ç”Ÿä»€ä¹ˆ ?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-5-%E5%91%BD%E5%90%8D%E6%83%AF%E4%BE%8B"><span class="toc-text">3.5.5 å‘½åæƒ¯ä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-6-%E6%91%98%E8%A6%81"><span class="toc-text">3.5.6 æ‘˜è¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E6%9B%B4%E6%96%B0-state-%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="toc-text">3.6 æ›´æ–° state ä¸­çš„å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-1-%E4%BB%80%E4%B9%88%E6%98%AF-mutation%EF%BC%9F"><span class="toc-text">3.6.1 ä»€ä¹ˆæ˜¯ mutationï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-2-%E5%B0%86-state-%E8%A7%86%E4%B8%BA%E5%8F%AA%E8%AF%BB%E7%9A%84"><span class="toc-text">3.6.2 å°† state è§†ä¸ºåªè¯»çš„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%80%E9%83%A8-mutation-%E6%98%AF%E5%8F%AF%E4%BB%A5%E6%8E%A5%E5%8F%97%E7%9A%84"><span class="toc-text">å±€éƒ¨ mutation æ˜¯å¯ä»¥æ¥å—çš„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-3-%E4%BD%BF%E7%94%A8%E5%B1%95%E5%BC%80%E8%AF%AD%E6%B3%95%E5%A4%8D%E5%88%B6%E5%AF%B9%E8%B1%A1"><span class="toc-text">3.6.3 ä½¿ç”¨å±•å¼€è¯­æ³•å¤åˆ¶å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E6%9D%A5%E6%9B%B4%E6%96%B0%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5"><span class="toc-text">ä½¿ç”¨ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ¥æ›´æ–°å¤šä¸ªå­—æ®µ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-4-%E6%9B%B4%E6%96%B0%E4%B8%80%E4%B8%AA%E5%B5%8C%E5%A5%97%E5%AF%B9%E8%B1%A1"><span class="toc-text">3.6.4 æ›´æ–°ä¸€ä¸ªåµŒå¥—å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%B9%B6%E9%9D%9E%E6%98%AF%E7%9C%9F%E6%AD%A3%E5%B5%8C%E5%A5%97%E7%9A%84"><span class="toc-text">å¯¹è±¡å¹¶éæ˜¯çœŸæ­£åµŒå¥—çš„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-5-%E4%BD%BF%E7%94%A8-Immer-%E7%BC%96%E5%86%99%E7%AE%80%E6%B4%81%E7%9A%84%E6%9B%B4%E6%96%B0%E9%80%BB%E8%BE%91"><span class="toc-text">3.6.5 ä½¿ç”¨ Immer ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Immer-%E6%98%AF%E5%A6%82%E4%BD%95%E8%BF%90%E8%A1%8C%E7%9A%84%EF%BC%9F"><span class="toc-text">Immer æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%9C%A8-React-%E4%B8%AD%E4%B8%8D%E6%8E%A8%E8%8D%90%E7%9B%B4%E6%8E%A5%E4%BF%AE%E6%94%B9-state%EF%BC%9F"><span class="toc-text">ä¸ºä»€ä¹ˆåœ¨ React ä¸­ä¸æ¨èç›´æ¥ä¿®æ”¹ stateï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-6-%E6%91%98%E8%A6%81"><span class="toc-text">3.6.6 æ‘˜è¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-%E6%9B%B4%E6%96%B0-state-%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84"><span class="toc-text">3.7 æ›´æ–° state ä¸­çš„æ•°ç»„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-1-%E5%9C%A8%E6%B2%A1%E6%9C%89-mutation-%E7%9A%84%E5%89%8D%E6%8F%90%E4%B8%8B%E6%9B%B4%E6%96%B0%E6%95%B0%E7%BB%84"><span class="toc-text">3.7.1 åœ¨æ²¡æœ‰ mutation çš„å‰æä¸‹æ›´æ–°æ•°ç»„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-2-%E5%90%91%E6%95%B0%E7%BB%84%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0"><span class="toc-text">3.7.2 å‘æ•°ç»„ä¸­æ·»åŠ å…ƒç´ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-3-%E4%BB%8E%E6%95%B0%E7%BB%84%E4%B8%AD%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-text">3.7.3 ä»æ•°ç»„ä¸­åˆ é™¤å…ƒç´ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-4-%E8%BD%AC%E6%8D%A2%E6%95%B0%E7%BB%84"><span class="toc-text">3.7.4 è½¬æ¢æ•°ç»„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-5-%E6%9B%BF%E6%8D%A2%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E5%85%83%E7%B4%A0"><span class="toc-text">3.7.5 æ›¿æ¢æ•°ç»„ä¸­çš„å…ƒç´ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-6-%E5%90%91%E6%95%B0%E7%BB%84%E4%B8%AD%E6%8F%92%E5%85%A5%E5%85%83%E7%B4%A0"><span class="toc-text">3.7.6 å‘æ•°ç»„ä¸­æ’å…¥å…ƒç´ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-7-%E5%85%B6%E4%BB%96%E6%94%B9%E5%8F%98%E6%95%B0%E7%BB%84%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-text">3.7.7 å…¶ä»–æ”¹å˜æ•°ç»„çš„æƒ…å†µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-8-%E6%9B%B4%E6%96%B0%E6%95%B0%E7%BB%84%E5%86%85%E9%83%A8%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="toc-text">3.7.8 æ›´æ–°æ•°ç»„å†…éƒ¨çš„å¯¹è±¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-9-%E4%BD%BF%E7%94%A8-Immer-%E7%BC%96%E5%86%99%E7%AE%80%E6%B4%81%E7%9A%84%E6%9B%B4%E6%96%B0%E9%80%BB%E8%BE%91"><span class="toc-text">3.7.9 ä½¿ç”¨ Immer ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-10-%E6%91%98%E8%A6%81"><span class="toc-text">3.7.10 æ‘˜è¦</span></a></li></ol></li></ol></li></ol></div><div class="widget-footer"><a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Solar by 480 Design - https://creativecommons.org/licenses/by/4.0/ --><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="1.5"><path stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/><path d="M7 3.338A9.95 9.95 0 0 1 12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12c0-1.821.487-3.53 1.338-5"/></g></svg><span>å›åˆ°é¡¶éƒ¨</span></a></div></widget>
</div></aside><div class='float-panel'>
  <button type='button' style='display:none' class='laptop-only rightbar-toggle mobile' onclick='sidebar.rightbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type='button' style='display:none' class='mobile-only leftbar-toggle mobile' onclick='sidebar.leftbar()'>
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">


<script type="text/javascript">
  window.canonical = {"originalHost":null,"officialHosts":["localhost"],"encoded":""};
  const ctx = {
    date_suffix: {
      just: `åˆšåˆš`,
      min: `åˆ†é’Ÿå‰`,
      hour: `å°æ—¶å‰`,
      day: `å¤©å‰`,
    },
    root : `/`,
    tag_plugins: {
      chat: Object.assign({"api":"https://siteinfo.listentothewind.cn/api/v1"}),
    }
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"skip_search":null,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
    loading: `https://api.iconify.design/eos-icons:three-dots-loading.svg?color=%231cd0fd`,
  };
  const deps = {
    jquery: `https://gcore.jsdelivr.net/npm/jquery@3.7/dist/jquery.min.js`,
    marked: `https://gcore.jsdelivr.net/npm/marked@13.0/lib/marked.umd.min.js`,
    lazyload: `/%5Bobject%20Object%5D`
  }
  

</script>

<script type="text/javascript">
  
  function RunItem() {
    this.list = []; // å­˜æ”¾å›è°ƒå‡½æ•°
    this.start = () => {
      for (var i = 0; i < this.list.length; i++) {
        this.list[i].run();
      }
    };
    this.push = (fn, name, setRequestAnimationFrame = true) => {
      let myfn = fn
      if (setRequestAnimationFrame) {
        myfn = () => {
          utils.requestAnimationFrame(fn)
        }
      }
      var f = new Item(myfn, name);
      this.list.push(f);
    };
    this.remove = (name) => {
      for (let index = 0; index < this.list.length; index++) {
        const e = this.list[index];
        if (e.name == name) {
          this.list.splice(index, 1);
        }
      }
    }
    // æ„é€ ä¸€ä¸ªå¯ä»¥runçš„å¯¹è±¡
    function Item(fn, name) {
      // å‡½æ•°åç§°
      this.name = name || fn.name;
      // runæ–¹æ³•
      this.run = () => {
        try {
          fn()
        } catch (error) {
          console.log(error);
        }
      };
    }
  }

  const utils = {
    // æ‡’åŠ è½½ css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')) {
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // é»˜è®¤å¼‚æ­¥ï¼Œå¦‚æœéœ€è¦åŒæ­¥ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ {} å³å¯
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function () {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },

    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      const maxRetry = 3;
      let retryCount = 0;

      return new Promise((resolve, reject) => {
        const load = () => {
          utils.onLoading?.(el);

          let timedOut = false;
          const timeout = setTimeout(() => {
            timedOut = true;
            console.warn('[request] è¶…æ—¶:', url);

            if (++retryCount >= maxRetry) {
              utils.onLoadFailure?.(el);
              onFailure?.();
              reject('è¯·æ±‚è¶…æ—¶');
            } else {
              setTimeout(load, 1000);
            }
          }, 5000);

          fetch(url).then(resp => {
            if (timedOut) return;
            clearTimeout(timeout);

            if (!resp.ok) throw new Error('å“åº”å¤±è´¥');
            return resp;
          }).then(data => {
            if (timedOut) return;
            utils.onLoadSuccess?.(el);
            callback(data);
            resolve(data);
          }).catch(err => {
            clearTimeout(timeout);
            console.warn('[request] é”™è¯¯:', err);

            if (++retryCount >= maxRetry) {
              utils.onLoadFailure?.(el);
              onFailure?.();
              reject(err);
            } else {
              setTimeout(load, 1000);
            }
          });
        };

        load();
      });
    },
    requestWithoutLoading: (url, options = {}, maxRetry = 2, timeout = 5000) => {
      return new Promise((resolve, reject) => {
        let retryCount = 0;

        const tryRequest = () => {
          let timedOut = false;
          const timer = setTimeout(() => {
            timedOut = true;
            if (++retryCount > maxRetry) reject('timeout');
            else tryRequest();
          }, timeout);

          fetch(url, options)
            .then(resp => {
              clearTimeout(timer);
              if (!resp.ok) throw new Error('bad response');
              resolve(resp);
            })
            .catch(err => {
              clearTimeout(timer);
              if (++retryCount > maxRetry) reject(err);
              else setTimeout(tryRequest, 500);
            });
        };

        tryRequest();
      });
    },
    /********************** requestAnimationFrame ********************************/
    // 1ã€requestAnimationFrame ä¼šæŠŠæ¯ä¸€å¸§ä¸­çš„æ‰€æœ‰ DOM æ“ä½œé›†ä¸­èµ·æ¥ï¼Œåœ¨ä¸€æ¬¡é‡ç»˜æˆ–å›æµä¸­å°±å®Œæˆï¼Œå¹¶ä¸”é‡ç»˜æˆ–å›æµçš„æ—¶é—´é—´éš”ç´§ç´§è·Ÿéšæµè§ˆå™¨çš„åˆ·æ–°é¢‘ç‡ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªé¢‘ç‡ä¸ºæ¯ç§’60å¸§ã€‚
    // 2ã€åœ¨éšè—æˆ–ä¸å¯è§çš„å…ƒç´ ä¸­ï¼ŒrequestAnimationFrame å°†ä¸ä¼šè¿›è¡Œé‡ç»˜æˆ–å›æµï¼Œè¿™å½“ç„¶å°±æ„å‘³ç€æ›´å°‘çš„çš„ cpuï¼Œgpu å’Œå†…å­˜ä½¿ç”¨é‡ã€‚
    requestAnimationFrame: (fn) => {
      if (!window.requestAnimationFrame) {
        window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;
      }
      window.requestAnimationFrame(fn)
    },
    dark: {},
  };

  // utils.dark.mode å½“å‰æ¨¡å¼ dark or light
  // utils.dark.toggle() æš—é»‘æ¨¡å¼è§¦å‘å™¨
  // utils.dark.push(callBack[,"callBackName"]) ä¼ å…¥è§¦å‘å™¨å›è°ƒå‡½æ•°
  utils.dark.method = {
    toggle: new RunItem(),
  };
  utils.dark = Object.assign(utils.dark, {
    push: utils.dark.method.toggle.push,
  });
</script>
<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>
<script type="text/javascript">
  (() => {
    const tagSwitchers = document.querySelectorAll('.tag-subtree.parent-tag > a > .tag-switcher-wrapper')
    for (const tagSwitcher of tagSwitchers) {
      tagSwitcher.addEventListener('click', (e) => {
        const parent = e.target.closest('.tag-subtree.parent-tag')
        parent.classList.toggle('expanded')
        e.preventDefault()
      })
    }

    // Get active tag from query string, then activate it.
    const urlParams = new URLSearchParams(window.location.search)
    const activeTag = urlParams.get('tag')
    if (activeTag) {
      let tag = document.querySelector(`.tag-subtree[data-tag="${activeTag}"]`)
      if (tag) {
        tag.querySelector('a').classList.add('active')
        
        while (tag) {
          tag.classList.add('expanded')
          tag = tag.parentElement.closest('.tag-subtree.parent-tag')
        }
      }
    }
  })()
</script>

<script async src="https://gcore.jsdelivr.net/npm/vanilla-lazyload@19.1/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
    callback_loaded: (el) => {
      el.classList.add('loaded');
      const wrapper = el.closest('.lazy-box');
      const icon = wrapper?.querySelector('.lazy-icon');
      if (icon) icon.remove();
    }
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });

  window.wrapLazyloadImages = (container) => {
    if (typeof container === 'string') {
      container = document.querySelector(container);
    }
    if (!container) return;
    
    const images = container.querySelectorAll('img');
    images.forEach((img) => {
      if (img.classList.contains('lazy')) return;

      const src = img.getAttribute('src');
      if (!src) return;

      const wrapper = document.createElement('div');
      wrapper.className = 'lazy-box';

      const newImg = img.cloneNode();
      newImg.removeAttribute('src');
      newImg.setAttribute('data-src', src);
      newImg.classList.add('lazy');

      const icon = document.createElement('div');
      icon.className = 'lazy-icon';
      if (def.loading) {
        icon.style.backgroundImage = `url("${def.loading}")`;
      }

      wrapper.appendChild(newImg);
      wrapper.appendChild(icon);

      img.replaceWith(wrapper);
    });

    // é€šçŸ¥ LazyLoad æ›´æ–°
    if (window.lazyLoadInstance?.update) {
      window.lazyLoadInstance.update();
    }
  }
  
</script>

<!-- required -->
<script src="/js/main.js?v=1.33.1" defer></script>

<script type="text/javascript">
  const applyTheme = (theme) => {
    if (theme === 'auto') {
      document.documentElement.removeAttribute('data-theme')
    } else {
      document.documentElement.setAttribute('data-theme', theme)
    }

    // applyThemeToGiscus(theme)
  }

  // FIXME: è¿™ä¼šå¯¼è‡´æ— æ³•ä½¿ç”¨ preferred_color_scheme ä»¥å¤–çš„ä¸»é¢˜
  const applyThemeToGiscus = (theme) => {
    // theme = theme === 'auto' ? 'preferred_color_scheme' : theme
    const cmt = document.getElementById('giscus')
    if (cmt) {
      // This works before giscus load.
      cmt.setAttribute('data-theme', theme)
    }

    const iframe = document.querySelector('#comments > section.giscus > iframe')
    if (iframe) {
      // This works after giscus loaded.
      const src = iframe.src
      const newSrc = src.replace(/theme=[\w]+/, `theme=${theme}`)
      iframe.src = newSrc
    }
  }

  const switchTheme = () => {
    // light -> dark -> auto -> light -> ...
    const currentTheme = document.documentElement.getAttribute('data-theme')
    let newTheme;
    switch (currentTheme) {
      case 'light':
        newTheme = 'dark'
        break
      case 'dark':
        newTheme = 'auto'
        break
      default:
        newTheme = 'light'
    }
    applyTheme(newTheme)
    window.localStorage.setItem('Stellar.theme', newTheme)
    utils.dark.mode = newTheme === 'auto' ? (window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light") : newTheme;
    utils.dark.method.toggle.start();

    const messages = {
      light: `åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼`,
      dark: `åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼`,
      auto: `åˆ‡æ¢åˆ°è·Ÿéšç³»ç»Ÿé…è‰²`,
    }
    hud?.toast?.(messages[newTheme])
  }

  (() => {
    // Apply user's preferred theme, if any.
    const theme = window.localStorage.getItem('Stellar.theme')
    if (theme !== null) {
      applyTheme(theme)
    } else {
      utils.dark.mode = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
    }
    utils.dark.method.toggle.start();
  })()
</script>


<!-- optional -->



<script defer>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.services = Object.assign({}, JSON.parse(`{"mdrender":{"js":"/js/services/mdrender.js"},"siteinfo":{"js":"/js/services/siteinfo.js","api":null},"ghinfo":{"js":"/js/services/ghinfo.js"},"rating":{"js":"/js/services/rating.js","api":"https://star-vote.xaox.cc/api/rating"},"vote":{"js":"/js/services/vote.js","api":"https://star-vote.xaox.cc/api/vote"},"sites":{"js":"/js/services/sites.js"},"friends":{"js":"/js/services/friends.js"},"friends_and_posts":{"js":"/js/services/friends_and_posts.js"},"timeline":{"js":"/js/services/timeline.js"},"fcircle":{"js":"/js/services/fcircle.js"},"weibo":{"js":"/js/services/weibo.js"},"memos":{"js":"/js/services/memos.js"},"voice":{"js":"/js/plugins/voice.js"},"video":{"js":"/js/plugins/video.js"},"download-file":{"js":"/js/plugins/download-file.js"},"twikoo":{"js":"/js/services/twikoo_latest_comment.js"},"waline":{"js":"/js/services/waline_latest_comment.js"},"artalk":{"js":"/js/services/artalk_latest_comment.js"},"giscus":{"js":"/js/services/giscus_latest_comment.js"},"contributors":{"edit_this_page":{"_posts/":null,"wiki/stellar/":"https://github.com/xaoxuu/hexo-theme-stellar-docs/blob/main/"},"js":"/js/services/contributors.js"}}`));
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id].js;
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else if (id == 'voice') {
        ctx.voiceAudios = document.querySelectorAll('.voice>audio');
        if (ctx.voiceAudios?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            createVoiceDom(ctx.voiceAudios);
          });
        }
      } else if (id == 'video') {
        ctx.videos = document.querySelectorAll('.video>video');
        if (ctx.videos?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            videoEvents(ctx.videos);
          });
        }
      } else if (id == 'download-file') {
        ctx.files = document.querySelectorAll('.file');
        if (ctx.files?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            downloadFileEvent(ctx.files);
          });
        }
      } else {
        const els = document.getElementsByClassName(`ds-${id}`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }

    // chat iphone time
    let phoneTimes = document.querySelectorAll('.chat .status-bar .time');

    if (phoneTimes.length > 0) {
      NowTime();
      var date = new Date();
      var sec = date.getSeconds();
      var firstAdjustInterval = setInterval(firstAdjustTime, 1000 * (60 - sec));
    }

    function firstAdjustTime() {
      NowTime();
      clearInterval(firstAdjustInterval);
      setInterval(NowTime, 1000 * 60);
    }

    function NowTime() {
      for (let i = 0; i < phoneTimes.length; ++i) {
        var timeSpan = phoneTimes[i];
        var date = new Date();
        var hour = date.getHours();
        var min = date.getMinutes();
        timeSpan.innerHTML = check(hour) + ":" + check(min);
      }
    };

    function check(val) {
      if (val < 10) {
        return ("0" + val);
      }
      return (val);
    }

    // chat quote
    const chat_quote_obverser = new IntersectionObserver((entries, observer) => {
      entries.filter((entry) => { return entry.isIntersecting }).sort((a, b) => a.intersectionRect.y !== b.intersectionRect.y ? a.intersectionRect.y - b.intersectionRect.y : a.intersectionRect.x - b.intersectionRect.x).forEach((entry, index) => {
          observer.unobserve(entry.target);
          setTimeout(() => {
            entry.target.classList.add('quote-blink');
            setTimeout(() => {
              entry.target.classList.remove('quote-blink');
            }, 1000);
          }, Math.max(100, 16) * (index + 1));
        });
    });

    var chatQuotes = document.querySelectorAll(".chat .talk .quote");
    chatQuotes.forEach((quote) => {
      quote.addEventListener('click', function () {
        var chatCellDom = document.getElementById("quote-" + quote.getAttribute("quotedCellTag"));
        if (chatCellDom) {
          var chatDiv = chatCellDom.parentElement;
          var mid = chatDiv.clientHeight / 2;
          var offsetTop = chatCellDom.offsetTop;
          if (offsetTop > mid - chatCellDom.clientHeight / 2) {
            chatDiv.scrollTo({
              top: chatCellDom.offsetTop - mid + chatCellDom.clientHeight / 2,
              behavior: "smooth"
            });
          } else {
            chatDiv.scrollTo({
              top: 0,
              behavior: "smooth"
            });
          }
          chat_quote_obverser.observe(chatCellDom);
        }
      });
    });
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://gcore.jsdelivr.net/npm/flying-pages@2/flying-pages.min.js"></script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://gcore.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css`,
    js: `https://gcore.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js`
  };
  var selector = '[data-fancybox]:not(.error), .with-fancybox .atk-content img:not([atk-emoticon])';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const memos = document.getElementsByClassName('ds-memos');
    if (memos != undefined && memos.length > 0) {
      needFancybox = true;
    }
    const fancybox = document.getElementsByClassName('with-fancybox');
    if (fancybox != undefined && fancybox.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || slide.triggerEl.dataset.caption || null
        }
      });
    })
  }
</script>
<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          rewind: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `å¤åˆ¶æˆåŠŸ`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

</div></body></html>
